<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Version 2.0.1</title>
<script src="jquery-3.6.1.min.js"></script>

<script src="statistics.min.js" type="text/javascript"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.5.0/math.js"></script>



<!--
<script type="text/javascript" src="@stdlib/dist-math-base-special-flat/build/bundle.min.js"></script>
<script type="text/javascript" src="@stdlib/dist-math-base-special-flat/build/bundle.min.js"></script>
-->

</head>
<body onload="getParameterByName()">
  




















<style>
  body {
    font-family: 'roboto';
  }
table {
   border-spacing: 0;
   font-size: 14px;
  }

    #tables { display: flex; justify-content: flex-start;    gap: 0; }
    #tables div { margin-right: 0; }

section { display: none; }
.nav a { display: inline-block;  }
.hw {background-color: lightgreen;}
.aw {background-color: pink;}
.d {background-color: lightgray;}
.d {background-color: lightgray;}
          tr div  {
              position: relative;
              
            }
            tr div span {
              position: absolute;
              display: none;
    background-color: #feffbf;
    padding: 20px;
    z-index: 100;
    width: 140px;
    top: 40px;
            }

            tr div:hover span {      
              display: block;
            }

           #tables #fixturesTable div {

        display: inline-block;
    padding: 2px;
    margin-right: 0px;
        border: 1px solid;
    min-width: 18px;
    min-height: 20px;

}
 .homeLoss {
  background-color: pink;
 }
.awayWin, .awayLoss{
border-radius: 50%;
background-color: pink;
min-width: 15px;
}
.homeWin, .awayWin{
background-color: lightgreen;
}


.awayDraw {
  border-radius: 50%;
}
.homeDraw,.awayDraw {
 background-color: #feffbf;
}
.hm .homeDraw,.am .awayDraw {
 background-color: #fff;
}

.hideAway .awayWin, .hideAway .awayLoss,.hideAway .awayDraw {
display: none !important;
}

.hideHome .homeWin, .hideHome .homeLoss,.hideHome .homeDraw {
display: none !important;
}
#tables td {
  border-right: 1px solid #ccc;
  border-bottom: 1px solid #ccc; 
  text-align: center;
  padding: 8px;
  position: relative;
}


#fixturesTable td.matchday {
  font-weight: bold;
  background-color: aliceblue;
}

tr.hide { display: none }

td.noDraws {
  background-color: purple !important;
  color: white;
}
td.homeWin4 {
  background-color: springgreen !important;
}
td.homeWin3 {
  background-color: gold !important;
}
td.homeWin2 {
  background-color: orangered !important;
}

.homeWinDiff2 {
  background-color: springgreen;
}
.homeLossDiff2 {
  background-color: orangered;
}
.awayWinDiff2 {
    background-color: springgreen;
    border-radius: 50%;
}

.pp {
  background-color: lightgrey;
}
#grid {
  display: none;
  padding-bottom: 10px;
}
#grid.show {
  display: table-row;
}
#tables #fixturesTable #grid div {
  border: 0;
}
#tables #fixturesTable #grid div table td{
  padding: 7px 0;
    font-size: 14px;
}
#tables #fixturesTable #grid div table th{
  padding: 12px 0;
  background-color: #eee;
}
.nope {
  background-color: white !important;
}
.hm div {
      border-left: 0 !important;
    border-right: 1px solid !important;
}
.hm div:first-child {
      border-left: 1px solid !important;
    border-right: 1px solid !important;
}
#fixturesTable tr:hover {
  cursor: pointer;
}
#fixturesTable #grid tr:hover, #fixturesTable #grid div:hover {
  cursor: auto;
}
#fixturesTable div table {
  border-left: 1px solid #ccc;
}
#grid .awayWinDiff2, #grid .homeWinDiff2 {
  background-color:  #00ff7fd6;
  }
.score {
  font-weight: 500;
}

.fixtureNumber
{
  position: absolute;
    display: none;
    height: 20px;
    width: 20px;
    left: -10px;
    top: 25%;
    border-radius: 50%;
    color: #fff;
    background-color: #000;
}
#last6GamesHometeam .awayLoss td:nth-child(4),
#last6GamesHometeam .awayWin td:nth-child(4),
#last6GamesHometeam .awayDraw td:nth-child(4),
#last6GamesHometeam .homeLoss td:nth-child(1), 
#last6GamesHometeam .homeWin td:nth-child(1), 
#last6GamesHometeam .homeDraw td:nth-child(1),
#last6GamesHometeam .homeWinDiff2 td:nth-child(1)
{
  font-weight: bold;
}

#last6GamesAwayteam .awayLoss td:nth-child(4),
#last6GamesAwayteam .awayWin td:nth-child(4),
#last6GamesAwayteam .awayDraw td:nth-child(4),
#last6GamesAwayteam .homeLoss td:nth-child(1), 
#last6GamesAwayteam .homeWin td:nth-child(1), 
#last6GamesAwayteam .homeDraw td:nth-child(1),
#last6GamesHometeam .homeWinDiff2 td:nth-child(1)
{
  font-weight: bold;
}


@-webkit-keyframes color_change {
	from { background-color: green; }
	to { background-color: white; }
}

#savedGames tr {
	animation-name: color_change;
	animation-duration: 2s;
}
#savedGames td {
padding: 12px;
}

.nav { display: flex; flex-wrap: wrap; }
.nav a { display: flex; flex-direction: column; font-size: 14px; align-items: center;    padding: 5px;}
.nav a:hover {   background-color:#dcdcdc;}
.nav img { width:100%; height: auto;} 
h1 {
  font-size: 21px;
}

.current {
  background-color:#53ff79;
}
.controls {
  width: 100%;
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 32px;
}

.controls button {
padding: 10px;
}
.poissonScoresTable {
  display: flex !important;
}
.poissonScores,
.poissonScoresLast6, 
.poissonScoresLast3 {
  width: 16%;
}

.poissonScores table,
.poissonScoresLast6 table,
.poissonScoresLast3 table  {
  width: 94%;
}

.container {
  display:  flex !important;
  flex-direction: column !important;
}
.pastFixtures {
  display: none;
}

.container {
  width: 33%;
}

.container th {
  background-color: transparent!important;
}

</style>  

<div id="nav" class="nav"></div>
<h3 id="draw%"></h3>
<section id="homeRows"></section>
<section id="awayRows"></section>
<section id="halfTime"></section>
<section id="halfTimeAway"></section>
<section id="halfTimeTrailing"></section>
<section id="halfTimeAwayTrailing"></section>
<section id="homeGoals"></section>
<section id="awayGoals"></section>
<section id="fixtures"></section>
<section id="seasonFixtures"></section>
<section id="seasonFixtures2018"></section>
<section id="seasonFixtures21"></section>
<section id="seasonFixtures20"></section>
<section id="seasonFixtures19"></section>
<section id="seasonFixtures18"></section>
<section id="seasonFixtures17"></section>
<section id="seasonFixtures16"></section>
<section id="seasonFixtures15"></section>
<section id="seasonFixtures14"></section>
<section id="seasonFixtures13"></section>
<section id="seasonFixtures12"></section>
<section id="seasonFixtures11"></section>
<section id="seasonFixtures10"></section>
<section id="seasonFixtures9"></section>

<section id="fix22"></section>
<section id="fix21"></section>
<section id="fix20"></section>
<section id="fix19"></section>
<section id="fix18"></section>
<section id="fix17"></section>
<section id="fix16"></section>
<section id="fix15"></section>
<section id="fix14"></section>
<section id="fix13"></section>
<section id="fix12"></section>
<section id="fix11"></section>
<section id="fix10"></section>
<section id="fix9"></section>

<section id="f22"></section>
<section id="f21"></section>
<section id="f20"></section>
<section id="f19"></section>
<section id="f18"></section>
<section id="f17"></section>
<section id="f16"></section>
<section id="f15"></section>
<section id="f14"></section>
<section id="f13"></section>
<section id="f12"></section>
<section id="f11"></section>
<section id="f10"></section>
<section id="f9"></section>


<section id="odds"></section>










<Div id="tables">
    <Div>       
    <h1> League  </h1>
    
    <div style="display: flex;">
      <table style="margin: 6px 10px 20px 6px;" id="leagueTable"></table>

    </div>

</Div>
<Div>    
  <h1> Away </h1>
  <table id="awayDrawTable">
  </table>
  </Div>
<Div>         
    <h1> Home </h1>
    <table id="homeDrawTable">
    </table>
</Div>

<Div style="margin-left: 32px;">       
  <h1> Away  Att/Def</h1>
  <table id="awayDefenceTable">
  </table>
</Div>
<Div>       
  <h1> Home Att/Def</h1>
  <table id="homeAttackTable">
  </table>
  <!--   //<div style="height:500px;width:auto;">
    <canvas id="myChart"></canvas>
  </div>
  -->
<button id="save-charts">Save charts</button>
</Div>
  <!-- 
<div>
  <h1> Prediction</h1>
<Div style="display: flex; gap: 16px;    max-height: 790px;">       

  <table id="predictionsHome">
  </table>
  <table id="predictionsAway">
  </table>
</div>
</Div>
  -->
<Div>
<h1 class="title"> Fixtures </h1>
<table id="fixturesTable">
</table>
<div class="controls">
  <div style="display: flex;width: 50%;">
   
      <div class="defence" style="width: 50%;"></div>

    </div>

  <button class="prev"><< Previous league </button>
  <button class="next">Next league >></button>
  </div>
</Div>
  <!-- <canvas id="myChart"></canvas> -->

</Div>

<Div id="savedGames">  
</Div>


<div id="leagueTable2018" style="display: none;"></div>

  <div id="leagueTable2017" style="display: none;">  </div>
  <div id="leagueTable2016" style="display: none;">  </div>
  <div id="leagueTable2015" style="display: none;">  </div>
  <div id="leagueTable2014" style="display: none;">  </div>
<script type="text/javascript">



function getParameterByName(name, url) {
 if (!url) url = window.location.href;
 name = name.replace(/[\[\]]/g, "\\$&");
 var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
  results = regex.exec(url);
 if (!results) return null;
 if (!results[2]) return '';
 return decodeURIComponent(results[2].replace(/\+/g, " "));
}
// Give the parameter a variable name
var league = getParameterByName('league');
console.log(league);
var rowClass = "";

$(".title").text(league);








function get(url) {
 // Return a new promise.
 return new Promise(function(resolve, reject) {
  // Do the usual XHR stuff
  var req = new XMLHttpRequest();
  req.open('GET', url);

  req.onload = function() {
   // This is called even on 404 etc
   // so check the status
   if (req.status == 200) {
    // Resolve the promise with the response text
    resolve(req.response);
   } else {
    // Otherwise reject with the status text
    // which will hopefully be a meaningful error
    reject(Error(req.statusText));
   }
  };

  // Handle network errors
  req.onerror = function() {
   reject(Error("Network Error"));
  };

  // Make the request
  req.send();
 });
}

var d = new Date();
var weekday = new Array(7);
weekday[0] = "Sunday";
weekday[1] = "Monday";
weekday[2] = "Tuesday";
weekday[3] = "Wednesday";
weekday[4] = "Thursday";
weekday[5] = "Friday";
weekday[6] = "Saturday";

var day = weekday[d.getDay()];
var date = d.getDate();
day = day.toString();
day = day.substring(0,3);
today = day.concat(" ",date)
var n = d.getHours();
var currentHours = d.getHours()



get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures.txt').then(function(response) {
 document.getElementById("fixtures").innerHTML = response;
}).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/awayRows.txt').then(function(response) {

 document.getElementById("awayRows").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeHomeLeading.txt').then(function(response) {

 document.getElementById("halfTime").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeAwayLeading.txt').then(function(response) {

 document.getElementById("halfTimeAway").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeHomeTrailing.txt').then(function(response) {

 document.getElementById("halfTimeTrailing").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeAwayTrailing.txt').then(function(response) {


 document.getElementById("halfTimeAwayTrailing").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/homeRows.txt').then(function(response) {

 document.getElementById("homeRows").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/homeGoals.txt').then(function(response) {

 document.getElementById("homeGoals").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/awayGoals.txt').then(function(response) {

 document.getElementById("awayGoals").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/seasonFixtures.txt').then(function(response) {

 document.getElementById("seasonFixtures").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/seasonFixtures2018.txt').then(function(response) {

  document.getElementById("seasonFixtures2018").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-21.txt').then(function(response) {

document.getElementById("seasonFixtures21").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-20.txt').then(function(response) {

document.getElementById("seasonFixtures20").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-19.txt').then(function(response) {

document.getElementById("seasonFixtures19").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-18.txt').then(function(response) {

document.getElementById("seasonFixtures18").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-17.txt').then(function(response) {

document.getElementById("seasonFixtures17").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-16.txt').then(function(response) {

document.getElementById("seasonFixtures16").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-15.txt').then(function(response) {

document.getElementById("seasonFixtures15").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-14.txt').then(function(response) {

document.getElementById("seasonFixtures14").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-13.txt').then(function(response) {

document.getElementById("seasonFixtures13").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-12.txt').then(function(response) {

document.getElementById("seasonFixtures12").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures-11.txt').then(function(response) {

document.getElementById("seasonFixtures11").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/italy2/fixtures-10.txt').then(function(response) {
document.getElementById("seasonFixtures10").innerHTML = response;

}))
//.then(get('https://serkanesque.github.io/hello-world/src/england2/england2-all.txt').then(function(response) {
//document.getElementById("seasonFixtures9").innerHTML = response;

.then(get('https://serkanesque.github.io/hello-world/src/odds.txt').then(function(response) {

 document.getElementById("odds").innerHTML = response;

})).then(get('nav.txt').then(function(response) {
 document.getElementById("nav").innerHTML = response;
 setTimeout(allDone, 250);    
}))









leagueNumber = parseInt(league.substring(league.length - 1));

if(leagueNumber == 1 ) { 
      leagueNumber++;
      leagueName = league.substring(0,league.length - 1);
      getLeague = leagueName+leagueNumber;
      league2= getLeague;
} 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 2 ) { 
    leagueNumber--;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league2= getLeague;
    } 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 3 ) { 
    leagueNumber--;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league2= getLeague;
    } 

 leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 4 ) { 
    leagueNumber--;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league2= getLeague;
    } 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 5 ) { 
    leagueNumber--;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league2= getLeague;
    } 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 6 ) { 
    leagueNumber--;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league2= getLeague;
    } 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 7) { 
    leagueNumber--;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league2= getLeague;
    } 
    leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 8) { 
    leagueNumber--;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league2= getLeague;
    } 
    /*

if(leagueNumber >= 1 ) { 
      leagueName = league.substring(0,league.length - 1);
      if(league=="italy5") {
        leagueNumber--;
      } else {
        leagueNumber++;
      }
   
      getLeague = leagueName+leagueNumber;
      league2= getLeague;
      console.log("getLeague",getLeague)
} else if(leagueNumber >= 3 ) { 
      leagueName = league.substring(0,league.length - 1);
      leagueNumber--;
      getLeague = leagueName+leagueNumber;
      league2= getLeague;
      console.log("getLeague",getLeague)
} 
*/


get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/seasonFixtures.txt').then(function(response) {

 document.getElementById("fix22").innerHTML = response;

}).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-21.txt').then(function(response) {

document.getElementById("fix21").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-20.txt').then(function(response) {

document.getElementById("fix20").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-19.txt').then(function(response) {

document.getElementById("fix19").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-18.txt').then(function(response) {

document.getElementById("fix18").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-17.txt').then(function(response) {

document.getElementById("fix17").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-16.txt').then(function(response) {

document.getElementById("fix16").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-15.txt').then(function(response) {

document.getElementById("fix15").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-14.txt').then(function(response) {

document.getElementById("fix14").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-13.txt').then(function(response) {

document.getElementById("fix13").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-12.txt').then(function(response) {

document.getElementById("fix12").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-11.txt').then(function(response) {

document.getElementById("fix11").innerHTML = response;

}))



leagueNumber = parseInt(league.substring(league.length - 1));

if(leagueNumber == 1 ) { 
      leagueNumber+=2;
      leagueName = league.substring(0,league.length - 1);
      getLeague = leagueName+leagueNumber;
      league3= getLeague;
} 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 2 ) { 
    leagueNumber++;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league3= getLeague;
    } 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 3 ) { 
  if(league == "france3") {
    leagueNumber-=2;
  } else {
      leagueNumber++;
  }

    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league3= getLeague;
    } 

 leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 4 ) { 
  leagueNumber++;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league3= getLeague;
    } 

leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 5 ) { 
  leagueNumber++;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league3= getLeague;
    } 

    leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 6 ) { 
  leagueNumber++;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league3= getLeague;
    } 


    leagueNumber = parseInt(league.substring(league.length - 1));
if(leagueNumber == 7 ) { 
  leagueNumber++;
    leagueName = league.substring(0,league.length - 1);
    getLeague = leagueName+leagueNumber;
    league3= getLeague;
    } 




get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/seasonFixtures.txt').then(function(response) {

 document.getElementById("f22").innerHTML = response;

}).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-21.txt').then(function(response) {

document.getElementById("f21").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-20.txt').then(function(response) {

document.getElementById("f20").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-19.txt').then(function(response) {

document.getElementById("f19").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-18.txt').then(function(response) {

document.getElementById("f18").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-17.txt').then(function(response) {

document.getElementById("f17").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-16.txt').then(function(response) {

document.getElementById("f16").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-15.txt').then(function(response) {

document.getElementById("f15").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-14.txt').then(function(response) {

document.getElementById("f14").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-13.txt').then(function(response) {

document.getElementById("f13").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-12.txt').then(function(response) {

document.getElementById("f12").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + getLeague + '/fixtures-11.txt').then(function(response) {

document.getElementById("f11").innerHTML = response;

}))




























$(document).ready(function(){
  setTimeout(getNav,750);

});

function getNav() {
  leagueLinks = $(".nav a");
    console.log("leagueLinks",leagueLinks)
    leagueLinks.each(function() {
      if($(this).attr('id') == league) $(this).addClass("current");
      })
}

$(".next").click(function() {
  navControls($(this).attr('class'));
})
$(".prev").click(function() {
  navControls($(this).attr('class'));
});

function navControls(direction) {
  leagueLinks = $(".nav a");
    leagueLinks.each(function() {
      if($(this).attr('id') == league) {
        if(direction == "next") {
          let link = $(this).next().attr("href");
          window.location = link;
        }else {
          let link = $(this).prev().attr("href");
          window.location = link;
        }
      }
      })

}



/*

  fetch('https://serkanesque.github.io/hello-world/src/' + league + '/data.json')
  .then(response => response.json())
  .then(data => {

    window.dataArray = data.map(item => item);
        
  });

*/

var leagueTable2 =  document.getElementById('leagueTable').cloneNode(true);
 leagueTable2.id = "leagueTable2";
 document.getElementById('leagueTable').after(leagueTable2);

function allDone() {


 console.log("ALL DONE");


 var halfTimeContainerDiv = document.getElementById("halfTime");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeLeading = [];
 for (var i = 1; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  team.name =  team.name.replace(/[^a-zA-Z ]/g, "")

  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeLeading.push(team);
 }


 var halfTimeContainerDiv = document.getElementById("halfTimeAway");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeLeadingAway = [];
 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  team.name =  team.name.replace(/[^a-zA-Z ]/g, "")
  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeLeadingAway.push(team);
 }


 var halfTimeContainerDiv = document.getElementById("halfTimeTrailing");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeTrailing = [];
 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  team.name =  team.name.replace(/[^a-zA-Z ]/g, "")
  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeTrailing.push(team);
 }
  


 var halfTimeContainerDiv = document.getElementById("halfTimeAwayTrailing");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeAwayTrailing = [];
 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
    team.name =  team.name.replace(/[^a-zA-Z ]/g, "")
  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeAwayTrailing.push(team);
 }

 var halfTimeContainerDiv = document.getElementById("homeGoals");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByClassName("trow8");
 halfTimeHomeGoals = [];

 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  var scored = 0;
  var conceded = 0;
  var last20scored = 0;
  var last20conceded = 0;
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  team.fistHalfGoals = halfTimeInnerDivs[i].childNodes[17].textContent.trim();

  zero10 = halfTimeInnerDivs[i].childNodes[3].textContent.trim();
  zero10 = zero10.split('-');
  scored += parseInt(zero10[0])
  conceded += parseInt(zero10[1])


  ten20 = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  ten20 = ten20.split('-');
  scored += parseInt(ten20[0])
  conceded += parseInt(ten20[1])

  twenty30 = halfTimeInnerDivs[i].childNodes[7].textContent.trim();
  twenty30 = twenty30.split('-');
  scored += parseInt(twenty30[0])
  conceded += parseInt(twenty30[1])

  thrity40 = halfTimeInnerDivs[i].childNodes[9].textContent.trim();
  thrity40 = thrity40.split('-');
  scored += parseInt(thrity40[0])
  conceded += parseInt(thrity40[1])

  forty50 = halfTimeInnerDivs[i].childNodes[11].textContent.trim();
  forty50 = forty50.split('-');
  scored += parseInt(forty50[0])
  conceded += parseInt(forty50[1])

  fifty60 = halfTimeInnerDivs[i].childNodes[13].textContent.trim();
  fifty60 = fifty60.split('-');
  scored += parseInt(fifty60[0])
  conceded += parseInt(fifty60[1])

  sixty70 = halfTimeInnerDivs[i].childNodes[15].textContent.trim();
  sixty70 = sixty70.split('-');
  scored += parseInt(sixty70[0])
  conceded += parseInt(sixty70[1])

  seventy80 = halfTimeInnerDivs[i].childNodes[17].textContent.trim();
  seventy80 = seventy80.split('-');
  last20scored += parseInt(seventy80[0])
  last20conceded += parseInt(seventy80[1])



  eighty90 = halfTimeInnerDivs[i].childNodes[19].textContent.trim();
  eighty90 = eighty90.split('-');
  last20scored += parseInt(eighty90[0])
  last20conceded += parseInt(eighty90[1])





/*
  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (team.name == xmlTeamsFrom[t].childNodes[0].nodeValue) team.name = xmlTeamsTo[t].childNodes[0].nodeValue
  }
*/
  team.scored = scored;
  team.conceded = conceded;
  team.last20scored = last20scored;
  team.last20conceded = last20conceded;
  totalGoals = team.scored + team.last20scored;
  team.seventyScoredPercent = Math.round((team.scored / totalGoals) * 100);
  halfTimeHomeGoals.push(team)


 }








 var halfTimeContainerDiv = document.getElementById("awayGoals");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByClassName("trow8");
 halfTimeAwayGoals = [];


 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  var scored = 0;
  var conceded = 0;
  var last20scored = 0;
  var last20conceded = 0;
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  team.fistHalfGoals = halfTimeInnerDivs[i].childNodes[17].textContent.trim();

  zero10 = halfTimeInnerDivs[i].childNodes[3].textContent.trim();
  zero10 = zero10.split('-');
  scored += parseInt(zero10[0])
  conceded += parseInt(zero10[1])


  ten20 = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  ten20 = ten20.split('-');
  scored += parseInt(ten20[0])
  conceded += parseInt(ten20[1])

  twenty30 = halfTimeInnerDivs[i].childNodes[7].textContent.trim();
  twenty30 = twenty30.split('-');
  scored += parseInt(twenty30[0])
  conceded += parseInt(twenty30[1])

  thrity40 = halfTimeInnerDivs[i].childNodes[9].textContent.trim();
  thrity40 = thrity40.split('-');
  scored += parseInt(thrity40[0])
  conceded += parseInt(thrity40[1])

  forty50 = halfTimeInnerDivs[i].childNodes[11].textContent.trim();
  forty50 = forty50.split('-');
  scored += parseInt(forty50[0])
  conceded += parseInt(forty50[1])

  fifty60 = halfTimeInnerDivs[i].childNodes[13].textContent.trim();
  fifty60 = fifty60.split('-');
  scored += parseInt(fifty60[0])
  conceded += parseInt(fifty60[1])

  sixty70 = halfTimeInnerDivs[i].childNodes[15].textContent.trim();
  sixty70 = sixty70.split('-');
  scored += parseInt(sixty70[0])
  conceded += parseInt(sixty70[1])


  seventy80 = halfTimeInnerDivs[i].childNodes[17].textContent.trim();
  seventy80 = seventy80.split('-');
  last20scored += parseInt(seventy80[0])
  last20conceded += parseInt(seventy80[1])



  eighty90 = halfTimeInnerDivs[i].childNodes[19].textContent.trim();
  eighty90 = eighty90.split('-');
  last20scored += parseInt(eighty90[0])
  last20conceded += parseInt(eighty90[1])





/*
  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (team.name == xmlTeamsFrom[t].childNodes[0].nodeValue) team.name = xmlTeamsTo[t].childNodes[0].nodeValue
  }
*/
  team.scored = scored;
  team.conceded = conceded;
  team.last20scored = last20scored;
  team.last20conceded = last20conceded;
  totalGoals = team.scored + team.last20scored;
  team.seventyScoredPercent = Math.round((team.scored / totalGoals) * 100);
  halfTimeAwayGoals.push(team)


 }











 var odds = document.getElementById("odds");
 var oddsAllTRs = odds.getElementsByTagName('tr');
 var oddsTRs = Array.prototype.filter.call(oddsAllTRs, function(oddTR) {
  return oddTR.className === 'odd' || oddTR.className === 'even';})
oddsArray = [];

 for (var i = 0; i < oddsTRs.length; i++) {
    oddsObject = new Object();
    fixture = oddsTRs[i].childNodes[3].textContent.trim();
    teams = fixture.split(' - ');
    drawOdds = oddsTRs[i].childNodes[7].textContent.trim();
    oddsObject.hName = teams[0];
    if(oddsObject.hName == "Central Coast Mariners") oddsObject.hName = "Central Coast";
    if(oddsObject.hName == "WS Wanderers") oddsObject.hName = "Western Sydney";
    oddsObject.drawOdds = drawOdds;
    oddsArray.push(oddsObject);
 }
  //console.log(oddsArray);














 var seasonFixturesContainerDiv = document.getElementById("seasonFixtures");
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.getElementsByClassName("odd");
 const seasonFixtures = [];
 var allSeasonFixtures = [];


 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  //fixture = seasonFixturesInnerDivs[i].childNodes[5].textContent;
  score = seasonFixturesInnerDivs[i].childNodes[2].textContent;
 // console.log("score",score);

  if(score.includes(":")) break;

  //fixture = fixture.trim();
  //fixture = fixture.split(' - ');
  score = score.trim();
  score = score.split(' - ');

  //fixtureTeam.hName = fixture[0];
  //fixtureTeam.aName = fixture[1];

 hName = seasonFixturesInnerDivs[i].childNodes[1].textContent;
 aName = seasonFixturesInnerDivs[i].childNodes[3].textContent;

if(fixtureTeam.hName == "M`gladbach B" || fixtureTeam.aName  == "M'gladbach B") {

}else {
  fixtureTeam.hName = hName.replace(/�/g, '');
  fixtureTeam.aName = aName.replace(/�/g, '');
}

if(fixtureTeam.hName == "Connah`s Quay")  fixtureTeam.hName = "Connah's Quay"; 
  if(fixtureTeam.aName == "Connah`s Quay")  fixtureTeam.aName = "Connah's Quay"; 
if(fixtureTeam.hName == "Eichst�tt")  fixtureTeam.hName = 'Eichstatt'; 
  if(fixtureTeam.aName == "Eichst�tt")  fixtureTeam.aName = 'Eichstatt';

  if(fixtureTeam.hName == "Eichsttt")  fixtureTeam.hName = 'Eichstatt'; 
  if(fixtureTeam.aName == "Eichsttt")  fixtureTeam.aName = 'Eichstatt';

if(fixtureTeam.hName == "Nrnberg B")  fixtureTeam.hName = 'Nurnberg B'; 
  if(fixtureTeam.aName == "Nrnberg B")  fixtureTeam.aName = 'Nurnberg B';
  
  if(fixtureTeam.hName == "D�zcespor")  fixtureTeam.hName = 'Duzcespor'; 
  if(fixtureTeam.aName == "D�zcespor")  fixtureTeam.aName = 'Duzcespor'; 
    
  if(fixtureTeam.hName == "Dzcespor")  fixtureTeam.hName = 'Duzcespor'; 
  if(fixtureTeam.aName == "Dzcespor")  fixtureTeam.aName = 'Duzcespor'; 
if(fixtureTeam.hName == "D�ren Merzenich")  fixtureTeam.hName = 'Duren Merzenich'; 
  if(fixtureTeam.aName == "Dren Merzenich")  fixtureTeam.aName = 'Duren Merzenich';
  if(fixtureTeam.hName == "Dren Merzenich")  fixtureTeam.hName = 'Duren Merzenich'; 
  if(fixtureTeam.aName == "D�ren Merzenich")  fixtureTeam.aName = 'Duren Merzenich';  
if(fixtureTeam.hName == "Bishop`s St.")  fixtureTeam.hName = "Bishop's St."; 
  if(fixtureTeam.hName == "Saarbrcken")  fixtureTeam.hName = 'Saarbrucken'; 
  if(fixtureTeam.aName == "Saarbrcken")  fixtureTeam.aName = 'Saarbrucken'; 
  if(fixtureTeam.hName == "Newcastle Jets ") fixtureTeam.hName = "Newcastle Jets"
      if(fixtureTeam.hName == "Western Sydney ") fixtureTeam.hName = "Western Sydney"
              if(fixtureTeam.hName == "Melbourne City ") fixtureTeam.hName = "Melbourne City"
  fixtureTeam.hScore = score[0];
  fixtureTeam.aScore = score[1];

  seasonFixtures.push(fixtureTeam);
  //console.log(fixtureTeam);

 }
 //console.log("seasonFixtures",seasonFixtures);










 var seasonFixturesContainerDiv = document.getElementById("seasonFixtures2018");
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.getElementsByClassName("odd");
 console.log
 const seasonFixtures2 = [];
 var allSeasonFixtures = [];


 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  //fixture = seasonFixturesInnerDivs[i].childNodes[5].textContent;
  score = seasonFixturesInnerDivs[i].childNodes[2].textContent;
 // console.log("score",score);

  if(score.includes(":")) break;

  //fixture = fixture.trim();
  //fixture = fixture.split(' - ');
  score = score.trim();
  score = score.split(' - ');

  //fixtureTeam.hName = fixture[0];
  //fixtureTeam.aName = fixture[1];

 hName = seasonFixturesInnerDivs[i].childNodes[1].textContent;
 aName = seasonFixturesInnerDivs[i].childNodes[3].textContent;

if(fixtureTeam.hName == "M`gladbach B" || fixtureTeam.aName  == "M'gladbach B") {

}else {
  fixtureTeam.hName = hName.replace(/�/g, '');
  fixtureTeam.aName = aName.replace(/�/g, '');
}

if(fixtureTeam.hName == "Connah`s Quay")  fixtureTeam.hName = "Connah's Quay"; 
  if(fixtureTeam.aName == "Connah`s Quay")  fixtureTeam.aName = "Connah's Quay"; 
if(fixtureTeam.hName == "Eichst�tt")  fixtureTeam.hName = 'Eichstatt'; 
  if(fixtureTeam.aName == "Eichst�tt")  fixtureTeam.aName = 'Eichstatt';

  if(fixtureTeam.hName == "Eichsttt")  fixtureTeam.hName = 'Eichstatt'; 
  if(fixtureTeam.aName == "Eichsttt")  fixtureTeam.aName = 'Eichstatt';

if(fixtureTeam.hName == "Nrnberg B")  fixtureTeam.hName = 'Nurnberg B'; 
  if(fixtureTeam.aName == "Nrnberg B")  fixtureTeam.aName = 'Nurnberg B';
  
  if(fixtureTeam.hName == "D�zcespor")  fixtureTeam.hName = 'Duzcespor'; 
  if(fixtureTeam.aName == "D�zcespor")  fixtureTeam.aName = 'Duzcespor'; 
    
  if(fixtureTeam.hName == "Dzcespor")  fixtureTeam.hName = 'Duzcespor'; 
  if(fixtureTeam.aName == "Dzcespor")  fixtureTeam.aName = 'Duzcespor'; 
if(fixtureTeam.hName == "D�ren Merzenich")  fixtureTeam.hName = 'Duren Merzenich'; 
  if(fixtureTeam.aName == "Dren Merzenich")  fixtureTeam.aName = 'Duren Merzenich';
  if(fixtureTeam.hName == "Dren Merzenich")  fixtureTeam.hName = 'Duren Merzenich'; 
  if(fixtureTeam.aName == "D�ren Merzenich")  fixtureTeam.aName = 'Duren Merzenich';  
if(fixtureTeam.hName == "Bishop`s St.")  fixtureTeam.hName = "Bishop's St."; 
  if(fixtureTeam.hName == "Saarbrcken")  fixtureTeam.hName = 'Saarbrucken'; 
  if(fixtureTeam.aName == "Saarbrcken")  fixtureTeam.aName = 'Saarbrucken'; 
  if(fixtureTeam.hName == "Newcastle Jets ") fixtureTeam.hName = "Newcastle Jets"
      if(fixtureTeam.hName == "Western Sydney ") fixtureTeam.hName = "Western Sydney"
              if(fixtureTeam.hName == "Melbourne City ") fixtureTeam.hName = "Melbourne City"
  fixtureTeam.hScore = score[0];
  fixtureTeam.aScore = score[1];

  seasonFixtures2.push(fixtureTeam);
  //console.log(fixtureTeam);

 }
 //console.log("seasonFixtures2",seasonFixtures2);








// GET PAST FIXTURES

//if(league !== "italy3" || league !== "italy4" || league !== "italy5") {

 for (var j = 21; j > 10 ; j--) {
 var seasonFixturesContainerDiv = document.getElementById(`seasonFixtures${j}`);
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.querySelectorAll('[id*="g_1"]');
 window['seasonFixtures'+j] = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixtureTeam.hName = seasonFixturesInnerDivs[i].children[3].textContent.trim();
  fixtureTeam.aName = seasonFixturesInnerDivs[i].children[5].textContent.trim();
  fixtureTeam.hScore = seasonFixturesInnerDivs[i].children[6].textContent.trim();
  fixtureTeam.aScore = seasonFixturesInnerDivs[i].children[7].textContent.trim();
  window['seasonFixtures'+j].push(fixtureTeam);
 }}
 for (var j = 21; j > 10 ; j--) {
  window['league'+j] = [];
      for (var k = 0; k < window['seasonFixtures'+j].length; k++) {
        if(!window['league'+j].includes(window['seasonFixtures'+j][k].hName)) window['league'+j].push(window['seasonFixtures'+j][k].hName);
      }
 }

/*
 console.log("seasonFixtures2021",seasonFixtures21)
console.log("seasonFixtures2020",seasonFixtures20)
console.log("seasonFixtures2019",seasonFixtures19)
console.log("seasonFixtures2018",seasonFixtures18)
console.log("seasonFixtures2017",seasonFixtures17)
console.log("seasonFixtures2016",seasonFixtures16)
console.log("seasonFixtures2015",seasonFixtures15)
console.log("seasonFixtures2014",seasonFixtures14)
console.log("seasonFixtures2013",seasonFixtures13)
console.log("seasonFixtures2012",seasonFixtures12)
console.log("seasonFixtures2011",seasonFixtures11)
*/

 for (var j = 21; j > 10 ; j--) {
 var seasonFixturesContainerDiv = document.getElementById(`fix${j}`);
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.querySelectorAll('[id*="g_1"]');
 window['fix'+j] = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixtureTeam.hName = seasonFixturesInnerDivs[i].children[3].textContent.trim();
  fixtureTeam.aName = seasonFixturesInnerDivs[i].children[5].textContent.trim();
  fixtureTeam.hScore = seasonFixturesInnerDivs[i].children[6].textContent.trim();
  fixtureTeam.aScore = seasonFixturesInnerDivs[i].children[7].textContent.trim();
  window['fix'+j].push(fixtureTeam);
 }}
 for (var j = 21; j > 10 ; j--) {
  window['l'+j] = [];
      for (var k = 0; k < window['fix'+j].length; k++) {
        if(!window['l'+j].includes(window['fix'+j][k].hName)) window['l'+j].push(window['fix'+j][k].hName);
      }
 }

 for (var j = 21; j > 10 ; j--) {
 var seasonFixturesContainerDiv = document.getElementById(`f${j}`);
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.querySelectorAll('[id*="g_1"]');
 window['f'+j] = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixtureTeam.hName = seasonFixturesInnerDivs[i].children[3].textContent.trim();
  fixtureTeam.aName = seasonFixturesInnerDivs[i].children[5].textContent.trim();
  fixtureTeam.hScore = seasonFixturesInnerDivs[i].children[6].textContent.trim();
  fixtureTeam.aScore = seasonFixturesInnerDivs[i].children[7].textContent.trim();
  window['f'+j].push(fixtureTeam);
 }}
 for (var j = 21; j > 10 ; j--) {
  window['le'+j] = [];
      for (var k = 0; k < window['f'+j].length; k++) {
        if(!window['le'+j].includes(window['f'+j][k].hName)) window['le'+j].push(window['f'+j][k].hName);
      }
 }

 //////////////////
/*} else {
  ////////////////////
 for (var j = 21; j > 13 ; j--) {
 var seasonFixturesContainerDiv = document.getElementById(`seasonFixtures${j}`);
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.querySelectorAll('[id*="g_1"]');
 window['seasonFixtures'+j] = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixtureTeam.hName = seasonFixturesInnerDivs[i].children[3].textContent.trim();
  fixtureTeam.aName = seasonFixturesInnerDivs[i].children[5].textContent.trim();
  fixtureTeam.hScore = seasonFixturesInnerDivs[i].children[6].textContent.trim();
  fixtureTeam.aScore = seasonFixturesInnerDivs[i].children[7].textContent.trim();
  window['seasonFixtures'+j].push(fixtureTeam);
 }}
 for (var j = 21; j > 13 ; j--) {
  window['league'+j] = [];
      for (var k = 0; k < window['seasonFixtures'+j].length; k++) {
        if(!window['league'+j].includes(window['seasonFixtures'+j][k].hName)) window['league'+j].push(window['seasonFixtures'+j][k].hName);
      }
 }



 
 for (var j = 21; j > 13 ; j--) {
 var seasonFixturesContainerDiv = document.getElementById(`fix${j}`);
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.querySelectorAll('[id*="g_1"]');
 window['fix'+j] = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixtureTeam.hName = seasonFixturesInnerDivs[i].children[3].textContent.trim();
  fixtureTeam.aName = seasonFixturesInnerDivs[i].children[5].textContent.trim();
  fixtureTeam.hScore = seasonFixturesInnerDivs[i].children[6].textContent.trim();
  fixtureTeam.aScore = seasonFixturesInnerDivs[i].children[7].textContent.trim();
  window['fix'+j].push(fixtureTeam);
 }}
 for (var j = 21; j > 13 ; j--) {
  window['l'+j] = [];
      for (var k = 0; k < window['fix'+j].length; k++) {
        if(!window['l'+j].includes(window['fix'+j][k].hName)) window['l'+j].push(window['fix'+j][k].hName);
      }
 }

 for (var j = 21; j > 13 ; j--) {
 var seasonFixturesContainerDiv = document.getElementById(`f${j}`);
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.querySelectorAll('[id*="g_1"]');
 window['f'+j] = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixtureTeam.hName = seasonFixturesInnerDivs[i].children[3].textContent.trim();
  fixtureTeam.aName = seasonFixturesInnerDivs[i].children[5].textContent.trim();
  fixtureTeam.hScore = seasonFixturesInnerDivs[i].children[6].textContent.trim();
  fixtureTeam.aScore = seasonFixturesInnerDivs[i].children[7].textContent.trim();
  window['f'+j].push(fixtureTeam);
 }}
 for (var j = 21; j > 13 ; j--) {
  window['le'+j] = [];
      for (var k = 0; k < window['f'+j].length; k++) {
        if(!window['le'+j].includes(window['f'+j][k].hName)) window['le'+j].push(window['f'+j][k].hName);
      }
 }


 ///////////////////////

 for (var j = 13; j > 10 ; j--) {
 var seasonFixturesContainerDiv = document.getElementById(`seasonFixtures${j}`);
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.getElementsByTagName('tr');
 window['seasonFixtures'+j] = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixtureTeam.hName = seasonFixturesInnerDivs[i].children[2].textContent.trim();
  fixtureTeam.aName = seasonFixturesInnerDivs[i].children[4].textContent.trim();
  score = seasonFixturesInnerDivs[i].children[3].textContent.trim();
  score = score.split('-');
  fixtureTeam.hScore = score[0];
  fixtureTeam.aScore = score[1];
  window['seasonFixtures'+j].push(fixtureTeam);
 }}
 for (var j = 13; j > 10 ; j--) {
  window['league'+j] = [];
      for (var k = 0; k < window['seasonFixtures'+j].length; k++) {
        if(!window['league'+j].includes(window['seasonFixtures'+j][k].hName)) window['league'+j].push(window['seasonFixtures'+j][k].hName);
      }
 }
}
*/
 //console.log("seasonFixtures2010",seasonFixtures2010)
/*

console.log("seasonFixtures2021",seasonFixtures2021)
console.log("seasonFixtures2020",seasonFixtures2020)
console.log("seasonFixtures2019",seasonFixtures2019)
console.log("seasonFixtures2018",seasonFixtures2018)
console.log("seasonFixtures2017",seasonFixtures2017)
console.log("seasonFixtures2016",seasonFixtures2016)
console.log("seasonFixtures2015",seasonFixtures2015)
console.log("seasonFixtures2014",seasonFixtures2014)
console.log("seasonFixtures2014",seasonFixtures2014)
console.log("seasonFixtures2013",seasonFixtures2013)
console.log("seasonFixtures2012",seasonFixtures2012)
console.log("seasonFixtures2011",seasonFixtures2011)
*/









console.log("seasonFixtures2018");
 var seasonFixtures2018ContainerDiv = document.getElementById("seasonFixtures2018");
var seasonFixtures2018InnerDivs = seasonFixtures2018ContainerDiv.getElementsByClassName("odd");

 if(seasonFixtures2018InnerDivs.length==0) {
  var seasonFixtures2018InnerDivs = seasonFixtures2018ContainerDiv.getElementsByClassName("odd");
}

 //if(seasonFixtures2018InnerDivs.length==0) {
  // console.log("No historical data");
   //clearInterval(interval)
//}
//console.log(seasonFixtures2018InnerDivs.length)

 //console.log(seasonFixtures2018InnerDivs.length)

 var seasonFixtures2018 = [];
 var allSeasonFixtures = [];

 for (var i = 0; i < seasonFixtures2018.length; i++) {
  var fixtureTeam = new Object();
  //fixture = seasonFixtures2018InnerDivs[i].childNodes[5].textContent;
  score = seasonFixtures2018InnerDivs[i].childNodes[2].textContent;


  //fixture = fixture.trim();
  //fixture = fixture.split(' - ');
  score = score.trim();
  score = score.split(' - ');

  hName = seasonFixtures2018InnerDivs[i].childNodes[1].textContent;
  aName = seasonFixtures2018InnerDivs[i].childNodes[3].textContent;

  fixtureTeam.hName = hName.replace(/�/g, '');
  fixtureTeam.aName = aName.replace(/�/g, '');
  if(fixtureTeam.hName == "Eichsttt")  fixtureTeam.hName = 'Eichstatt'; 
  if(fixtureTeam.aName == "Eichsttt")  fixtureTeam.aName = 'Eichstatt';
  if(fixtureTeam.hName == "D�zcespor")  fixtureTeam.hName = 'Duzcespor'; 
  if(fixtureTeam.aName == "D�zcespor")  fixtureTeam.aName = 'Duzcespor'; 
  if(fixtureTeam.hName == "Saarbrcken")  fixtureTeam.hName = 'Saarbrucken'; 
  if(fixtureTeam.aName == "Saarbrcken")  fixtureTeam.aName = 'Saarbrucken'; 
  if(fixtureTeam.hName == "D�ren Merzenich")  fixtureTeam.hName = 'Duren Merzenich'; 
  if(fixtureTeam.aName == "D�ren Merzenich")  fixtureTeam.aName = 'Duren Merzenich'; 
  if(fixtureTeam.hName == "Nrnberg B")  fixtureTeam.hName = 'Nurnberg B'; 
  if(fixtureTeam.aName == "Nrnberg B")  fixtureTeam.aName = 'Nurnberg B';

  fixtureTeam.hScore = score[0];
  fixtureTeam.aScore = score[1];
//console.log("fixtureTeam",fixtureTeam);
  seasonFixtures2018.push(fixtureTeam);

 }

//console.log("seasonFixtures2018.length",seasonFixtures2018.length)
//if(seasonFixtures2.length > 100) clearInterval(interval);
console.log("seasonFixtures2018",seasonFixtures2018)
//if(league=="newzealand1") clearInterval(interval);



 var fix2ContainerDiv = document.getElementById("fixtures");
 var fix2InnerDivs = fix2ContainerDiv.getElementsByClassName("trow2");
 if(fix2InnerDivs.length == 0 ) var fix2InnerDivs = fix2ContainerDiv.getElementsByClassName("odd");



/*
 for (var i = 0; i < fix2InnerDivs.length; i++) {
  //console.log("i 1",i)

   var tds = fix2InnerDivs[i].getElementsByTagName("td");
   for (var j = 0; j < tds.length; j++) {    
    if(tds[j].firstElementChild.textContent === "Queen`s Park") {
      tds[j].firstElementChild.textContent = "Queen's Park"
    console.log(tds[j])
    } 
   }
  }
*/



 var totalPlayed;

 var flag = false;
 markup = "";
 var awayContainerDiv = document.getElementById("homeRows");
 var awayInnerDivs = awayContainerDiv.getElementsByClassName("odd");
 homeTable = [];
 var totalDrawn = 0;
 var totalPlayed = 0;

 for (var i = 0; i < awayInnerDivs.length; i++) {
  var team = new Object();
    team.name = awayInnerDivs[i].childNodes[3].textContent.trim();
    if(team.name == "D�zcespor") team.name = 'Duzcespor'; 
    if(team.name == "Saarbr�cken") team.name = 'Saarbrucken'; 
    if(team.name == "N�rnberg B") team.name = 'Nurnberg B'; 
    if(team.name == "Eichst�tt") team.name = 'Eichstatt';
    if(team.name == "Bishop`s St.")  team.name = "Bishop's St.";
    if(team.name == "D�ren Merzenich")  team.name = "Duren Merzenich";
    if( team.name == "M`gladbach B")   team.name = "M'gladbach B"; 
    if(team.name  == "Connah`s Quay")  team.name  = "Connah's Quay";  
  team.played = awayInnerDivs[i].childNodes[5].textContent.trim();
  team.wins = awayInnerDivs[i].childNodes[7].textContent.trim();  
  team.draws = awayInnerDivs[i].childNodes[9].textContent.trim();    
  team.lost = awayInnerDivs[i].childNodes[11].textContent.trim();   
   team.goalsF = awayInnerDivs[i].childNodes[13].textContent.trim();   
  team.goalsA = awayInnerDivs[i].childNodes[15].textContent.trim();
  team.goals = awayInnerDivs[i].childNodes[13].textContent.trim();
  team.points = awayInnerDivs[i].childNodes[19].textContent.trim();  
 

  totalDrawn = totalDrawn + parseInt(team.draws);
  totalPlayed = totalPlayed + parseInt(team.played);


  var drawPercentCalc = parseInt(team.draws) / (parseInt(team.wins) + parseInt(team.lost) + parseInt(team.draws)) * 100;
  team.drawPercent = parseInt(drawPercentCalc.toFixed(1));


var fixtureDrawsPerRound = (totalDrawn / totalPlayed)*((awayInnerDivs.length)/2);

  homeTable.push(team);
  //console.log("home", team);
  document.getElementById("draw%").innerHTML = "League draw " + ((totalDrawn / totalPlayed) * 100).toFixed(2) + "% -" + fixtureDrawsPerRound.toFixed(2) +  " matches are drawn every round";



  //  console.log(team)
 }




















 homeTable.sort(function(a, b) {
  //if (a.drawPercent < b.drawPercent) return -1;
  //if (a.drawPercent > b.drawPercent) return 1;
  return b.wins - a.wins;

 });


 //markup = markup + '<tr class="team"><td>team</td><td>pl </td><td>win</td><td>draw</td><td>lost</td><td>pts</td><td>draw%</td><td>ht lead %</td><td>ht trail %</td><td>ht draw %</td><td>0 - 70m goals</td><td>0 - 70m conceded</td></tr>';
 //markup = markup + '<tr class="team"><td>team</td><td>win</td><td>draw</td><td>lost</td></tr>';



 for (var i = 0; i < homeTable.length; i++) {

        for (var j = 0; j < halfTimeLeading.length; j++) {
        if (halfTimeLeading[j].name == homeTable[i].name) {
        var halfTimeLeadingPercent = halfTimeLeading[j].htPercentage;

        }
        }
        for (var j = 0; j < halfTimeTrailing.length; j++) {
        if (halfTimeTrailing[j].name == homeTable[i].name) {

        var halfTimeTrailingPercent = halfTimeTrailing[j].htPercentage;
        }
        }

        for (var j = 0; j < halfTimeHomeGoals.length; j++) {
        if (halfTimeHomeGoals[j].name == homeTable[i].name) {
        var scored070 = halfTimeHomeGoals[j].scored;
        var conceded070 = halfTimeHomeGoals[j].conceded;
        var seventyScoredPercent = halfTimeHomeGoals[j].seventyScoredPercent;
        }
        }

/*
        if (homeTable[i].drawPercent > 25 && flag == false) {
        markup = markup + '<tr id="empty"><td>&nbsp; </td></tr><tr id="empty"><td>&nbsp; </td></tr>';
        flag = true;
        }
*/
        var halftimeDrawPercentage = 100 - (parseInt(halfTimeLeadingPercent) + parseInt(halfTimeTrailingPercent));

        //markup = markup + '<tr class="team" id=' + homeTable[i].name.split(' ').join('') + '><td>' + homeTable[i].name + '</td><td>' + homeTable[i].played + '</td><td>' + homeTable[i].wins + '</td><td>' + homeTable[i].draws + '</td><td>' + homeTable[i].lost + '</td><td>' + homeTable[i].points + '</td><td>' + homeTable[i].drawPercent + '</td><td>' + halfTimeLeadingPercent + '</td><td>' + halfTimeTrailingPercent + '</td><td>' + halftimeDrawPercentage + '</td><td>' + scored070 + " - " + seventyScoredPercent + '%</td><td>' + conceded070 + '</td></tr>'
        markup = markup + '<tr class="team" id=' + homeTable[i].name.split(' ').join('') + '><td><span class=fixtureNumber></span>' + homeTable[i].name + '</td><td>' + homeTable[i].wins + '</td><td>' + homeTable[i].draws + '</td><td>' + homeTable[i].lost + '</td><td>' + homeTable[i].points + '</td></tr>'

 }
 //


 document.getElementById('homeDrawTable').innerHTML = markup;


 var flag = false;


 function sortNumber(a, b) {
  return a.draws - b.draw;
 }

 function sortWin(a, b) {
  return a.wins - b.wins;
 }

 //markup = '<tr class="team"><td>team</td><td>pl </td><td>wins</td><td>draw</td><td>lost</td><td>pts</td><td>draw %</td><td>ht lead %</td><td>ht trail %</td><td>ht draw %</td><td>0 - 70m goals</td><td>0 - 70m conceded</td></tr>';
 markup = '';

 var awayContainerDiv = document.getElementById("awayRows");
 var awayInnerDivs = awayContainerDiv.getElementsByClassName("odd");
 awayTable = [];

 for (var i = 0; i < awayInnerDivs.length; i++) {
  var team = new Object();
    team.name = awayInnerDivs[i].childNodes[3].textContent.trim();
    if(team.name == "D�zcespor") team.name = 'Duzcespor'; 
    if( team.name == "M`gladbach B")   team.name = "M'gladbach B"; 
  if( team.name == "Saarbr�cken")   team.name = 'Saarbrucken'; 
  if(team.name == "Saarbr�cken") team.name = 'Saarbrucken'; 
    if(team.name == "N�rnberg B") team.name = 'Nurnberg B'; 
    if(team.name == "Eichst�tt") team.name = 'Eichstatt';
    if(team.name == "Bishop`s St.")  team.name = "Bishop's St.";
    if(team.name == "D�ren Merzenich")  team.name = "Duren Merzenich";
    if(team.name  == "Connah`s Quay")  team.name  = "Connah's Quay";  

  team.played = awayInnerDivs[i].childNodes[5].textContent.trim();
  team.wins = awayInnerDivs[i].childNodes[7].textContent.trim();  
  team.draws = awayInnerDivs[i].childNodes[9].textContent.trim();    
  team.lost = awayInnerDivs[i].childNodes[11].textContent.trim();   
   team.goalsF = awayInnerDivs[i].childNodes[13].textContent.trim();   
  team.goalsA = awayInnerDivs[i].childNodes[15].textContent.trim();
  team.goals = awayInnerDivs[i].childNodes[13].textContent.trim();
  team.points = awayInnerDivs[i].childNodes[19].textContent.trim();  


  //console.log(team.name + " " + team.played + " " + team.wins + " " + team.draws + " " + team.lost + " " + team.goalsF + " " + team.goalsA + " " + team.goals + " " + team.points);



  var drawPercentCalc = parseInt(team.draws) / (parseInt(team.wins) + parseInt(team.lost) + parseInt(team.draws)) * 100;
  team.drawPercent = parseInt(drawPercentCalc.toFixed(1));


 
  awayTable.push(team);
  //console.log("away",team);
 }
  //

 awayTable.sort(function(a, b) {
  //if (a.drawPercent < b.drawPercent) return -1;
  //if (a.drawPercent > b.drawPercent) return 1;
  if (a.wins < b.wins) return 1;
  if (a.wins > b.wins) return -1;
 });



 for (var i = 0; i < awayTable.length; i++) {
  for (var j = 0; j < halfTimeLeading.length; j++) {
   if (halfTimeLeadingAway[j].name == awayTable[i].name) {
    var halfTimeLeadingPercent = halfTimeLeadingAway[j].htPercentage;
   }
   if (halfTimeAwayTrailing[j].name == awayTable[i].name) {
    var halfTimeAwayTrailingPercent = halfTimeAwayTrailing[j].htPercentage;
   }
  }

        for (var j = 0; j < halfTimeAwayGoals.length; j++) {
        if (halfTimeAwayGoals[j].name == awayTable[i].name) {
        var scored070 = halfTimeAwayGoals[j].scored;
        var conceded070 = halfTimeAwayGoals[j].conceded;
        var seventyScoredPercent = halfTimeAwayGoals[j].seventyScoredPercent;

        }
        }

/*

  if (awayTable[i].drawPercent > 25 && flag == false) {
   markup = markup + '<tr id="empty"><td>&nbsp; </td></tr><tr id="empty"><td>&nbsp; </td></tr>';
   flag = true;
  }
*/
  var halftimeDrawPercentage = 100 - (parseInt(halfTimeLeadingPercent) + parseInt(halfTimeAwayTrailingPercent));

if(league=="germany7" || league=="germany8" || league=="croatia2" || league=="slovakia1" || league=="germany4" || league=="germany5" || league=="germany6" || league=="india1" || league=="china1" || league=="china2" || league=="bosnia1" ||league=="nigeria1" ||league=="southafrica1" || league=="hungary1" || league=="wales1" || league=="serbia1" || league=="newzealand1" || league=="luxembourg1" || league=="czechrepublic1" || league=="albania1" || league=="croatia1" || league=="bolivia1" || league=="colombia1" ||league=="chile1" || league=="france3" || league=="italy5" || league=="italy4" || league=="italy3" || league=="australia1" || league=="austria1" || league=="israel1" || league=="israel2" || league=="romania1" || league=="romania2" || league=="egypt1" || league=="england6" || league=="england7" || league=="england8" || league=="greece1" || league=="greece2") {
   markup = markup + '<tr class="team" id=' + awayTable[i].name.split(' ').join('') + '><td><span class=fixtureNumber></span>' + awayTable[i].name + '</td><td>' + awayTable[i].wins + '</td><td>' + awayTable[i].draws + '</td><td>' + awayTable[i].lost + '</td><td>' + awayTable[i].points + '</td></tr>'
//   markup = markup + '<tr class="team" id=' + awayTable[i].name.split(' ').join('') + '><td>' + awayTable[i].name + '</td><td>' + awayTable[i].played + '</td><td>' + awayTable[i].wins + '</td><td>' + awayTable[i].draws + '</td><td>' + awayTable[i].lost + '</td><td>' + awayTable[i].points + '</td><td>' + awayTable[i].drawPercent + '</td><td>' + 0 + '</td><td>' + 0 + '</td><td>' + 0 + '</td><td>' + 0 + " - " + 0 + '%</td><td>' + 0 + '</td></tr>'

   
}else {
  //markup = markup + '<tr class="team" id=' + awayTable[i].name.split(' ').join('') + '><td>' + awayTable[i].name + '</td><td>' + awayTable[i].played + '</td><td>' + awayTable[i].wins + '</td><td>' + awayTable[i].draws + '</td><td>' + awayTable[i].lost + '</td><td>' + awayTable[i].points + '</td><td>' + awayTable[i].drawPercent + '</td><td>' + halfTimeLeadingPercent + '</td><td>' + halfTimeAwayTrailingPercent + '</td><td>' + halftimeDrawPercentage + '</td><td>' + scored070 + " - " + seventyScoredPercent.toFixed(0) + '%</td><td>' + conceded070 + '</td></tr>'
  markup = markup + '<tr class="team" id=' + awayTable[i].name.split(' ').join('') + '><td><span class=fixtureNumber></span>' + awayTable[i].name + '</td><td>' + awayTable[i].wins + '</td><td>' + awayTable[i].draws + '</td><td>' + awayTable[i].lost + '</td><td>' + awayTable[i].points + '</td></tr>'
 }
}
  //



 document.getElementById('awayDrawTable').innerHTML = markup;



 var fixturesContainerDiv = document.getElementById("fixtures");
 //console.log(fixturesContainerDiv)
 var fixturesInnerDivs = fixturesContainerDiv.getElementsByClassName("odd");


 markup = '<tr><td>Kickoff</td><td style="width:120px;">home team</td><td>Last 3 games</td><td style="width:120px;">Away team</td><td>Last 6 games</td><<td colspan="3">Poisson %<td>this season</td><td>last season h</td><td>last season a</td><td>Draw (b365)</td></tr>';
 //markup = '<tr><td>Kickoff</td><td style="width:120px;">home team</td><td>Last 3 games</td><td style="width:120px;">Away team</td><td>Last 6 games</td><<td>pts delta</td><td>goals f delta</td><td>goals a delta</td><td>this season</td><td>last season h</td><td>last season a</td><td>Draw (b365)</td></tr>';


 var fixturesContainerDiv = document.getElementById("fixtures");
var fixturesInnerDivs = fixturesContainerDiv.getElementsByClassName("odd");


for (var i = 0; i < fixturesInnerDivs.length; i++) {

  var tds = fixturesInnerDivs[i].getElementsByTagName("td");
var fixture = new Object();
  for (var j = 0; j < tds.length; j++) {    


   date = tds[0].textContent.trim();
   if(league == "india1") {
      time = tds[2].firstElementChild.textContent.trim();
    matchTime = date.concat(time);
    } else if(tds[2].firstElementChild) {
    time = tds[2].firstElementChild.firstElementChild.textContent.trim();
    matchTime = date.concat(time);
  } else {
    matchTime = date;
  }
   
  
  }
   }


 for (var i = 0; i < fix2InnerDivs.length; i++) {
  //console.log("i 1",i)

   var tds = fix2InnerDivs[i].getElementsByTagName("td");
var fixture = new Object();
   for (var j = 0; j < tds.length; j++) {     
    //var time = tds[0].textContent.trim()
   // timeClean = time.replace(/[^\w\s]/gi, '');


    homeTeam2 = tds[1].childNodes[0].textContent.replace(/[^\w\s]/gi, '');
//console.log("homeTeam2",homeTeam2);
    homeTeam2 = homeTeam2.trim();

    if(homeTeam2.length != 0){
      homeTeam = homeTeam2;

//console.log("homeTeam",homeTeam)

if(homeTeam == "Atherton C")  homeTeam = "Atherton C."
if(homeTeam == "V Francavilla")  homeTeam = "V. Francavilla";
if(homeTeam == "A Cerignola")  homeTeam = "A. Cerignola";

if(homeTeam == "Rushden  D")  homeTeam = "Rushden & D.";
if(homeTeam == "St Ives Town")  homeTeam = "St. Ives Town";
if(homeTeam == "DrochtersenA")  homeTeam = "Drochtersen/A.";
if(homeTeam == "Eichsttt")  homeTeam = "Eichstatt";
if(homeTeam == "W Burghausen")  homeTeam = "W. Burghausen";
if(homeTeam == "Nrnberg B")  homeTeam = "Nurnberg B";
     if(homeTeam == "Rain  Lech")  homeTeam = "Rain / Lech";

if(homeTeam == "HankofenH")  homeTeam = "Hankofen-H.";
if(homeTeam == "Turkgucu M")  homeTeam = "Turkgucu M.";
if(homeTeam == "Greuther F B")  homeTeam = "Greuther F. B";
if(homeTeam == "St Pauli B")  homeTeam = "St. Pauli B";
if(homeTeam == "Dzcespor")  homeTeam = "Duzcespor";
if(homeTeam == "FuldaLehnerz")  homeTeam = "Fulda-Lehnerz";
if(homeTeam == "Bowers  Pitsea")  homeTeam = "Bowers & Pitsea";
if(homeTeam == "Bishops St")  homeTeam = "Bishop's St.";
if(homeTeam == "Mgladbach B")  homeTeam = "M'gladbach B";
if(homeTeam == "Dren Merzenich")  homeTeam = "Duren Merzenich";
if(homeTeam == "KaanMarienborn")  homeTeam = "Kaan-Marienborn";

if(homeTeam == "BourgenBresse")  homeTeam = "Bourg-en-Bresse";
if(homeTeam == "BastiaBorgo")  homeTeam = "Bastia-Borgo";
if(homeTeam == "Menemen B")  homeTeam = "Menemen B.";
if(homeTeam == "Tarsus Idman Y")  homeTeam = "Tarsus Idman Y.";
if(homeTeam == "Arnavutkoy B")  homeTeam = "Arnavutkoy B.";
if(homeTeam == "B Petrolspor")  homeTeam = "B. Petrolspor";

if(homeTeam == "Paris 13 A")  homeTeam = "Paris 13 A.";

if(homeTeam == "Preuss Munster")  homeTeam = "Preuss. Munster";
if(homeTeam == "Alemannia A")  homeTeam = "Alemannia A.";


if(homeTeam == "Teutonia O")  homeTeam = "Teutonia O.";
if(homeTeam == "Weiche F")  homeTeam = "Weiche F.";
if(homeTeam == "Lok Leipzig")  homeTeam = "Lok. Leipzig";

if(homeTeam == "T Nieciecza")  homeTeam = "T. Nieciecza";
     if(homeTeam == "Z Sosnowiec")  homeTeam = "Z. Sosnowiec";



if(homeTeam == "Rakow C")  homeTeam = "Rakow C."; 
if(homeTeam == "Corinthian-C")  homeTeam = "Corinthian-C."; 
if(homeTeam == "Wingate  F")  homeTeam = "Wingate & F."; 
if(homeTeam == "Havant  W")  homeTeam = "Havant & W."; 
if(homeTeam == "Hampton  R")  homeTeam = "Hampton & R."; 
if(homeTeam == "Peterborough S")  homeTeam = "Peterborough S."; 
if(homeTeam == "Melbourne V")  homeTeam = "Melbourne V."; 
if(homeTeam == "Asteras T")  homeTeam = "Asteras T."; 
if(homeTeam == "M A Nazareth")  homeTeam = "M. A. Nazareth"; 
if(homeTeam == "H Jerusalem")  homeTeam = "H. Jerusalem"; 

if(homeTeam == "H Ironi Rishon")  homeTeam = "H. Ironi Rishon"; 
     if(homeTeam == "A Sport Ashdod")  homeTeam = "A. Sport Ashdod"; 
     if(homeTeam == "M A Nazaretah")  homeTeam = "M. A. Nazaretah"; 
     if(homeTeam == "A Sport Ashdod")  homeTeam = "A. Sport Ashdod"; 

if(homeTeam == "M Bnei Raina")  homeTeam = "M. Bnei Raina"; 


if(homeTeam == "Queens Park")  homeTeam = "Queen's Park"; 
if(homeTeam == "Melbourne V")  homeTeam = "Melbourne V."; 

if(homeTeam == "St Johnstone")  homeTeam = "St. Johnstone"; 
if(homeTeam == "St Mirren")  homeTeam = "St. Mirren"; 

if(homeTeam == "Jiangxi L")  homeTeam = "Jiangxi L."; 
     if(homeTeam == "Heilongjiang L")  homeTeam = "Heilongjiang L."; 
     if(homeTeam == "Qingdao Y I")  homeTeam = "Qingdao Y. I."; 
     if(homeTeam == "Xinjiang T")  homeTeam = "Xinjiang T."; 

if(homeTeam == "F Karagumruk")  homeTeam = 'F. Karagumruk'; 
if(homeTeam == "Y Malatyaspor")  homeTeam = "Y. Malatyaspor"; 


if(homeTeam == "Tianjin T")  homeTeam = 'Tianjin T.'; 
if(homeTeam == "S Shenhua")  homeTeam = 'S. Shenhua'; 
if(homeTeam == "S Taishan")  homeTeam = 'S. Taishan'; 
if(homeTeam == "Dalian P")  homeTeam = 'Dalian P.'; 
if(homeTeam == "Wuhan Three T")  homeTeam = 'Wuhan Three T.'; 


if(homeTeam == "Saarbrcken")  homeTeam = 'Saarbrucken'; 
//console.log("homeTeam",homeTeam)
    if(homeTeam == "Borac Banja L")  homeTeam = 'Borac Banja L.'; 
        if(homeTeam == "Rad Bijeljina")  homeTeam = 'Rad. Bijeljina'; 

  if(homeTeam == "Jigawa G Stars")  homeTeam = 'Jigawa G. Stars'; 

  if(homeTeam == "Connahs Quay")  homeTeam = "Connah's Quay";  

  if(homeTeam == "Puskas Akad")  homeTeam = 'Puskas Akad.'; 
     if(homeTeam == "Spartak Sub")  homeTeam = "Spartak Sub."  

  if(homeTeam == "Hamilton Wand")  homeTeam = "Hamilton Wand." 
  if(homeTeam == "Wellington P")  homeTeam = "Wellington P." 

  if(homeTeam == "Ptange")  homeTeam = "P�tange" 
  if(homeTeam == "Vict Rosport")  homeTeam = "Vict. Rosport" 
if(homeTeam == "Lok Zagreb")  homeTeam = "Lok. Zagreb" 

if(homeTeam == "Ceske Budejov")  homeTeam = "Ceske Budejov." 
 
if(homeTeam == "Atl Palmaflor")  homeTeam = "Atl. Palmaflor" 
 if(homeTeam == "J Wilstermann")  homeTeam = "J. Wilstermann" 

if(homeTeam == "Jaguares de C")  homeTeam = "Jaguares de C." 
if(homeTeam == "Cucuta Deport")  homeTeam = "Cucuta Deport." 
  if(homeTeam == "Al Petrolera")  homeTeam = "Al. Petrolera" 
      if(homeTeam == "Ind Medellin")  homeTeam = "Ind. Medellin" 

if(homeTeam == "S Wanderers")  homeTeam = "S. Wanderers" 
if(homeTeam == "U Catolica")  homeTeam = "U. Catolica" 
if(homeTeam == "U de Chile")  homeTeam = "U. de Chile"
if(homeTeam == "U Concepcion")  homeTeam = "U. Concepcion"


if(homeTeam == "E Frankfurt")  homeTeam = "E. Frankfurt" 
if(homeTeam == "Pr Munster")  homeTeam = "Pr. Munster" 
if(homeTeam == "Wurzburger K")  homeTeam = "Wurzburger K."
if(homeTeam == "Defensa y J")  homeTeam = "Defensa y J."
if(homeTeam == "Atl Tucuman")  homeTeam = "Atl. Tucuman"
if(homeTeam == "T de Cordoba")  homeTeam = "T. de Cordoba"
if(homeTeam == "Central Crdoba")  homeTeam = "Central C�rdoba"
if(homeTeam == "Dagenham  R")  homeTeam = "Dagenham & R."
if(homeTeam == "SaintEtienne")  homeTeam = "Saint-Etienne"
if(homeTeam == "Rakow Czest")  homeTeam = "Rakow Czest."
if(homeTeam == "Fatih Karag")  homeTeam = "Fatih Karag."
if(homeTeam == "Menemen Bel")  homeTeam = "Menemen Bel."
if(homeTeam == "MouscronP")  homeTeam = "Mouscron-P"
if(homeTeam == "ZulteWaregem")  homeTeam = "Zulte-Waregem"
if(homeTeam == "SintTruiden")  homeTeam = "Sint-Truiden"
if(homeTeam == "FC Zrich")  homeTeam = "FC Z�rich"
if(homeTeam == "Neuchtel Xamax")  homeTeam = "Neuch�tel Xamax"
if(homeTeam == "St Gallen")  homeTeam = "St. Gallen"
if(homeTeam == "Sp Covilha")  homeTeam = "Sp. Covilha"
if(homeTeam == "H Beer Sheva")  homeTeam = "H. Beer Sheva"
if(homeTeam == "M Tel Aviv")  homeTeam = "M. Tel Aviv"
if(homeTeam == "B Jerusalem")  homeTeam = "B. Jerusalem"

if(homeTeam == "M Petah Tikva")  homeTeam = "M. Petah Tikva"
if(homeTeam == "H Ramat Gan")  homeTeam = "H. Ramat Gan"
if(homeTeam == "H Umm alFahm")  homeTeam = "H. Umm al-Fahm"
if(homeTeam == "Hapoel Petah T")  homeTeam = "Hapoel Petah T."   
if(homeTeam == "Maccabi Ahi N")  homeTeam = "Maccabi Ahi N."  
if(homeTeam == "Hap Bnei Lod")  homeTeam = "Hap. Bnei Lod"  
if(homeTeam == "Hap Ashkelon")  homeTeam = "Hap. Ashkelon"      
                                              
if(homeTeam == "Univ Craiova")  homeTeam = "Univ. Craiova"  
if(homeTeam == "Viit Constanta")  homeTeam = "Viit. Constanta"     
if(homeTeam == "Din Bucuresti")  homeTeam = "Din. Bucuresti" 
if(homeTeam == "Chindia Targov")  homeTeam = "Chindia Targov."  
if(homeTeam == "Pol Iasi")  homeTeam = "Pol. Iasi"  
if(homeTeam == "Ac Clinceni")  homeTeam = "Ac. Clinceni"  

if(homeTeam == "Politehnica T")  homeTeam = "Politehnica T."  
if(homeTeam == "Dun Calarasi")  homeTeam = "Dun. Calarasi"   
if(homeTeam == "R Timisoara")  homeTeam =  "R. Timisoara"    
if(homeTeam == "Univ Cluj")  homeTeam =  "Univ. Cluj" 
if(homeTeam == "DacoGetica Bu")  homeTeam =  "Daco-Getica Bu."  

if(homeTeam == "Ast Tripolis")  homeTeam =  "Ast. Tripolis"  

if(homeTeam == "Dorking W")  homeTeam =  "Dorking W."  
if(homeTeam == "Hampton & Rich")  homeTeam =  "Hampton & Rich."  
if(homeTeam == "Hemel Hemps")  homeTeam =  "Hemel Hemps."  
if(homeTeam == "Dulwich H")  homeTeam =  "Dulwich H." 

if(homeTeam == "Bowers  P")  homeTeam =  "Bowers & P." 
  if(homeTeam == "Haringey B")  homeTeam =  "Haringey B." 

    if(homeTeam == "CorinthianC")  homeTeam =  "Corinthian-C." 
    if(homeTeam == "Concord R")  homeTeam =  "Concord R." 
          if(homeTeam == "Melbourne Vic")  homeTeam =  "Melbourne Vic." 
   if(homeTeam == "St Poelten")  homeTeam =  "St. Poelten" 
       if(homeTeam == "Folkestone Inv")  homeTeam =  "Folkestone Inv." 

               if(homeTeam == "BourgPeronnas")  homeTeam =  "Bourg-Peronnas" 
      if(homeTeam == "JuventusU23")  homeTeam =  "Juventus-U23" 
      if(homeTeam == "V Francavilla")  homeTeam =  "V. Francavilla" 

      if(homeTeam == "L Mikulas")  homeTeam = "L. Mikulas";     
     if(homeTeam == "Z Michalovce")  homeTeam = "Z. Michalovce";
     if(homeTeam == "S Bratislava")  homeTeam = "S. Bratislava";

     if(homeTeam == "A Cerignola")  homeTeam = "A. Cerignola";
     if(homeTeam == "V Francavilla")  homeTeam = "V. Francavilla";
     if(homeTeam == "Xinjiang T")  homeTeam = "Xinjiang T.";
     if(homeTeam == "Kickers Offenb")  homeTeam = "Kickers Offenb.";
    // console.log("homeTeam",homeTeam)
    }     

  }
/*
  var fix2ContainerDiv = document.getElementById("fixtures");
  console.log(fix2ContainerDiv)
 var fix2InnerDivs = fix2ContainerDiv.getElementsByClassName("trow2");
 var fix2InnerDivs = fix2ContainerDiv.getElementsByClassName("odd");
 console.log(fix2InnerDivs)
 awayTeamTds = fix2InnerDivs[i].getElementsByTagName("td"); 
 console.log(awayTeamTds)
 awayTeam2 = awayTeamTds[3].childNodes[0].textContent
 console.log(awayTeam2)
 */
 if(fix2InnerDivs.length == 0 ) var fix2InnerDivs = fix2ContainerDiv.getElementsByClassName("odd");

  awayTeamTds = fix2InnerDivs[i].getElementsByTagName("td");     
  var fixture = new Object();
  if(awayTeamTds[3].childNodes[0].textContent.length < 3) {
       awayTeam2 = awayTeamTds[3].childNodes[1].textContent.replace(/[^\w\s]/gi, ''); 
      } else {
        awayTeam2 = awayTeamTds[3].childNodes[0].textContent.replace(/[^\w\s]/gi, ''); 
      }
      //console.log("awayTeam2",awayTeam2);
    awayTeam2 = awayTeam2.trim();
  
    if(awayTeam2.length != 0) {
     awayTeam = awayTeam2;
     if(awayTeam == "Atherton C")  awayTeam = "Atherton C."
     if(awayTeam == "V Francavilla")  awayTeam = "V. Francavilla";
    if(awayTeam == "A Cerignola")  awayTeam = "A. Cerignola";
     if(awayTeam == "Rushden  D")  awayTeam = "Rushden & D.";
     if(awayTeam == "St Ives Town")  awayTeam = "St. Ives Town";
     if(awayTeam == "DrochtersenA")  awayTeam = "Drochtersen/A.";
     if(awayTeam == "Eichsttt") awayTeam = 'Eichstatt';
     if(awayTeam == "W Burghausen")  awayTeam = "W. Burghausen";
     if(awayTeam == "Nrnberg B")  awayTeam = "Nurnberg B";
     if(awayTeam == "Rain  Lech")  awayTeam = "Rain / Lech";

     if(awayTeam == "HankofenH")  awayTeam = "Hankofen-H.";
     if(awayTeam == "Turkgucu M")  awayTeam = "Turkgucu M.";
     if(awayTeam == "Greuther F B")  awayTeam = "Greuther F. B";
     if(awayTeam == "St Pauli B")  awayTeam = "St. Pauli B";
     if(awayTeam == "Dzcespor")  awayTeam = "Duzcespor";
     if(awayTeam == "FuldaLehnerz")  awayTeam = "Fulda-Lehnerz";
     if(awayTeam == "Kickers Offenb")  awayTeam = "Kickers Offenb.";
     if(awayTeam == "Bowers  Pitsea")  awayTeam = "Bowers & Pitsea";
     if(awayTeam == "Mgladbach B")  awayTeam = "M'gladbach B";
     if(awayTeam == "Dren Merzenich")  awayTeam = "Duren Merzenich";
     if(awayTeam == "KaanMarienborn")  awayTeam = "Kaan-Marienborn";
     if(awayTeam == "BourgenBresse")  awayTeam = "Bourg-en-Bresse";
if(awayTeam == "BastiaBorgo")  awayTeam = "Bastia-Borgo";
if(awayTeam == "Bishops St")  awayTeam = "Bishop's St.";
     if(awayTeam == "Xinjiang T")  awayTeam = "Xinjiang T.";
     if(awayTeam == "A Cerignola")  awayTeam = "A. Cerignola";
     if(awayTeam == "V Francavilla")  awayTeam = "V. Francavilla";


     if(awayTeam == "Menemen B")  awayTeam = "Menemen B.";
if(awayTeam == "Tarsus Idman Y")  awayTeam = "Tarsus Idman Y.";
if(awayTeam == "Arnavutkoy B")  awayTeam = "Arnavutkoy B.";
if(awayTeam == "B Petrolspor")  awayTeam = "B. Petrolspor";
     
     if(awayTeam == "Paris 13 A")  awayTeam = "Paris 13 A.";

     if(awayTeam == "Preuss Munster")  awayTeam = "Preuss. Munster";
if(awayTeam == "Alemannia A")  awayTeam = "Alemannia A.";

     if(awayTeam == "S Bratislava")  awayTeam = "S. Bratislava";
     if(awayTeam == "L Mikulas")  awayTeam = "L. Mikulas";     
     if(awayTeam == "Z Michalovce")  awayTeam = "Z. Michalovce";

     if(awayTeam == "Teutonia O")  awayTeam = "Teutonia O.";
if(awayTeam == "Weiche F")  awayTeam = "Weiche F.";
if(awayTeam == "Lok Leipzig")  awayTeam = "Lok. Leipzig";


     if(awayTeam == "T Nieciecza")  awayTeam = "T. Nieciecza";
     if(awayTeam == "Z Sosnowiec")  awayTeam = "Z. Sosnowiec";

     if(awayTeam == "Rakow C")  awayTeam = "Rakow C."; 

     if(awayTeam == "Corinthian-C")  awayTeam = "Corinthian-C."; 
     if(awayTeam == "Wingate  F")  awayTeam = "Wingate & F."; 
     if(awayTeam == "Havant  W")  awayTeam = "Havant & W."; 

     if(awayTeam == "Hampton  R")  awayTeam = "Hampton & R."; 
     if(awayTeam == "Peterborough S")  awayTeam = "Peterborough S."; 
     if(awayTeam == "Melbourne V")  awayTeam = "Melbourne V."; 
     if(awayTeam == "Asteras T")  awayTeam = "Asteras T."; 
     if(awayTeam == "M A Nazareth")  awayTeam = "M. A. Nazareth"; 

     if(awayTeam == "H Jerusalem")  awayTeam = "H. Jerusalem"; 
     if(awayTeam == "H Ironi Rishon")  awayTeam = "H. Ironi Rishon"; 
     if(awayTeam == "A Sport Ashdod")  awayTeam = "A. Sport Ashdod"; 
     if(awayTeam == "M A Nazaretah")  awayTeam = "M. A. Nazaretah"; 
     if(awayTeam == "A Sport Ashdod")  awayTeam = "A. Sport Ashdod"; 

     if(awayTeam == "M Bnei Raina")  awayTeam = "M. Bnei Raina"; 
     if(awayTeam == "Queens Park")  awayTeam = "Queen's Park"; 

if(awayTeam == "Melbourne V")  awayTeam = "Melbourne V."; 

if(awayTeam == "St Johnstone")  awayTeam = "St. Johnstone"; 
if(awayTeam == "St Mirren")  awayTeam = "St. Mirren"; 


     if(awayTeam == "Jiangxi L")  awayTeam = "Jiangxi L."; 
     if(awayTeam == "Heilongjiang L")  awayTeam = "Heilongjiang L."; 
     if(awayTeam == "Qingdao Y I")  awayTeam = "Qingdao Y. I."; 


     if(awayTeam == "Y Malatyaspor")  awayTeam = "Y. Malatyaspor"; 
     if(awayTeam == "Tianjin T")  awayTeam = 'Tianjin T.'; 
if(awayTeam == "S Shenhua")  awayTeam = 'S. Shenhua'; 
if(awayTeam == "S Taishan")  awayTeam = 'S. Taishan'; 
if(awayTeam == "Dalian P")  awayTeam = 'Dalian P.'; 
if(awayTeam == "Wuhan Three T")  awayTeam = 'Wuhan Three T.'; 

     if(awayTeam == "Saarbrcken")  awayTeam = 'Saarbrucken';
         if(awayTeam == "Borac Banja L")  awayTeam = 'Borac Banja L.'; 
        if(awayTeam == "Rad Bijeljina")  awayTeam = 'Rad. Bijeljina'; 

  if(awayTeam == "Jigawa G Stars")  awayTeam = 'Jigawa G. Stars'; 
  if(awayTeam == "Puskas Akad")  awayTeam = 'Puskas Akad.'; 
  if(awayTeam == "Connahs Quay")  awayTeam = "Connah's Quay";  
  if(awayTeam == "Spartak Sub")  awayTeam = "Spartak Sub."  
  if(awayTeam == "Hamilton Wand")  awayTeam = "Hamilton Wand." 
  if(awayTeam == "Wellington P")  awayTeam = "Wellington P." 
  if(awayTeam == "Ptange")  awayTeam = "P�tange" 
  if(awayTeam == "Vict Rosport")  awayTeam = "Vict. Rosport" 

if(awayTeam == "Lok Zagreb")  awayTeam = "Lok. Zagreb" 
if(awayTeam == "J Wilstermann")  awayTeam = "J. Wilstermann" 
if(awayTeam == "Ceske Budejov")  awayTeam = "Ceske Budejov." 

if(awayTeam == "Jaguares de C")  awayTeam = "Jaguares de C." 
if(awayTeam == "Cucuta Deport")  awayTeam = "Cucuta Deport." 
  if(awayTeam == "Al Petrolera")  awayTeam = "Al. Petrolera" 
      if(awayTeam == "Ind Medellin")  awayTeam = "Ind. Medellin" 

if(awayTeam == "S Wanderers")  awayTeam = "S. Wanderers" 
if(awayTeam == "U Catolica")  awayTeam = "U. Catolica" 
if(awayTeam == "U de Chile")  awayTeam = "U. de Chile"
if(awayTeam == "U Concepcion")  awayTeam = "U. Concepcion"


if(awayTeam == "Atl Palmaflor")  awayTeam = "Atl. Palmaflor" 

if(awayTeam == "E Frankfurt")  awayTeam = "E. Frankfurt" 
if(awayTeam == "Pr Munster")  awayTeam = "Pr. Munster" 
if(awayTeam == "Wurzburger K")  awayTeam = "Wurzburger K." 
if(awayTeam == "Defensa y J")  awayTeam = "Defensa y J."
if(awayTeam == "Atl Tucuman")  awayTeam = "Atl. Tucuman"
if(awayTeam == "T de Cordoba")  awayTeam = "T. de Cordoba"
if(awayTeam == "Central Crdoba")  awayTeam = "Central C�rdoba"
if(awayTeam == "Dagenham  R")  awayTeam = "Dagenham & R."
if(awayTeam == "SaintEtienne")  awayTeam = "Saint-Etienne"
if(awayTeam == "Rakow Czest")  awayTeam = "Rakow Czest."
if(awayTeam == "Fatih Karag")  awayTeam = "Fatih Karag."
if(awayTeam == "Menemen Bel")  awayTeam = "Menemen Bel."
if(awayTeam == "MouscronP")  awayTeam = "Mouscron-P"
if(awayTeam == "ZulteWaregem")  awayTeam = "Zulte-Waregem"
if(awayTeam == "SintTruiden")  awayTeam = "Sint-Truiden"
if(awayTeam == "FC Zrich")  awayTeam = "FC Z�rich"
if(awayTeam == "Neuchtel Xamax")  awayTeam = "Neuch�tel Xamax"
if(awayTeam == "St Gallen")  awayTeam = "St. Gallen"
if(awayTeam == "Sp Covilha")  awayTeam = "Sp. Covilha"

if(awayTeam == "H Beer Sheva")  awayTeam = "H. Beer Sheva"
if(awayTeam == "M Tel Aviv")  awayTeam = "M. Tel Aviv"
if(awayTeam == "B Jerusalem")  awayTeam = "B. Jerusalem"

if(awayTeam == "M Petah Tikva")  awayTeam = "M. Petah Tikva"
if(awayTeam == "H Ramat Gan")  awayTeam = "H. Ramat Gan"
if(awayTeam == "H Umm alFahm")  awayTeam = "H. Umm al-Fahm"
if(awayTeam == "Hapoel Petah T")  awayTeam = "Hapoel Petah T."   
if(awayTeam == "Maccabi Ahi N")  awayTeam = "Maccabi Ahi N."  
if(awayTeam == "Hap Bnei Lod")  awayTeam = "Hap. Bnei Lod"  
if(awayTeam == "Hap Ashkelon")  awayTeam = "Hap. Ashkelon"  

if(awayTeam == "Univ Craiova")  awayTeam = "Univ. Craiova"  
if(awayTeam == "Viit Constanta")  awayTeam = "Viit. Constanta"     
if(awayTeam == "Din Bucuresti")  awayTeam = "Din. Bucuresti" 
if(awayTeam == "Chindia Targov")  awayTeam = "Chindia Targov."  
if(awayTeam == "Pol Iasi")  awayTeam = "Pol. Iasi"  
if(awayTeam == "Ac Clinceni")  awayTeam = "Ac. Clinceni"


if(awayTeam == "Politehnica T")  awayTeam = "Politehnica T."  
if(awayTeam == "Dun Calarasi")  awayTeam = "Dun. Calarasi"   
if(awayTeam == "R Timisoara")  awayTeam =  "R. Timisoara"    
if(awayTeam == "Univ Cluj")  awayTeam =  "Univ. Cluj" 
if(awayTeam == "DacoGetica Bu")  awayTeam =  "Daco-Getica Bu." 

if(awayTeam == "Ast Tripolis")  awayTeam =  "Ast. Tripolis" 

if(awayTeam == "Dorking W")  awayTeam =  "Dorking W."  

if(awayTeam == "Hampton  Rich")  awayTeam =  "Hampton & Rich."  
if(awayTeam == "Hemel Hemps")  awayTeam =  "Hemel Hemps."  
if(awayTeam == "Dulwich H")  awayTeam =  "Dulwich H."  

if(awayTeam == "Bowers  P")  awayTeam =  "Bowers & P." 
  if(awayTeam == "Haringey B")  awayTeam =  "Haringey B." 

    if(awayTeam == "CorinthianC")  awayTeam =  "Corinthian-C." 
    if(awayTeam == "Concord R")  awayTeam =  "Concord R." 
                if(awayTeam == "Melbourne Vic")  awayTeam =  "Melbourne Vic." 
   if(awayTeam == "St Poelten")  awayTeam =  "St. Poelten" 
           if(awayTeam == "Folkestone Inv")  awayTeam =  "Folkestone Inv." 

               if(awayTeam == "BourgPeronnas")  awayTeam =  "Bourg-Peronnas" 
      if(awayTeam == "JuventusU23")  awayTeam =  "Juventus-U23" 
      if(awayTeam == "V Francavilla")  awayTeam =  "V. Francavilla" 
      if(awayTeam == "F Karagumruk")  awayTeam = 'F. Karagumruk'; 
  
  //    console.log("awayTeam",awayTeam);

  } 





for (var j = 0; j < halfTimeHomeGoals.length; j++) {
 if(halfTimeHomeGoals[j].name == homeTeam) {
  var homeTeamScored70 =  halfTimeHomeGoals[j].scored;
    var homeTeamConceed70 =  halfTimeHomeGoals[j].conceded;
 }
}
for (var j = 0; j < halfTimeAwayGoals.length; j++) {

 if(halfTimeAwayGoals[j].name == awayTeam) {
 var awayTeamScored70 =  halfTimeAwayGoals[j].scored;
var awayTeamConceed70 =  halfTimeAwayGoals[j].conceded;
 }
}

delta70minScore = homeTeamScored70 - awayTeamScored70;



 delta70minGoalsAgasint =  awayTeamConceed70 -homeTeamConceed70;
 







 //console.log("awayTeam",awayTeam)
  //console.log("homeTeam",homeTeam + " . v . " + awayTeam)

            const homeTeamFixturesArray =  seasonFixtures.filter(function(team) { return team.hName == homeTeam || team.aName == homeTeam});
            homeTeamFixturesArray.reverse();


            const awayTeamFixturesArray =  seasonFixtures.filter(function(team) { return team.hName == awayTeam || team.aName == awayTeam});
            awayTeamFixturesArray.reverse();


            const pastHomeFixture =  seasonFixtures.filter(function(team) { return team.aName == homeTeam && team.hName == awayTeam });
            pastHomeFixture.reverse();

          const homeTeamFixturesArray2018 =  seasonFixtures2018.filter(function(team) { return team.hName == homeTeam || team.aName == homeTeam});
          const pastHomeFixture2018 =  seasonFixtures2018.filter(function(team) { return team.aName == homeTeam && team.hName == awayTeam });
          const pastHomeFixture2018Home =  seasonFixtures2018.filter(function(team) { return team.hName == homeTeam && team.aName == awayTeam });



        /*
var pastFixtureObject = {
 hScore: pastHomeFixture2018[0].hScore,
 aScore: pastHomeFixture2018[0].aScore,
};
pastFixtureObject.result = function() {
   if(hScore > aScore) return "aw";
   if(hScore < aScore) return "hw";
   if(hScore == aScore) return "d";      
  }


console.log(pastFixtureObject.result)

  const pastFixture18 = {
 hScore: pastHomeFixture2018[0].hScore,
 aScore: pastHomeFixture2018[0].aScore,
result () {
   if(this.hScore > this.aScore) {
      hScore = pastHomeFixture2018[0].hScore;
      aScore = pastHomeFixture2018[0].aScore;
    return "aw";
  }
   if(this.hScore < this.aScore) return "hw";
   if(this.hScore == this.aScore) return "d";      
  }
};

const thisFixture = Object.create(pastFixture18);

console.log(thisFixture.result())
*/
//console.log("pastHomeFixture[0]",pastHomeFixture[0])
if(typeof pastHomeFixture[0] === 'undefined') {
 result = "n/a";

   }else{       

  if(pastHomeFixture[0].hScore == "pp." ) result = "n/a"
  if(pastHomeFixture[0].hScore === 'undefined' ) result = "n/a"
  if(pastHomeFixture[0].aScore === 'undefined' ) result = "n/a"
    if(pastHomeFixture[0].hScore > pastHomeFixture[0].aScore) result = "aw"
            if(pastHomeFixture[0].hScore < pastHomeFixture[0].aScore) result = "hw"
            if(pastHomeFixture[0].hScore == pastHomeFixture[0].aScore) result = "d"

}


if (pastHomeFixture2018.length < 1 ){
              result18 = "promoted";
             var hScore = "-";
              var aScore = "-";
}else {
      
            if(pastHomeFixture2018[0].hScore > pastHomeFixture2018[0].aScore) {
              var hScore = pastHomeFixture2018[0].hScore;
              var aScore = pastHomeFixture2018[0].aScore;

             result18 = "aw";
           }
            if(pastHomeFixture2018[0].hScore < pastHomeFixture2018[0].aScore) {
              result18 = "hw";
               var hScore = pastHomeFixture2018[0].hScore;
              var aScore = pastHomeFixture2018[0].aScore;


            }
            if(pastHomeFixture2018[0].hScore == pastHomeFixture2018[0].aScore){ 
       
               var hScore = pastHomeFixture2018[0].hScore;
              var aScore = pastHomeFixture2018[0].aScore;
              result18 = "d"                  
          }
}

if (pastHomeFixture2018Home.length < 1 ){
              result18h = "promoted";
             var hScoreHome = "-";
              var aScoreHome = "-";
}else {


          
            if(pastHomeFixture2018Home[0].hScore < pastHomeFixture2018Home[0].aScore) {
              var hScoreHome = pastHomeFixture2018Home[0].hScore;
              var aScoreHome = pastHomeFixture2018Home[0].aScore;
   
             result18h = "aw";
           }
            if(pastHomeFixture2018Home[0].hScore > pastHomeFixture2018Home[0].aScore) {
              result18h = "hw";
               var hScoreHome = pastHomeFixture2018Home[0].hScore;
              var aScoreHome = pastHomeFixture2018Home[0].aScore;

            }
            if(pastHomeFixture2018Home[0].hScore == pastHomeFixture2018Home[0].aScore){ 

               var hScoreHome = pastHomeFixture2018Home[0].hScore;
              var aScoreHome = pastHomeFixture2018Home[0].aScore;
                    
              result18h = "d"
          }
}


function getValue () {
  //console.log(this.hScore)
  return this.hScore
}




            for (var j = 0; j < homeTable.length; j++) {





var matchStats = new Object;
var homeGameTotal = [];
var last6Home = [];

function determineResultHome (fixture, team, venue){

var resultObject = new Object;
if(!fixture) return;
//if(fixture === 'undefined') return;
 //console.log("Fixture",fixture)
resultObject.hName = fixture.hName
resultObject.aName = fixture.aName




if (team == fixture.hName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " home win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
scoreDiff = fixture.hScore - fixture.aScore;
resultObject.class = "homeWin";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore = fixture.aScore;
if(scoreDiff > 1) resultObject.class = "homeWinDiff2";
resultObject.type = "home"

if(homeGameTotal.length <6) homeGameTotal.push(resultObject);
last6Home.push(resultObject);

}

if (team == fixture.hName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " home loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeLoss";
resultObject.type = "home";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
scoreDiff = fixture.aScore - fixture.hScore;
//if(scoreDiff > 1) resultObject.class = "homeLossDiff2";
if(homeGameTotal.length <6) homeGameTotal.push(resultObject);
last6Home.push(resultObject);
}


if (team == fixture.aName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " Away Loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayLoss";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
last6Home.push(resultObject);
}

if (team == fixture.aName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " Away Win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
scoreDiff = fixture.aScore - fixture.hScore;
resultObject.class = "awayWin";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
last6Home.push(resultObject);

if(scoreDiff > 1) resultObject.class = "awayWinDiff2";
}

if (team == fixture.aName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + " away draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayDraw";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
last6Home.push(resultObject);
}

if (team == fixture.hName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + "home draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeDraw";
resultObject.type = "home";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
if(homeGameTotal.length <6) homeGameTotal.push(resultObject);
last6Home.push(resultObject);
}
//console.log("last6Home",last6Home);
if (fixture.hScore == "pp.") {

resultObject.lastGame = "pp.";
resultObject.class = "pp";

}


return resultObject
}

var awayGameTotal = [];
var last6Away = [];

function determineResultAway (fixture, team, venue){
  if(!fixture) return;
if(fixture === 'undefined') return;
var resultObject = new Object;
resultObject.hName = fixture.hName
resultObject.aName = fixture.aName



if (team == fixture.hName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " home win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeWin";
resultObject.type = "home";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
last6Away.push(resultObject);
}

if (team == fixture.hName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " home loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeLoss";
resultObject.type = "home";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
last6Away.push(resultObject);
}


if (team == fixture.aName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " Away Loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayLoss";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;

if(awayGameTotal.length <6) awayGameTotal.push(resultObject);
last6Away.push(resultObject);
}

if (team == fixture.aName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " Away Win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
scoreDiff = fixture.aScore - fixture.hScore;
resultObject.class = "awayWin";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;

if(scoreDiff > 1) resultObject.class = "awayWinDiff2";

if(awayGameTotal.length <6) awayGameTotal.push(resultObject);
last6Away.push(resultObject);
}

if (team == fixture.aName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + " away draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayDraw";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
if(awayGameTotal.length <6) awayGameTotal.push(resultObject);
last6Away.push(resultObject);
}

if (team == fixture.hName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + "home draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeDraw";
resultObject.type = "home";
resultObject.hName = fixture.hName;
resultObject.aName= fixture.aName;
resultObject.hScore = fixture.hScore;
resultObject.aScore= fixture.aScore;
last6Away.push(resultObject);

}
if (fixture.hScore == "pp.") {
//console.log(team + "home draw")

resultObject.lastGame = "pp.";
resultObject.class = "pp";
}




return resultObject
}

//console.log("homeTeamFixturesArray",homeTeamFixturesArray);
if (homeTeamFixturesArray[0].hName == homeTeam || homeTeamFixturesArray[0].aName == homeTeam)
{    
  matchResult = determineResultHome(homeTeamFixturesArray[0], homeTeam, "home");
  matchResult2 = determineResultHome(homeTeamFixturesArray[1], homeTeam, "home");
  matchResult3= determineResultHome(homeTeamFixturesArray[2], homeTeam, "home");
  matchResult4= determineResultHome(homeTeamFixturesArray[3], homeTeam, "home");
  matchResult5= determineResultHome(homeTeamFixturesArray[4], homeTeam, "home");  
  matchResult6= determineResultHome(homeTeamFixturesArray[5], homeTeam, "home");  
  matchResult7= determineResultHome(homeTeamFixturesArray[6], homeTeam, "home");  
  matchResult8= determineResultHome(homeTeamFixturesArray[7], homeTeam, "home"); 
  matchResult9= determineResultHome(homeTeamFixturesArray[8], homeTeam, "home"); 
  matchResult10= determineResultHome(homeTeamFixturesArray[9], homeTeam, "home");  
   
  matchResult11= determineResultHome(homeTeamFixturesArray[10], homeTeam, "home");  
  matchResult12= determineResultHome(homeTeamFixturesArray[11], homeTeam, "home"); 

  matchResult13= determineResultHome(homeTeamFixturesArray[12], homeTeam, "home"); 
  matchResult14= determineResultHome(homeTeamFixturesArray[13], homeTeam, "home"); 
       rowClassH = "nope";
   
   // console.log(matchResult.lastGame,matchResult2.lastGame,matchResult3.lastGame,matchResult4.lastGame,matchResult5.lastGame,matchResult6.lastGame,matchResult7.lastGame,matchResult8.lastGame,matchResult9.lastGame,matchResult10.lastGame)
          
}





if (awayTeamFixturesArray[0].hName == awayTeam || awayTeamFixturesArray[0].aName == awayTeam)
{ 

    matchResultAwayTeam = determineResultAway(awayTeamFixturesArray[0], awayTeam, "away");
    matchResultAwayTeam2 = determineResultAway(awayTeamFixturesArray[1], awayTeam, "away");
     matchResultAwayTeam3 = determineResultAway(awayTeamFixturesArray[2], awayTeam, "away");
     matchResultAwayTeam4 = determineResultAway(awayTeamFixturesArray[3], awayTeam, "away");
     matchResultAwayTeam5 = determineResultAway(awayTeamFixturesArray[4], awayTeam, "away");
     matchResultAwayTeam6 = determineResultAway(awayTeamFixturesArray[5], awayTeam, "away");
     matchResultAwayTeam7 = determineResultAway(awayTeamFixturesArray[6], awayTeam, "away");       
 matchResultAwayTeam8 = determineResultAway(awayTeamFixturesArray[7], awayTeam, "away");                         
 matchResultAwayTeam9 = determineResultAway(awayTeamFixturesArray[8], awayTeam, "away");  
 matchResultAwayTeam10 = determineResultAway(awayTeamFixturesArray[9], awayTeam, "away");  
  matchResultAwayTeam11 = determineResultAway(awayTeamFixturesArray[10], awayTeam, "away");  
   matchResultAwayTeam12 = determineResultAway(awayTeamFixturesArray[11], awayTeam, "away");
        matchResultAwayTeam13 = determineResultAway(awayTeamFixturesArray[12], awayTeam, "away");

                matchResultAwayTeam14 = determineResultAway(awayTeamFixturesArray[13], awayTeam, "away");
                
   rowClassA = "nope";
}




//fixtureDateNumber =  date.substring(4,6);
var dd = new Date();
displayClass = "show";
/*
if(parseInt(fixtureDateNumber) < d.getDate()) {
  displayClass = "hide";
}else {
  displayClass = "show";
}

if(parseInt(fixtureDateNumber) < 16) {
  displayClass = "hide";
}


if(parseInt(fixtureDateNumber) > 15) {
  displayClass = "show";
}

 
if(today == matchDate) {
  todaysGame = "matchday"

}else {
    todaysGame = ""
}
*/
/*
if(currentHours > hours) {
    displayClass = "hide";
}
*/

var homeDraw = 0;
for(p=0;p<homeGameTotal.length;p++) {
   if(homeGameTotal[p].class == "homeDraw"){
    homeDraw += 1;

   }    
}


  if(homeDraw == 0) rowClassH = "homeWin4"; 
  if(homeDraw == 1) rowClassH = "homeWin3"; 
  if(homeDraw == 2) rowClassH = "homeWin2";   



var awayDraw = 0;
for(p=0;p<awayGameTotal.length;p++) {
   if(awayGameTotal[p].class == "awayDraw"){
    awayDraw += 1;
   } 
  
}

   if(awayDraw == 0)  rowClassA = "homeWin4"; 
   if(awayDraw == 1)  rowClassA = "homeWin3"; 
   if(awayDraw == 2)  rowClassA = "homeWin2";    


var drawsOdds = "n/a";
for(f=0;f<oddsArray.length;f++){
   if(oddsArray[f].hName == homeTeam){  
       var drawsOdds = oddsArray[f].drawOdds;
     }
}




    if(matchResult.lastGame != "D" && matchResult2.lastGame != "D" && matchResult3.lastGame != "D" && matchResult4.lastGame != "D" && matchResult5.lastGame != "D" && matchResult6.lastGame != "D" && matchResult7.lastGame != "D" && matchResult8.lastGame != "D" && matchResult9.lastGame != "D" && matchResult10.lastGame != "D" ) {
     // console.log(homeTeam)
      rowClassH ="noDraws";
    }   



if (homeTable[j].name == homeTeam) {
markup = markup + '<tr id='+homeTable[j].name.split(' ').join('') +' class='+ displayClass +'><td>' + matchTime + '</td><td id=' + homeTable[j].name.split(' ').join('') + ' class=' + rowClassH + '>' + homeTable[j].name + '</td><td class="hm">';

for(z=0;z<homeGameTotal.length;z++){
markup = markup + '<div class='+homeGameTotal[z].class + ' id='+ homeGameTotal[z].opponent +'>'+ homeGameTotal[z].lastGame + '<span class=toolTip>' + homeGameTotal[z].score +'</span></div>'
}
markup = markup + '</td>';
homePoints = homeTable[j].points;
homeGoalsFor = homeTable[j].goalsF;
homeGoalsAgainst = homeTable[j].goalsA;
}
}

/*

if (homeTable[j].name == homeTeam) {
markup = markup + '<tr id='+homeTable[j].name.split(' ').join('') +' class='+ displayClass +'><td class='+ todaysGame +'>' + date + time + '</td><td id=' + homeTable[j].name.split(' ').join('') + ' class=' + rowClassH + '>' + homeTable[j].name + '</td><td class="hm"><div class='+matchResult.class + ' id='+ matchResult.opponent +'>'+ matchResult.lastGame + '<span class=toolTip>' + matchResult.score +'</span></div><div class='+matchResult2.class + ' id='+ matchResult2.opponent +'>'+ matchResult2.lastGame + '<span class=toolTip>' + matchResult2.score +'</span></div><div class='+matchResult3.class + ' id='+ matchResult3.opponent +'>'+ matchResult3.lastGame + '<span class=toolTip>' + matchResult3.score +'</span></div><div class='+matchResult4.class + ' id='+ matchResult4.opponent +'>'+ matchResult4.lastGame + '<span class=toolTip>' + matchResult4.score +'</span></div><div class='+matchResult5.class + ' id='+ matchResult5.opponent +'>'+ matchResult5.lastGame + '<span class=toolTip>' + matchResult5.score +'</span></div><div class='+matchResult6.class + ' id='+ matchResult6.opponent +'>'+ matchResult6.lastGame + '<span class=toolTip>' + matchResult6.score +'</span></div><div class='+matchResult7.class + ' id='+ matchResult7.opponent +'>'+ matchResult7.lastGame + '<span class=toolTip>' + matchResult7.score +'</span></div><div class='+matchResult8.class + ' id='+ matchResult8.opponent +'>'+ matchResult8.lastGame + '<span class=toolTip>' + matchResult8.score +'</span></div><div class='+matchResult9.class + ' id='+ matchResult9.opponent +'>'+ matchResult9.lastGame + '<span class=toolTip>' + matchResult9.score +'</span></div><div class='+matchResult10.class + ' id='+ matchResult10.opponent +'>'+ matchResult10.lastGame + '<span class=toolTip>' + matchResult10.score +'</span></div><div class='+matchResult11.class + ' id='+ matchResult11.opponent +'>'+ matchResult11.lastGame + '<span class=toolTip>' + matchResult11.score +'</span></div><div class='+matchResult12.class + ' id='+ matchResult12.opponent +'>'+ matchResult12.lastGame + '<span class=toolTip>' + matchResult12.score +'</span></div><div class='+matchResult13.class + ' id='+ matchResult13.opponent +'>'+ matchResult13.lastGame + '<span class=toolTip>' + matchResult13.score +'</span></div></td>';
// console.log(homeTable[j].name)
homePoints = homeTable[j].points;
homeGoalsFor = homeTable[j].goalsF;
homeGoalsAgainst = homeTable[j].goalsA;
}
} //
*/

sixGameMarkup = '<tr id="grid"><td></td><td colspan=10><div style=display:flex;>';

sixGameMarkup = sixGameMarkup + '<table id="last6Home" class='+homeTeam.split(' ').join('')+' style="width: 100%; margin-right: 20px;"><tr><th colspan=4>' + homeTeam +' last 6 home </th></tr>';
for (h=0; h<homeGameTotal.length; h++) {

sixGameMarkup = sixGameMarkup + '<tr id='+ h + ' class='+ homeGameTotal[h].class + '><td style="width: 43%;" id='+homeGameTotal[h].hName.split(' ').join('')  +'>' +  homeGameTotal[h].hName + '</td><td class="score">' + homeGameTotal[h].hScore + '</td><td  class="score">' +  homeGameTotal[h].aScore  + '</td><td class="oppo" style="width: 43%;" id='+homeGameTotal[h].opponent  +'>' + homeGameTotal[h].aName + '</td><td class="poissonPrediction"></td></tr>';
}
sixGameMarkup = sixGameMarkup + '</table>';

sixGameMarkup = sixGameMarkup + '<table  id="last6AwayTable" class='+awayTeam.split(' ').join('')+'  style="width: 100%;"><tr><th colspan=4>' + awayTeam +' last 6 away </th></tr>';
for (h=0; h<awayGameTotal.length; h++) {
sixGameMarkup = sixGameMarkup + '<tr id='+ h + '  class='+ awayGameTotal[h].class + '><td style="width: 43%;" id='+awayGameTotal[h].hName.split(' ').join('')  +' class="oppo">' +  awayGameTotal[h].hName + '</td><td class="score">' + awayGameTotal[h].hScore + '</td><td class="score">' +  awayGameTotal[h].aScore  + '</td><td style="width: 43%;" id='+awayGameTotal[h].aName.split(' ').join('') +'>' + awayGameTotal[h].aName + '</td><td class="poissonPrediction"></td></tr>';
}
sixGameMarkup = sixGameMarkup + '</table></div><div style=display:flex;>';

  sixGameMarkup = sixGameMarkup + '<table id="last6GamesHometeam" class='+homeTeam.split(' ').join('')+' style="margin-top: 20px;width: 100%;margin-right: 20px;"><tr><th colspan=4>' + homeTeam +' last 6 games </th></tr>';
for (h=0; h<6; h++) {
sixGameMarkup = sixGameMarkup + '<tr id='+ h + ' class='+ last6Home[h].class + '><td style="width: 43%;" id='+last6Home[h].hName.split(' ').join('') +'>' +  last6Home[h].hName + '</td><td class="score">' + last6Home[h].hScore + '</td><td class="score">' +  last6Home[h].aScore  + '</td><td style="width: 43%;" id='+last6Home[h].aName.split(' ').join('') +'>' + last6Home[h].aName + '</td></tr>';
}
sixGameMarkup = sixGameMarkup + '</table>';



sixGameMarkup = sixGameMarkup + '<table id="last6GamesAwayteam" class='+awayTeam.split(' ').join('')+'  style="margin-top: 20px;width: 100%;"><tr><th colspan=4>' + awayTeam +' last 6 games </th></tr>';
for (h=0; h<6; h++) {
sixGameMarkup = sixGameMarkup + '<tr id='+ h + ' class='+ last6Away[h].class + '><td style="width: 43%;" id='+last6Away[h].hName.split(' ').join('') +'>' +  last6Away[h].hName + '</td><td class="score">' + last6Away[h].hScore + '</td><td class="score">' +  last6Away[h].aScore  + '</td><td class="oppo" style="width: 43%;" id='+last6Away[h].aName.split(' ').join('') +'>' + last6Away[h].aName + '</td></tr>';
}
sixGameMarkup = sixGameMarkup + '</table></div><div class="poissonScoresTable"></div><canvas class="myChart"></canvas><canvas class="myChart2"></canvas><canvas class="myChart3"></canvas><canvas class="myChart4"></canvas><div class="pastResults" style="display: flex"><div class="container1"><div class="results2"></div></div><div class="container2"><div class="results1"></div></div><div class="container3"><div class="results3"></div></div><div class="container"><div class="average"></div></div>';







            for (var j = 0; j < awayTable.length; j++) {
            if (awayTable[j].name == awayTeam) {
            //console.log(awayTable[j].name)
            awayPoints = awayTable[j].points;
            ptsDiff = homePoints - awayPoints;
            awayGoalsFor = awayTable[j].goalsF;
            awayGoalsAgainst = awayTable[j].goalsA;
            goalsForDelta = homeGoalsFor - awayGoalsFor;
            goalsAgainstDelta = awayGoalsAgainst - homeGoalsAgainst;
            // console.log(awayGoalsFor);

//<div class='+awayMatchResult.class + ' id='+ awayMatchResult.opponent +'>'+ awayMatchResult.lastGame + '<span class=toolTip>' + awayMatchResult.score +'</span>' + '</div><div class='+awayMatchResult2.class +' id='+ awayMatchResult2.opponent +'>'+ awayMatchResult2.lastGame + '<span class=toolTip>' + awayMatchResult2.score +'</span>' + '</div>' + '<div class='+awayMatchResult3.class +' id='+ awayMatchResult3.opponent +'>'+ awayMatchResult3.lastGame + '<span class=toolTip>' + awayMatchResult3.score +'</span>' + '</div><td>' + ptsDiff + '</td><td>' + goalsForDelta + '</td>
 if(matchResultAwayTeam.lastGame != "D" && matchResultAwayTeam2.lastGame != "D" && matchResultAwayTeam3.lastGame != "D" && matchResultAwayTeam4.lastGame != "D" && matchResultAwayTeam5.lastGame != "D" && matchResultAwayTeam6.lastGame != "D" && matchResultAwayTeam7.lastGame != "D" && matchResultAwayTeam8.lastGame != "D" && matchResultAwayTeam9.lastGame != "D" && matchResultAwayTeam10.lastGame != "D" ) {
 
        
      rowClassA ="noDraws";
    }  




if(typeof pastHomeFixture[0] === 'undefined') {
//console.log("undefined")

       //markup = markup + '<td id=' + awayTable[j].name.split(' ').join('') + ' class=' + rowClassA + '>' + awayTable[j].name + '</td><td class="am"><div class='+matchResultAwayTeam.class + ' id='+ matchResultAwayTeam.opponent +'>'+ matchResultAwayTeam.lastGame + '<span class=toolTip>' + matchResultAwayTeam.score +'</span>' + '</div><div class='+matchResultAwayTeam2.class +' id='+ matchResultAwayTeam2.opponent +'>'+ matchResultAwayTeam2.lastGame + '<span class=toolTip>' + matchResultAwayTeam2.score +'</span>' + '</div><div class='+matchResultAwayTeam3.class +' id='+ matchResultAwayTeam3.opponent +'>'+ matchResultAwayTeam3.lastGame + '<span class=toolTip>' + matchResultAwayTeam3.score +'</span></div><div class='+matchResultAwayTeam4.class +' id='+ matchResultAwayTeam4.opponent +'>'+ matchResultAwayTeam4.lastGame + '<span class=toolTip>' + matchResultAwayTeam4.score +'</span></div><div class='+matchResultAwayTeam5.class +' id='+ matchResultAwayTeam5.opponent +'>'+ matchResultAwayTeam5.lastGame + '<span class=toolTip>' + matchResultAwayTeam5.score +'</span></div><div class='+matchResultAwayTeam6.class +' id='+ matchResultAwayTeam6.opponent +'>'+ matchResultAwayTeam6.lastGame + '<span class=toolTip>' + matchResultAwayTeam6.score +'</span></div><div class='+matchResultAwayTeam7.class +' id='+ matchResultAwayTeam7.opponent +'>'+ matchResultAwayTeam7.lastGame + '<span class=toolTip>' + matchResultAwayTeam7.score +'</span></div><div class='+matchResultAwayTeam8.class +' id='+ matchResultAwayTeam8.opponent +'>'+ matchResultAwayTeam8.lastGame + '<span class=toolTip>' + matchResultAwayTeam8.score +'</span></div><div class='+matchResultAwayTeam9.class +' id='+ matchResultAwayTeam9.opponent +'>'+ matchResultAwayTeam9.lastGame + '<span class=toolTip>' + matchResultAwayTeam9.score +'</span></div><div class='+matchResultAwayTeam10.class +' id='+ matchResultAwayTeam10.opponent +'>'+ matchResultAwayTeam10.lastGame + '<span class=toolTip>' + matchResultAwayTeam10.score +'</span></div></div><div class='+matchResultAwayTeam11.class +' id='+ matchResultAwayTeam11.opponent +'>'+ matchResultAwayTeam11.lastGame + '<span class=toolTip>' + matchResultAwayTeam11.score +'</span></div></div><div class='+matchResultAwayTeam12.class +' id='+ matchResultAwayTeam12.opponent +'>'+ matchResultAwayTeam12.lastGame + '<span class=toolTip>' + matchResultAwayTeam12.score +'</span></div><div class='+matchResultAwayTeam13.class +' id='+ matchResultAwayTeam13.opponent +'>'+ matchResultAwayTeam13.lastGame + '<span class=toolTip>' + matchResultAwayTeam13.score +'</span></div></td><td>' + ptsDiff + '</td><td>' + goalsForDelta + '</td><td>' + goalsAgainstDelta + '</td><td class=' + result + '>n/a</td><td class=' + result18h + '>'+ hScoreHome + " " + aScoreHome +'</td><td class=' + result18 + '>'+ aScore + " " + hScore +'</td><td>1</td></tr>';
      
      if(!matchResultAwayTeam13) {
        console.log("In undefined IF");
        matchResultAwayTeam13 = new Object();
        matchResultAwayTeam13.class = "";
      matchResultAwayTeam13.opponent  = "";
       matchResultAwayTeam13.lastGame  = "";
        matchResultAwayTeam13.score  = "";
       }
      // console.log("matchResultAwayTeam13",matchResultAwayTeam13)
       markup = markup + '<td id=' + awayTable[j].name.split(' ').join('') + ' class=' + rowClassA + '>' + awayTable[j].name + '</td><td class="am"><div class='+matchResultAwayTeam.class + ' id='+ matchResultAwayTeam.opponent +'>'+ matchResultAwayTeam.lastGame + '<span class=toolTip>' + matchResultAwayTeam.score +'</span>' + '</div><div class='+matchResultAwayTeam2.class +' id='+ matchResultAwayTeam2.opponent +'>'+ matchResultAwayTeam2.lastGame + '<span class=toolTip>' + matchResultAwayTeam2.score +'</span>' + '</div><div class='+matchResultAwayTeam3.class +' id='+ matchResultAwayTeam3.opponent +'>'+ matchResultAwayTeam3.lastGame + '<span class=toolTip>' + matchResultAwayTeam3.score +'</span></div><div class='+matchResultAwayTeam4.class +' id='+ matchResultAwayTeam4.opponent +'>'+ matchResultAwayTeam4.lastGame + '<span class=toolTip>' + matchResultAwayTeam4.score +'</span></div><div class='+matchResultAwayTeam5.class +' id='+ matchResultAwayTeam5.opponent +'>'+ matchResultAwayTeam5.lastGame + '<span class=toolTip>' + matchResultAwayTeam5.score +'</span></div><div class='+matchResultAwayTeam6.class +' id='+ matchResultAwayTeam6.opponent +'>'+ matchResultAwayTeam6.lastGame + '<span class=toolTip>' + matchResultAwayTeam6.score +'</span></div><div class='+matchResultAwayTeam7.class +' id='+ matchResultAwayTeam7.opponent +'>'+ matchResultAwayTeam7.lastGame + '<span class=toolTip>' + matchResultAwayTeam7.score +'</span></div><div class='+matchResultAwayTeam8.class +' id='+ matchResultAwayTeam8.opponent +'>'+ matchResultAwayTeam8.lastGame + '<span class=toolTip>' + matchResultAwayTeam8.score +'</span></div><div class='+matchResultAwayTeam9.class +' id='+ matchResultAwayTeam9.opponent +'>'+ matchResultAwayTeam9.lastGame + '<span class=toolTip>' + matchResultAwayTeam9.score +'</span></div><div class='+matchResultAwayTeam10.class +' id='+ matchResultAwayTeam10.opponent +'>'+ matchResultAwayTeam10.lastGame + '<span class=toolTip>' + matchResultAwayTeam10.score +'</span></div></div><div class='+matchResultAwayTeam11.class +' id='+ matchResultAwayTeam11.opponent +'>'+ matchResultAwayTeam11.lastGame + '<span class=toolTip>' + matchResultAwayTeam11.score +'</span></div></div><div class='+matchResultAwayTeam12.class +' id='+ matchResultAwayTeam12.opponent +'>'+ matchResultAwayTeam12.lastGame + '<span class=toolTip>' + matchResultAwayTeam12.score +'</span></div><div class='+matchResultAwayTeam13.class +' id='+ matchResultAwayTeam13.opponent +'>'+ matchResultAwayTeam13.lastGame + '<span class=toolTip>' + matchResultAwayTeam13.score +'</span></div></td><td class="poissonHomeWin"></td><td class="poissonDraw"></td><td class="poissonAwayWin"></td><td class=' + result + '>n/a</td><td class=' + result18h + '>'+ hScoreHome + " " + aScoreHome +'</td><td class=' + result18 + '>'+ aScore + " " + hScore +'</td><td><button class="save">Save</button></td>' + sixGameMarkup;
  }else{
    console.log("defined")

     markup = markup + '<td id=' + awayTable[j].name.split(' ').join('') + ' class=' + rowClassA + '>' + awayTable[j].name + '</td><td class="am">';

for(z=0;z<awayGameTotal.length;z++){
markup = markup + '<div class='+awayGameTotal[z].class + ' id='+ awayGameTotal[z].opponent +'>'+ awayGameTotal[z].lastGame + '<span class=toolTip>' + awayGameTotal[z].score +'</span></div>'
}
markup = markup + '</td><td>' + ptsDiff + '</td><td>' + goalsForDelta + '</td><td>' + goalsAgainstDelta + '</td><td class=' + result + '>'+ pastHomeFixture[0].aScore + " " + pastHomeFixture[0].hScore +'</td><td class=' + result18h + '>'+ hScoreHome + " " + aScoreHome +'</td><td class=' + result18 + '>'+ aScore + " " + hScore +'</td><td><button class="save">Save</button></td>' + sixGameMarkup;
//console.log("sixGameMarkup 2",sixGameMarkup);

}


/*
     markup = markup + '<td id=' + awayTable[j].name.split(' ').join('') + ' class=' + rowClassA + '>' + awayTable[j].name + '</td><td class="am"><div class='+matchResultAwayTeam.class + ' id='+ matchResultAwayTeam.opponent +'>'+ matchResultAwayTeam.lastGame + '<span class=toolTip>' + matchResultAwayTeam.score +'</span>' + '</div><div class='+matchResultAwayTeam2.class +' id='+ matchResultAwayTeam2.opponent +'>'+ matchResultAwayTeam2.lastGame + '<span class=toolTip>' + matchResultAwayTeam2.score +'</span></div><div class='+matchResultAwayTeam3.class +' id='+ matchResultAwayTeam3.opponent +'>'+ matchResultAwayTeam3.lastGame + '<span class=toolTip>' + matchResultAwayTeam3.score +'</span>' + '</div><div class='+matchResultAwayTeam4.class +' id='+ matchResultAwayTeam4.opponent +'>'+ matchResultAwayTeam4.lastGame + '<span class=toolTip>' + matchResultAwayTeam4.score +'</span></div><div class='+matchResultAwayTeam5.class +' id='+ matchResultAwayTeam5.opponent +'>'+ matchResultAwayTeam5.lastGame + '<span class=toolTip>' + matchResultAwayTeam5.score +'</span></div><div class='+matchResultAwayTeam6.class +' id='+ matchResultAwayTeam6.opponent +'>'+ matchResultAwayTeam6.lastGame + '<span class=toolTip>' + matchResultAwayTeam6.score +'</span></div><div class='+matchResultAwayTeam7.class +' id='+ matchResultAwayTeam7.opponent +'>'+ matchResultAwayTeam7.lastGame + '<span class=toolTip>' + matchResultAwayTeam7.score +'</span></div><div class='+matchResultAwayTeam8.class +' id='+ matchResultAwayTeam8.opponent +'>'+ matchResultAwayTeam8.lastGame + '<span class=toolTip>' + matchResultAwayTeam8.score +'</span></div><div class='+matchResultAwayTeam9.class +' id='+ matchResultAwayTeam9.opponent +'>'+ matchResultAwayTeam9.lastGame + '<span class=toolTip>' + matchResultAwayTeam9.score +'</span></div><div class='+matchResultAwayTeam10.class +' id='+ matchResultAwayTeam10.opponent +'>'+ matchResultAwayTeam10.lastGame + '<span class=toolTip>' + matchResultAwayTeam10.score +'</span></div></div><div class='+matchResultAwayTeam11.class +' id='+ matchResultAwayTeam11.opponent +'>'+ matchResultAwayTeam11.lastGame + '<span class=toolTip>' + matchResultAwayTeam11.score +'</span></div></div><div class='+matchResultAwayTeam12.class +' id='+ matchResultAwayTeam12.opponent +'>'+ matchResultAwayTeam12.lastGame + '<span class=toolTip>' + matchResultAwayTeam12.score +'</span></div><div class='+matchResultAwayTeam13.class +' id='+ matchResultAwayTeam13.opponent +'>'+ matchResultAwayTeam13.lastGame + '<span class=toolTip>' + matchResultAwayTeam13.score +'</span></div><td>' + ptsDiff + '</td><td>' + goalsForDelta + '</td><td>' + goalsAgainstDelta + '</td><td class=' + result + '>'+ pastHomeFixture[0].aScore + " " + pastHomeFixture[0].hScore +'</td><td class=' + result18h + '>'+ hScoreHome + " " + aScoreHome +'</td><td class=' + result18 + '>'+ aScore + " " + hScore +'</td>' + sixGameMarkup;


  }

       
*/



            }
            } //

       
            document.getElementById('fixturesTable').innerHTML = markup;

            }




            var fixTable = document.getElementById('fixturesTable');
            var fixTableTRs = fixTable.getElementsByClassName("show");

            var fixTableDiv = fixTable.getElementsByTagName("div");    
            var leagueTable = document.getElementById('leagueTable');
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");

            var last6HomeTable = document.getElementById('last6Home');
            //console.log("document.getElementById('last6Home')",document.getElementById('last6Home'));
            var last6HomeTableTRs = last6HomeTable.getElementsByTagName("tr");

            var last6AwayTable = document.getElementById('last6AwayTable');
            var last6AwayTableTRs = last6AwayTable.getElementsByTagName("tr");




// Clone












       

        for (var j = 0; j < fixTableDiv.length; j++) {
              fixTableDiv[j].addEventListener("mouseover", function(e) {   
            for (var p = 0; p < leagueTableTRs.length; p++) {

            if (leagueTableTRs[p].id == e.currentTarget.id) {
            
            leagueTableTRs[p].style.backgroundColor = "red";
            } 
            }
        })
            };


        for (var j = 0; j < fixTableDiv.length; j++) {
              fixTableDiv[j].addEventListener("mouseout", function(e) {              

            var leagueTable = document.getElementById('leagueTable');
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");

            //console.log(e.currentTarget.childNodes[1].id + " " + e.currentTarget.childNodes[3].id)
            for (var p = 0; p < leagueTableTRs.length; p++) {

            if (leagueTableTRs[p].id == e.currentTarget.id) {
            leagueTableTRs[p].style.backgroundColor = "white";
            } 
            }
        })
            };




            for (var j = 0; j < fixTableTRs.length; j++) {  
            fixTableTRs[j].addEventListener("mouseover", function(e) {
 

            var homeDrawTable = document.getElementById('homeDrawTable');
            var awayDrawTable = document.getElementById('awayDrawTable');
            var leagueTable = document.getElementById('leagueTable');

            e.currentTarget.childNodes[1].style.backgroundColor = "lightgreen"
            e.currentTarget.childNodes[2].style.backgroundColor = "lightgreen"
            e.currentTarget.childNodes[3].style.backgroundColor = "pink"
            e.currentTarget.childNodes[4].style.backgroundColor = "pink"

            var homeDrawTableTRs = homeDrawTable.getElementsByClassName("team");
            var awayDrawTableTRs = awayDrawTable.getElementsByClassName("team");
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");

            //console.log(e.currentTarget.childNodes[1].id + " " + e.currentTarget.childNodes[3].id)
            //console.log(leagueTableTRs.length)
            // console.log(homeDrawTableTRs.length)
            for (var p = 0; p < homeDrawTableTRs.length; p++) {


       
            if (homeDrawTableTRs[p].id == e.currentTarget.childNodes[1].id) {

            homeDrawTableTRs[p].style.backgroundColor = "lightgreen";
            }
            if (awayDrawTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            awayDrawTableTRs[p].style.backgroundColor = "pink";

            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[1].id) {
                   
           leagueTableTRs[p].style.backgroundColor = "lightgreen";
            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            leagueTableTRs[p].style.backgroundColor = "pink";
            }


            }
            })




            fixTableTRs[j].addEventListener("mouseout", function(e) {



            var homeDrawTable = document.getElementById('homeDrawTable');
            var awayDrawTable = document.getElementById('awayDrawTable');
            var leagueTable = document.getElementById('leagueTable');

            var homeDrawTableTRs = homeDrawTable.getElementsByClassName("team");
            var awayDrawTableTRs = awayDrawTable.getElementsByClassName("team");
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");


            e.currentTarget.childNodes[1].style.backgroundColor = "white"
            e.currentTarget.childNodes[2].style.backgroundColor = "white"
            e.currentTarget.childNodes[3].style.backgroundColor = "white"
            e.currentTarget.childNodes[4].style.backgroundColor = "white"

            for (var p = 0; p < homeDrawTableTRs.length; p++) {

             

            if (homeDrawTableTRs[p].id == e.currentTarget.childNodes[1].id) {
            homeDrawTableTRs[p].style.backgroundColor = "white";
            }
            if (awayDrawTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            awayDrawTableTRs[p].style.backgroundColor = "white";
            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[1].id) {
            leagueTableTRs[p].style.backgroundColor = "white";
            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            leagueTableTRs[p].style.backgroundColor = "white";
            }
            }
            })
 }
 //

 var leagueTable = [];
 homeTable.sort(function(a, b) {
  if (a.name < b.name) return -1;
  if (a.name > b.name) return 1;

 });
 awayTable.sort(function(a, b) {
  if (a.name < b.name) return -1;
  if (a.name > b.name) return 1;

 });
 for (var i = 0; i < awayTable.length; i++) {
  var team = new Object();
  var winPoints = (parseInt(homeTable[i].wins) + parseInt(awayTable[i].wins)) * 3;
  //console.log(homeTable[i].wins + " " + homeTable[i].name + " " + awayTable[i].name + awayTable[i].wins);
  var drawPoints = parseInt(homeTable[i].draws) + parseInt(awayTable[i].draws);
  team.name = awayTable[i].name;
  team.points = winPoints + drawPoints;
  leagueTable.push(team);

 }

 leagueTable.sort(function(a, b) {
  if (a.points > b.points) return -1;
  if (a.points < b.points) return 1;
 });
 //leagueTable
pointsMarkup = "";
totalPoints = 0
for (var i = 0; i < leagueTable.length; i++) {
  totalPoints += leagueTable[i].points;
 }

 var pointsPerGame = totalPoints / 100;

 for (var i = 0; i < leagueTable.length; i++) {
  var pointsMarkup = pointsMarkup + '<tr id=' + leagueTable[i].name.split(' ').join('') + '><td><span class="fixtureNumber"></span>' + leagueTable[i].name + '<td>' + leagueTable[i].points + '</td></tr>';

 }

 document.getElementById('leagueTable').innerHTML = pointsMarkup;
 document.getElementById('leagueTable2').innerHTML = pointsMarkup;


 homeDrawTableTrs = document.getElementById('homeDrawTable').getElementsByTagName("tr");
 awayDrawTableTrs = document.getElementById('awayDrawTable').getElementsByTagName("tr");

 var leagueTRsTest =  document.getElementById('homeDrawTable').getElementsByTagName("tr");
var topPoints = leagueTRsTest[0].lastChild.textContent;
 var bottomPoints = leagueTRsTest[leagueTRsTest.length - 1].lastChild.textContent;
//console.log("topPoints",topPoints,"bottomPoints",bottomPoints);

var pointsDifference = (topPoints - bottomPoints)/10;

/*
var pointsGiven = 0;
relativeStrengthTable = [];

for (var j = 0; j < homeDrawTableTrs.length; j++) {
    homeTableTeam = new Object();
    homeTableTeam.name =  homeDrawTableTrs[j].firstChild.textContent;
    homeTableTeam.pointsGiven = 0;
    homeTableTeam.wins = 0;
    homeTableTeam.draws = 0;
    homeTableTeam.losses = 0;
   const homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.hName == homeDrawTableTrs[j].firstChild.textContent});
   homeTeamFixturesArrayTest.reverse();
 // console.log("homeTableTeam.name",homeTableTeam.name);
  for (var i = 0; i < 6; i++) {   
    //for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {    
    matchResult = determineResultHome(homeTeamFixturesArrayTest[i], homeDrawTableTrs[j].firstChild.textContent, "home");    
    console.log("Match result object",matchResult)
        for (var h = 0; h < homeDrawTableTrs.length; h++) {
          console.log("homeDrawTableTrs[h].firstChild.textContent",matchResult,homeDrawTableTrs[h].firstChild.textContent)
            if(homeDrawTableTrs[h].firstChild.textContent == matchResult.aName) {
              if(matchResult.lastGame == "W") {
               // console.log(matchResult);
                  ratio = homeDrawTableTrs[h].lastChild.textContent * pointsDifference;
                  homeTableTeam.pointsGiven = homeTableTeam.pointsGiven + (30/100)*ratio;
                  homeTableTeam.wins += 1;
              }  
              if(matchResult.lastGame == "D") {
                //console.log(matchResult);
                  ratio = homeDrawTableTrs[h].lastChild.textContent * pointsDifference;
                  homeTableTeam.pointsGiven = homeTableTeam.pointsGiven + (10/100)*ratio;
                  homeTableTeam.draws += 1;
              }  
              if(matchResult.lastGame == "L") {
               // console.log(matchResult);
                  ratio = homeDrawTableTrs[h].lastChild.textContent * pointsDifference;
                 // homeTableTeam.pointsGiven = homeTableTeam.pointsGiven - (30-(30/100)*ratio);
                  homeTableTeam.losses += 1;
              }        
            }
        }
}
(homeTableTeam.pointsGiven).toFixed(2);
parseFloat(homeTableTeam.pointsGiven);
  relativeStrengthTable.push(homeTableTeam);
}

relativeStrengthTable.sort(function(a, b) {
  //if (a.drawPercent < b.drawPercent) return -1;
  //if (a.drawPercent > b.drawPercent) return 1;
  if (a.pointsGiven < b.pointsGiven) return 1;
  if (a.pointsGiven > b.pointsGiven) return -1;
 });

//console.log("relativeStrengthTable",relativeStrengthTable)


*/



//Poisson 









//console.log("seasonGoalsFor",seasonGoalsFor);
//console.log("seasonGoalsAgainst",seasonGoalsAgainst);
//console.log("seasonFixtures",seasonFixtures)
//console.log("Load after seasonFixtures")


function getSeasonAverageGoalsHome(fixtureArray) {
  var seasonGoalsFor = 0;
  let totalGames = 0;
  for (var s = 0; s < fixtureArray.length; s++) {
      if(fixtureArray[s].hScore && fixtureArray[s].hScore!== "pp.") {
    // console.log("fixtureArray[s].hScore",fixtureArray[s].hScore);
      seasonGoalsFor += parseInt(fixtureArray[s].hScore);
      totalGames+= 1;
       } 
      }
  return seasonGoalsFor / totalGames;
}



function getSeasonAverageGoalsAway(fixtureArray) {
  var seasonGoalsAgainst = 0;
  let totalGames = 0;
  for (var s = 0; s < fixtureArray.length; s++) {
    if(fixtureArray[s].aScore && fixtureArray[s].aScore!== "pp.") {
      seasonGoalsAgainst += parseInt(fixtureArray[s].aScore);
      //console.log("fixtureArray[s].aScore",fixtureArray[s].aScore)
      totalGames+= 1;
    } 
  }
  return seasonGoalsAgainst / totalGames;

}
const leagueAverageHomeGoalsScored = getSeasonAverageGoalsHome(seasonFixtures);
const leagueAverageAwayGoalsScored = getSeasonAverageGoalsAway(seasonFixtures);

//console.log("leagueAverageHomeGoalsScored",leagueAverageHomeGoalsScored);
//console.log("leagueAverageAwayGoalsScored",leagueAverageAwayGoalsScored);


function calcAttackDefenceTable(teamsArrayTrs,venue) {
 poissonTableArray = [];
 
for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j].firstChild.textContent;
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.hName == teamsArrayTrs[j].firstChild.textContent});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.aName == teamsArrayTrs[j].firstChild.textContent});
    }








for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
//if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5 * (i / homeTeamFixturesArrayTest.length);  
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
             

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



    

    
  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}













function calcAttackDefenceTablePastSeasons(teamsArrayTrs,venue,fixtureArray) {
 poissonTableArray = [];
 
for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j];
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  fixtureArray.filter(function(team) { return team.hName == teamsArrayTrs[j]});
    } else {
       homeTeamFixturesArrayTest =  fixtureArray.filter(function(team) { return team.aName == teamsArrayTrs[j]});
    }








for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
//if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5 * (i / homeTeamFixturesArrayTest.length);  
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
             

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



    

    
  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}





function calcAttackDefenceTable2111111(teamsArrayTrs,venue) {
 poissonTableArray = [];
 
for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j];
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures3.filter(function(team) { return team.hName == teamsArrayTrs[j]});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures3.filter(function(team) { return team.aName == teamsArrayTrs[j]});
    }








for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
//if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5 * (i / homeTeamFixturesArrayTest.length);  
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
             

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



    

    
  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}



function calcAttackDefenceTable2000000(teamsArrayTrs,venue) {
 poissonTableArray = [];
 
for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j];
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures4.filter(function(team) { return team.hName == teamsArrayTrs[j]});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures4.filter(function(team) { return team.aName == teamsArrayTrs[j]});
    }








for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
//if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5 * (i / homeTeamFixturesArrayTest.length);  
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
             

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



    

    
  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}




function calcAttackDefenceTable2016(teamsArrayTrs,venue) {
 poissonTableArray = [];
 
for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j];
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures5.filter(function(team) { return team.hName == teamsArrayTrs[j]});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures5.filter(function(team) { return team.aName == teamsArrayTrs[j]});
    }








for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
//if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5 * (i / homeTeamFixturesArrayTest.length);  
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
             

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



    

    
  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}


function calcAttackDefenceTable2015(teamsArrayTrs,venue) {
 poissonTableArray = [];
 
for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j];
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures6.filter(function(team) { return team.hName == teamsArrayTrs[j]});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures6.filter(function(team) { return team.aName == teamsArrayTrs[j]});
    }








for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
//if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5 * (i / homeTeamFixturesArrayTest.length);  
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
             

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



    

    
  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}


/*
poissonTableArray2021.sort(function(a, b) {
    return b.AttackAndDefence -a.AttackAndDefence;
 });

 poissonTableArray2021Away.sort(function(a, b) {
    return b.AttackAndDefence -a.AttackAndDefence;
 });
 
*/







poissonTableHome = calcAttackDefenceTable(homeDrawTableTrs, "home")
poissonTableAway = calcAttackDefenceTable(homeDrawTableTrs, "away")


poissonTableHome2 = calcAttackDefenceTableAgain(homeDrawTableTrs, "home",poissonTableAway);
poissonTableAway2 = calcAttackDefenceTableAgain(homeDrawTableTrs, "away",poissonTableHome);



poissonTableHome6 = calcAttackDefenceTableAgain(homeDrawTableTrs, "home",poissonTableAway,6);
poissonTableAway6 = calcAttackDefenceTableAgain(homeDrawTableTrs, "away",poissonTableHome,6);

// 2021


//poissonTableArray2021Home = calcAttackDefenceTable22222(league2021,"home");
//poissonTableArray2021Away = calcAttackDefenceTable22222(lastYearsTeamTable,"away");



// Poissons for past seasons



poissonTableArray21Home =  calcAttackDefenceTablePastSeasons(league21,"home",seasonFixtures21);
poissonTableArray21Away =  calcAttackDefenceTablePastSeasons(league21,"away",seasonFixtures21);

poissonTableHome21 = calcAttackDefenceTableAgainPastFixtures(league21,"home",poissonTableArray21Away,seasonFixtures21)
poissonTableAway21 = calcAttackDefenceTableAgainPastFixtures(league21,"away",poissonTableArray21Home,seasonFixtures21)


poissonTableArrayHome20 =  calcAttackDefenceTablePastSeasons(league,"home",seasonFixtures20);
poissonTableArrayAway20 =  calcAttackDefenceTablePastSeasons(league,"away",seasonFixtures20);
poissonTableHome20 = calcAttackDefenceTableAgainPastFixtures(league,"home",poissonTableArrayAway20,seasonFixtures20)
poissonTableAway20 = calcAttackDefenceTableAgainPastFixtures(league,"away",poissonTableArrayHome20,seasonFixtures20)


poissonTableArray19Home =  calcAttackDefenceTablePastSeasons(league19,"home",seasonFixtures19);
poissonTableArray19Away =  calcAttackDefenceTablePastSeasons(league19,"away",seasonFixtures19);
poissonTableHome19 = calcAttackDefenceTableAgainPastFixtures(league19,"home",poissonTableArray19Away,seasonFixtures19)
poissonTableAway19 = calcAttackDefenceTableAgainPastFixtures(league19,"away",poissonTableArray19Home,seasonFixtures19)


poissonTableArray18Home =  calcAttackDefenceTablePastSeasons(league18,"home",seasonFixtures18);
poissonTableArray18Away =  calcAttackDefenceTablePastSeasons(league18,"away",seasonFixtures18);

poissonTableHome18 = calcAttackDefenceTableAgainPastFixtures(league18,"home",poissonTableArray18Away,seasonFixtures18)
poissonTableAway18 = calcAttackDefenceTableAgainPastFixtures(league18,"away",poissonTableArray18Home,seasonFixtures18)


poissonTableArray17Home =  calcAttackDefenceTablePastSeasons(league17,"home",seasonFixtures17);
poissonTableArray17Away =  calcAttackDefenceTablePastSeasons(league17,"away",seasonFixtures17);
poissonTableHome17 = calcAttackDefenceTableAgainPastFixtures(league17,"home",poissonTableArray17Away,seasonFixtures17)
poissonTableAway17 = calcAttackDefenceTableAgainPastFixtures(league17,"away",poissonTableArray17Home,seasonFixtures17)


poissonTableArray16Home =  calcAttackDefenceTablePastSeasons(league16,"home",seasonFixtures16);
poissonTableArray16Away =  calcAttackDefenceTablePastSeasons(league16,"away",seasonFixtures16);
poissonTableHome16 = calcAttackDefenceTableAgainPastFixtures(league16,"home",poissonTableArray16Away,seasonFixtures16)
poissonTableAway16 = calcAttackDefenceTableAgainPastFixtures(league16,"away",poissonTableArray16Home,seasonFixtures16)


poissonTableArray15Home =  calcAttackDefenceTablePastSeasons(league15,"home",seasonFixtures15);
poissonTableArray15Away =  calcAttackDefenceTablePastSeasons(league15,"away",seasonFixtures15);
poissonTableHome15 = calcAttackDefenceTableAgainPastFixtures(league15,"home",poissonTableArray15Away,seasonFixtures15)
poissonTableAway15 = calcAttackDefenceTableAgainPastFixtures(league15,"away",poissonTableArray15Home,seasonFixtures15)


poissonTableArray14Home =  calcAttackDefenceTablePastSeasons(league14,"home",seasonFixtures14);
poissonTableArray14Away =  calcAttackDefenceTablePastSeasons(league14,"away",seasonFixtures14);
poissonTableHome14 = calcAttackDefenceTableAgainPastFixtures(league14,"home",poissonTableArray14Away,seasonFixtures14)
poissonTableAway14 = calcAttackDefenceTableAgainPastFixtures(league14,"away",poissonTableArray14Home,seasonFixtures14)

poissonTableArray13Home =  calcAttackDefenceTablePastSeasons(league13,"home",seasonFixtures13);
poissonTableArray13Away =  calcAttackDefenceTablePastSeasons(league13,"away",seasonFixtures13);
poissonTableHome13 = calcAttackDefenceTableAgainPastFixtures(league13,"home",poissonTableArray13Away,seasonFixtures13)
poissonTableAway13 = calcAttackDefenceTableAgainPastFixtures(league13,"away",poissonTableArray13Home,seasonFixtures13)

poissonTableArray12Home =  calcAttackDefenceTablePastSeasons(league12,"home",seasonFixtures12);
poissonTableArray12Away =  calcAttackDefenceTablePastSeasons(league12,"away",seasonFixtures12);
poissonTableHome12 = calcAttackDefenceTableAgainPastFixtures(league12,"home",poissonTableArray12Away,seasonFixtures12)
poissonTableAway12 = calcAttackDefenceTableAgainPastFixtures(league12,"away",poissonTableArray12Home,seasonFixtures12)

poissonTableArray11Home =  calcAttackDefenceTablePastSeasons(league11,"home",seasonFixtures11);
poissonTableArray11Away =  calcAttackDefenceTablePastSeasons(league11,"away",seasonFixtures11);
poissonTableHome11 = calcAttackDefenceTableAgainPastFixtures(league11,"home",poissonTableArray11Away,seasonFixtures11)
poissonTableAway11 = calcAttackDefenceTableAgainPastFixtures(league11,"away",poissonTableArray11Home,seasonFixtures11)

/*
poissonTableArray10Home =  calcAttackDefenceTablePastSeasons(league10,"home",seasonFixtures10);
poissonTableArray10Away =  calcAttackDefenceTablePastSeasons(league10,"away",seasonFixtures10);

poissonTableHome10 = calcAttackDefenceTableAgainPastFixtures(league10,"home",poissonTableArray10Away,seasonFixtures10)
poissonTableAway10 = calcAttackDefenceTableAgainPastFixtures(league10,"away",poissonTableArray10Home,seasonFixtures10)
*/







pta21Home =  calcAttackDefenceTablePastSeasons(l21,"home",fix21);
pta21Away =  calcAttackDefenceTablePastSeasons(l21,"away",fix21);
pth21 = calcAttackDefenceTableAgainPastFixtures(l21,"home",pta21Away,fix21)
pta21 = calcAttackDefenceTableAgainPastFixtures(l21,"away",pta21Home,fix21)


ptaHome20 =  calcAttackDefenceTablePastSeasons(l20,"home",fix20);
ptaAway20 =  calcAttackDefenceTablePastSeasons(l20,"away",fix20);
pth20 = calcAttackDefenceTableAgainPastFixtures(l20,"home",ptaAway20,fix20)
pta20 = calcAttackDefenceTableAgainPastFixtures(l20,"away",ptaHome20,fix20)


pta19Home =  calcAttackDefenceTablePastSeasons(l19,"home",fix19);
pta19Away =  calcAttackDefenceTablePastSeasons(l19,"away",fix19);
pth19 = calcAttackDefenceTableAgainPastFixtures(l19,"home",pta19Away,fix19)
pta19 = calcAttackDefenceTableAgainPastFixtures(l19,"away",pta19Home,fix19)


pta18Home =  calcAttackDefenceTablePastSeasons(l18,"home",fix18);
pta18Away =  calcAttackDefenceTablePastSeasons(l18,"away",fix18);
pth18 = calcAttackDefenceTableAgainPastFixtures(l18,"home",pta18Away,fix18)
pta18 = calcAttackDefenceTableAgainPastFixtures(l18,"away",pta18Home,fix18)


pta17Home =  calcAttackDefenceTablePastSeasons(l17,"home",fix17);
pta17Away =  calcAttackDefenceTablePastSeasons(l17,"away",fix17);
pth17 = calcAttackDefenceTableAgainPastFixtures(l17,"home",pta17Away,fix17)
pta17 = calcAttackDefenceTableAgainPastFixtures(l17,"away",pta17Home,fix17)


pta16Home =  calcAttackDefenceTablePastSeasons(l16,"home",fix16);
pta16Away =  calcAttackDefenceTablePastSeasons(l16,"away",fix16);
pth16 = calcAttackDefenceTableAgainPastFixtures(l16,"home",pta16Away,fix16)
pta16 = calcAttackDefenceTableAgainPastFixtures(l16,"away",pta16Home,fix16)


pta15Home =  calcAttackDefenceTablePastSeasons(l15,"home",fix15);
pta15Away =  calcAttackDefenceTablePastSeasons(l15,"away",fix15);
pth15 = calcAttackDefenceTableAgainPastFixtures(l15,"home",pta15Away,fix15)
pta15 = calcAttackDefenceTableAgainPastFixtures(l15,"away",pta15Home,fix15)


pta14Home =  calcAttackDefenceTablePastSeasons(l14,"home",fix14);
pta14Away =  calcAttackDefenceTablePastSeasons(l14,"away",fix14);
pth14 = calcAttackDefenceTableAgainPastFixtures(l14,"home",pta14Away,fix14)
pta14 = calcAttackDefenceTableAgainPastFixtures(l14,"away",pta14Home,fix14)

pta13Home =  calcAttackDefenceTablePastSeasons(l13,"home",fix13);
pta13Away =  calcAttackDefenceTablePastSeasons(l13,"away",fix13);
pth13 = calcAttackDefenceTableAgainPastFixtures(l13,"home",pta13Away,fix13)
pta13 = calcAttackDefenceTableAgainPastFixtures(l13,"away",pta13Home,fix13)

pta12Home =  calcAttackDefenceTablePastSeasons(l12,"home",fix12);
pta12Away =  calcAttackDefenceTablePastSeasons(l12,"away",fix12);
pth12 = calcAttackDefenceTableAgainPastFixtures(l12,"home",pta12Away,fix12)
pta12 = calcAttackDefenceTableAgainPastFixtures(l12,"away",pta12Home,fix12)

pta11Home =  calcAttackDefenceTablePastSeasons(l11,"home",fix11);
pta11Away =  calcAttackDefenceTablePastSeasons(l11,"away",fix11);
pth11 = calcAttackDefenceTableAgainPastFixtures(l11,"home",pta11Away,fix11)
pta11 = calcAttackDefenceTableAgainPastFixtures(l11,"away",pta11Home,fix11)










ptav21Home =  calcAttackDefenceTablePastSeasons(le21,"home",f21);
ptav21Away =  calcAttackDefenceTablePastSeasons(le21,"away",f21);
pthv21 = calcAttackDefenceTableAgainPastFixtures(le21,"home",ptav21Away,f21)
ptav21 = calcAttackDefenceTableAgainPastFixtures(le21,"away",ptav21Home,f21)


ptavHome20 =  calcAttackDefenceTablePastSeasons(le20,"home",f20);
ptavAway20 =  calcAttackDefenceTablePastSeasons(le20,"away",f20);
pthv20 = calcAttackDefenceTableAgainPastFixtures(le20,"home",ptavAway20,f20)
ptav20 = calcAttackDefenceTableAgainPastFixtures(le20,"away",ptavHome20,f20)


ptav19Home =  calcAttackDefenceTablePastSeasons(le19,"home",f19);
ptav19Away =  calcAttackDefenceTablePastSeasons(le19,"away",f19);
pthv19 = calcAttackDefenceTableAgainPastFixtures(le19,"home",ptav19Away,f19)
ptav19 = calcAttackDefenceTableAgainPastFixtures(le19,"away",ptav19Home,f19)


ptav18Home =  calcAttackDefenceTablePastSeasons(le18,"home",f18);
ptav18Away =  calcAttackDefenceTablePastSeasons(le18,"away",f18);
pthv18 = calcAttackDefenceTableAgainPastFixtures(le18,"home",ptav18Away,f18)
ptav18 = calcAttackDefenceTableAgainPastFixtures(le18,"away",ptav18Home,f18)


ptav17Home =  calcAttackDefenceTablePastSeasons(le17,"home",f17);
ptav17Away =  calcAttackDefenceTablePastSeasons(le17,"away",f17);
pthv17 = calcAttackDefenceTableAgainPastFixtures(le17,"home",ptav17Away,f17)
ptav17 = calcAttackDefenceTableAgainPastFixtures(le17,"away",ptav17Home,f17)


ptav16Home =  calcAttackDefenceTablePastSeasons(le16,"home",f16);
ptav16Away =  calcAttackDefenceTablePastSeasons(le16,"away",f16);
pthv16 = calcAttackDefenceTableAgainPastFixtures(le16,"home",ptav16Away,f16)
ptav16 = calcAttackDefenceTableAgainPastFixtures(le16,"away",ptav16Home,f16)


ptav15Home =  calcAttackDefenceTablePastSeasons(le15,"home",f15);
ptav15Away =  calcAttackDefenceTablePastSeasons(le15,"away",f15);
pthv15 = calcAttackDefenceTableAgainPastFixtures(le15,"home",ptav15Away,f15)
ptav15 = calcAttackDefenceTableAgainPastFixtures(le15,"away",ptav15Home,f15)


ptav14Home =  calcAttackDefenceTablePastSeasons(le14,"home",f14);
ptav14Away =  calcAttackDefenceTablePastSeasons(le14,"away",f14);
pthv14 = calcAttackDefenceTableAgainPastFixtures(le14,"home",ptav14Away,f14)
ptav14 = calcAttackDefenceTableAgainPastFixtures(le14,"away",ptav14Home,f14)

ptav13Home =  calcAttackDefenceTablePastSeasons(le13,"home",f13);
ptav13Away =  calcAttackDefenceTablePastSeasons(le13,"away",f13);
pthv13 = calcAttackDefenceTableAgainPastFixtures(le13,"home",ptav13Away,f13)
ptav13 = calcAttackDefenceTableAgainPastFixtures(le13,"away",ptav13Home,f13)

ptav12Home =  calcAttackDefenceTablePastSeasons(le12,"home",f12);
ptav12Away =  calcAttackDefenceTablePastSeasons(le12,"away",f12);
pthv12 = calcAttackDefenceTableAgainPastFixtures(le12,"home",ptav12Away,f12)
ptav12 = calcAttackDefenceTableAgainPastFixtures(le12,"away",ptav12Home,f12)

ptav11Home =  calcAttackDefenceTablePastSeasons(le11,"home",f11);
ptav11Away =  calcAttackDefenceTablePastSeasons(le11,"away",f11);
pthv11 = calcAttackDefenceTableAgainPastFixtures(le11,"home",ptav11Away,f11)
ptav11 = calcAttackDefenceTableAgainPastFixtures(le11,"away",ptav11Home,f11)

/*
pta10Home =  calcAttackDefenceTablePastSeasons(l10,"home",fix10);
pta10Away =  calcAttackDefenceTablePastSeasons(l10,"away",fix10);

pth10 = calcAttackDefenceTableAgainPastFixtures(l10,"home",pta10Away,fix10)
pta10 = calcAttackDefenceTableAgainPastFixtures(l10,"away",pta10Home,fix10)

*/


















 /*
window.league9 = [];  
      for (var j = 0; j < dataArray.length; j++) {
          if(!league9.includes(dataArray[j].hName)) league9.push(dataArray[j].hName);
      }
 console.log("league9",league9);


poissonTableArray9Home =  calcAttackDefenceTablePastSeasons(league9,"home",dataArray);
poissonTableArray9Away =  calcAttackDefenceTablePastSeasons(league9,"away",dataArray);
console.log("dataArray",window.dataArray)
console.log("league9",league9);   
console.log("poissonTableArray9Home",poissonTableArray9Home);  
poissonTableHome9 = calcAttackDefenceTableAgainPastFixtures(league9,"home",poissonTableArray9Away,dataArray)
poissonTableAway9 = calcAttackDefenceTableAgainPastFixtures(league9,"away",poissonTableArray9Home,dataArray)
console.log("poissonTableHome9",poissonTableHome9);  
//console.log("poissonTableHome2010",poissonTableHome2010)
*/
//poissonTableHome2022 = calcAttackDefenceTableAgain2022(lastYearsTeamTable, "home",poissonTableArray2021Away);
//poissonTableAway2022 = calcAttackDefenceTableAgain2022(lastYearsTeamTable, "away",poissonTableArray2021Home);
/*

/// 2020

poissonTableArray2020Home = calcAttackDefenceTable2111111(lastYearsTeamTable2017,"home");
poissonTableArray2020Away = calcAttackDefenceTable2111111(lastYearsTeamTable2017,"away");

poissonTableHome2020 = calcAttackDefenceTableAgain2021(lastYearsTeamTable2017, "home",poissonTableArray2020Away);
poissonTableAway2020 = calcAttackDefenceTableAgain2021(lastYearsTeamTable2017, "away",poissonTableArray2020Home);


/// 2019

poissonTableArray2019Home = calcAttackDefenceTable2000000(lastYearsTeamTable2016,"home");
poissonTableArray2019Away = calcAttackDefenceTable2000000(lastYearsTeamTable2016,"away");

poissonTableHome2019 = calcAttackDefenceTableAgain2020(lastYearsTeamTable2016, "home",poissonTableArray2019Home);
poissonTableAway2019 = calcAttackDefenceTableAgain2020(lastYearsTeamTable2016, "away",poissonTableArray2019Home);

/// 2018

poissonTableArray2016Home = calcAttackDefenceTable2016(lastYearsTeamTable2015,"home");
poissonTableArray2016Away = calcAttackDefenceTable2016(lastYearsTeamTable2015,"away");

poissonTableHome2016 = calcAttackDefenceTableAgain2016(lastYearsTeamTable2015, "home",poissonTableArray2016Away);
poissonTableAway2016 = calcAttackDefenceTableAgain2016(lastYearsTeamTable2015, "away",poissonTableArray2016Home);


// 2017

poissonTableArray2017Home = calcAttackDefenceTable2015(lastYearsTeamTable2014,"home");
poissonTableArray2017Away = calcAttackDefenceTable2015(lastYearsTeamTable2014,"away");
console.log("poissonTableArray2017Home",lastYearsTeamTable2014)


poissonTableHome2015 = calcAttackDefenceTableAgain2015(lastYearsTeamTable2014, "home",poissonTableArray2017Away);
poissonTableAway2015 = calcAttackDefenceTableAgain2015(lastYearsTeamTable2014, "away",poissonTableArray2017Home);

*/
//console.log("poissonTableHome2016",poissonTableHome2016)

//console.log("poissonTableHome2022",poissonTableHome2022)

/*
calcAgin.sort(function(a, b) {
    return b.goalsFor -a.goalsFor;
 });
console.log("calcAgin",calcAgin);
*/
/*
function calcAttackDefenceTableLastN(teamsArrayTrs,venue,lastN) {
 poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j].firstChild.textContent;
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.hName == teamsArrayTrs[j].firstChild.textContent});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.aName == teamsArrayTrs[j].firstChild.textContent});
    }





    homeTeamFixturesArrayTest.reverse();


for (var i = 0; i < lastN + 1; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue); 
        console.log("lastN",matchResult)  
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < lastN + 1; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5-(.25 * (i / lastN + 1));  
          console.log("matchWeight",matchWeight.toFixed(3));
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
                

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



    

  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}
*/


//poissonTableHomeLast6 = calcAttackDefenceTableLastN(homeDrawTableTrs, "home",6)
//poissonTableAwayLast6 = calcAttackDefenceTableLastN(homeDrawTableTrs, "away",6)

function calcAttackDefenceTableAgain(teamsArrayTrs,venue,poissonTable,lastN) {

 let poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j].firstChild.textContent;
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.hName == teamsArrayTrs[j].firstChild.textContent});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.aName == teamsArrayTrs[j].firstChild.textContent});
    }





    homeTeamFixturesArrayTest.reverse();
if(lastN) {
   var arrayLenth = lastN;
} else {
  var arrayLenth = homeTeamFixturesArrayTest.length;
}

for (var i = 0; i < arrayLenth; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue); 
 
        if(matchResult !== undefined) {
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);


    for (var i = 0; i < arrayLenth; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue); 
        if(matchResult !== undefined) {
       // console.log(" matchResult.aName", matchResult.aName)

        opponentAttackDefence = poissonTable.find(({ name }) => name === matchResult.aName);

        if(matchResult.hScore && matchResult.hScore !== "pp.")  {
          // italy 4 optimal
          homeTestVariable = 0;
          awayTestVariable = 0;
          /*
          if(league == "italy4") {
          homeTestVariable = .875;
          awayTestVariable = .125;
        }
 // italy 4 optimal
        if(league == "italy3") {
          homeTestVariable = .05;
          awayTestVariable = .125;
        }           // italy 4 test
        if(league == "italy2") {
          homeTestVariable = .5;
          awayTestVariable = .325;
        }
        if(league == "england3") {
          homeTestVariable = .05;
          awayTestVariable = .425;
        }
      
        if(league == "england4") {
          homeTestVariable = .555;
        awayTestVariable = .18;
        }
 // england 5 optimal
 if(league == "england5") {
        homeTestVariable = .05;
          awayTestVariable = .225;
 }

 if(league == "england6") {
          homeTestVariable = .875;
          awayTestVariable = .125;
 }
 if(league == "england7") {
 homeTestVariable = .875;
          awayTestVariable = .125;
 }
 if(league == "england8") {
  homeTestVariable = .555;
        awayTestVariable = .18;
 }
 if(league == "england10") {
  homeTestVariable = .2;
          awayTestVariable = .425;
 }
 
 if(league == "france2") {
 homeTestVariable = .6;
        awayTestVariable = .08;
 }

 if(league == "france3") {
 homeTestVariable = .6;
        awayTestVariable = .08;
 }

 if(league == "england2") {
  homeTestVariable = .065;
          awayTestVariable = .08;
 }
*/
opponentAttackDefence.AttackAndDefence = 0;


          matchWeight = .5-(.25 * (i / homeTeamFixturesArrayTest.length + 1));  
       //   console.log("matchWeight",matchWeight.toFixed(3));
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
              homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));    

              } else {    
                homeGoalDampner = parseInt(matchResult.hScore) + (parseFloat(opponentAttackDefence.AttackAndDefence));      
                   
               }             

              homeGoalDampner =  homeGoalDampner + matchWeight;  
   
              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
             
              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
                awayGoalDampner = awayGoalDampner - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
              } else {   
                awayGoalDampner = parseInt(matchResult.aScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
                

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
              homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));   
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore)  + (parseFloat(opponentAttackDefence.AttackAndDefence));          
              }


              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
                awayGoalDampner = awayGoalDampner - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
              } else {   
                awayGoalDampner = parseInt(matchResult.aScore) - (parseFloat(opponentAttackDefence.AttackAndDefence));   
              }  
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }
}



    

  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}





function calcAttackDefenceTableAgainPastFixtures(teamsArrayTrs,venue,poissonTable,fixturesArray){

let poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


   poissonHomeTeam = new Object(); 
   poissonHomeTeam.name =  teamsArrayTrs[j]
   poissonHomeTeam.played = 0;
   poissonHomeTeam.wins = 0;
   poissonHomeTeam.goalsFor = 0;
   poissonHomeTeam.goalsAgainst = 0;
   poissonHomeTeam.avgGoalsFor = 0;
   poissonHomeTeam.avgGoalsAgainst = 0;
   poissonHomeTeam.played =  0;
   poissonHomeTeam.goalsFor =  0;
   poissonHomeTeam.goalsAgainst = 0 ;
   poissonHomeTeam.goalsForInGames = [] ;
   poissonHomeTeam.goalsAgainstInGames = [] ;
   if(venue == "home") {
      homeTeamFixturesArrayTest =  fixturesArray.filter(function(team) { return team.hName == teamsArrayTrs[j]});
   } else {
      homeTeamFixturesArrayTest =  fixturesArray.filter(function(team) { return team.aName == teamsArrayTrs[j]});
   }

//console.log("2022",homeTeamFixturesArrayTest)



   homeTeamFixturesArrayTest.reverse();


for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
      // console.log("lastN",matchResult)  
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
         if(venue == "home") {
             poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
         } else {
           poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
         }
     }
   }

   
   poissonHomeTeam.homeGreaterThan1Goal = 0;
   for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
     if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
   }

   poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
   for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
     if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
   }
   poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
   poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);


   for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
    //   console.log("matchResult.aName2", poissonTable);
     //  console.log("matchResult.aName2", matchResult.aName);
       opponentAttackDefence = poissonTable.find(({ name }) => name === matchResult.aName);
   //    console.log("matchResult.aName2", opponentAttackDefence);
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {
         // italy 4 optimal
         homeTestVariable = 0;
         awayTestVariable = 0;
         if(league == "italy4") {
         homeTestVariable = .875;
         awayTestVariable = .125;
       }
// italy 4 optimal
       if(league == "italy3") {
         homeTestVariable = .05;
         awayTestVariable = .125;
       }           // italy 4 test
       if(league == "italy2") {
         homeTestVariable = .5;
         awayTestVariable = .325;
       }
       if(league == "england3") {
         homeTestVariable = .05;
         awayTestVariable = .425;
       }
     
       if(league == "england4") {
         homeTestVariable = .555;
       awayTestVariable = .18;
       }
// england 5 optimal
if(league == "england5") {
       homeTestVariable = .05;
         awayTestVariable = .225;
}

if(league == "england6") {
         homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england7") {
homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england8") {
 homeTestVariable = .555;
       awayTestVariable = .18;
}
if(league == "england10") {
 homeTestVariable = .2;
         awayTestVariable = .425;
}

if(league == "france2") {
homeTestVariable = .6;
       awayTestVariable = .08;
}

if(league == "france3") {
homeTestVariable = .6;
       awayTestVariable = .08;
}


         matchWeight = .5-(.25 * (i / homeTeamFixturesArrayTest.length + 1));  
        // console.log("matchWeight",matchWeight.toFixed(3));
           if(venue == "home") {
             if(matchResult.hScore >1) {                      
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));    

             } else {    
               homeGoalDampner = parseInt(matchResult.hScore)  + (parseFloat(opponentAttackDefence.AttackAndDefence));      
                  
              }             

             homeGoalDampner =  homeGoalDampner + matchWeight;  
  
             poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
            
             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             }  
             awayGoalDampner =  awayGoalDampner + matchWeight;

             poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
               

             
           } else {

             if(matchResult.hScore >1) {              
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));   
              
             } else {
               homeGoalDampner = parseInt(matchResult.hScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence));          
             }


             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore) + (parseFloat(opponentAttackDefence.AttackAndDefence));   
             }  
           homeGoalDampner =  homeGoalDampner + matchWeight;
           awayGoalDampner =  awayGoalDampner + matchWeight;
           poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
           poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
    
            
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
 
     }
   }
 }



   

 
   
   // Method 1
   poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
   poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
   // Method 2
  // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
  // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
   
   poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
   poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

   poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
   poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
   poissonTableArray.push(poissonHomeTeam);
 }

 return poissonTableArray;
}




function calcAttackDefenceTableAgain2021(teamsArrayTrs,venue,poissonTable,lastN){

let poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


   poissonHomeTeam = new Object(); 
   poissonHomeTeam.name =  teamsArrayTrs[j]
   poissonHomeTeam.played = 0;
   poissonHomeTeam.wins = 0;
   poissonHomeTeam.goalsFor = 0;
   poissonHomeTeam.goalsAgainst = 0;
   poissonHomeTeam.avgGoalsFor = 0;
   poissonHomeTeam.avgGoalsAgainst = 0;
   poissonHomeTeam.played =  0;
   poissonHomeTeam.goalsFor =  0;
   poissonHomeTeam.goalsAgainst = 0 ;
   poissonHomeTeam.goalsForInGames = [] ;
   poissonHomeTeam.goalsAgainstInGames = [] ;
   if(venue == "home") {
      homeTeamFixturesArrayTest =  seasonFixtures3.filter(function(team) { return team.hName == teamsArrayTrs[j]});
   } else {
      homeTeamFixturesArrayTest =  seasonFixtures3.filter(function(team) { return team.aName == teamsArrayTrs[j]});
   }

//console.log("2022",homeTeamFixturesArrayTest)



   homeTeamFixturesArrayTest.reverse();
if(lastN) {
  var arrayLenth = lastN;
} else {
 var arrayLenth = homeTeamFixturesArrayTest.length;
}

for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
      // console.log("lastN",matchResult)  
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
         if(venue == "home") {
             poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
         } else {
           poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
         }
     }
   }

   
   poissonHomeTeam.homeGreaterThan1Goal = 0;
   for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
     if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
   }

   poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
   for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
     if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
   }
   poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
   poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);


   for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
    //   console.log("matchResult.aName2", poissonTable);
     //  console.log("matchResult.aName2", matchResult.aName);
       opponentAttackDefence = poissonTable.find(({ name }) => name === matchResult.aName);
   //    console.log("matchResult.aName2", opponentAttackDefence);
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {
         // italy 4 optimal
         homeTestVariable = 0;
         awayTestVariable = 0;
         if(league == "italy4") {
         homeTestVariable = .875;
         awayTestVariable = .125;
       }
// italy 4 optimal
       if(league == "italy3") {
         homeTestVariable = .05;
         awayTestVariable = .125;
       }           // italy 4 test
       if(league == "italy2") {
         homeTestVariable = .5;
         awayTestVariable = .325;
       }
       if(league == "england3") {
         homeTestVariable = .05;
         awayTestVariable = .425;
       }
     
       if(league == "england4") {
         homeTestVariable = .555;
       awayTestVariable = .18;
       }
// england 5 optimal
if(league == "england5") {
       homeTestVariable = .05;
         awayTestVariable = .225;
}

if(league == "england6") {
         homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england7") {
homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england8") {
 homeTestVariable = .555;
       awayTestVariable = .18;
}
if(league == "england10") {
 homeTestVariable = .2;
         awayTestVariable = .425;
}

if(league == "france2") {
homeTestVariable = .6;
       awayTestVariable = .08;
}

if(league == "france3") {
homeTestVariable = .6;
       awayTestVariable = .08;
}


         matchWeight = .5-(.25 * (i / homeTeamFixturesArrayTest.length + 1));  
        // console.log("matchWeight",matchWeight.toFixed(3));
           if(venue == "home") {
             if(matchResult.hScore >1) {                      
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));    

             } else {    
               homeGoalDampner = parseInt(matchResult.hScore)  + (parseFloat(opponentAttackDefence.AttackAndDefence));      
                  
              }             

             homeGoalDampner =  homeGoalDampner + matchWeight;  
  
             poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
            
             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             }  
             awayGoalDampner =  awayGoalDampner + matchWeight;

             poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
               

             
           } else {

             if(matchResult.hScore >1) {              
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));   
              
             } else {
               homeGoalDampner = parseInt(matchResult.hScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence));          
             }


             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore) + (parseFloat(opponentAttackDefence.AttackAndDefence));   
             }  
           homeGoalDampner =  homeGoalDampner + matchWeight;
           awayGoalDampner =  awayGoalDampner + matchWeight;
           poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
           poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
    
            
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
 
     }
   }
 }



   

 
   
   // Method 1
   poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
   poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
   // Method 2
  // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
  // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
   
   poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
   poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

   poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
   poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
   poissonTableArray.push(poissonHomeTeam);
 }

 return poissonTableArray;
}


function calcAttackDefenceTableAgain2020(teamsArrayTrs,venue,poissonTable,lastN){

let poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


   poissonHomeTeam = new Object(); 
   poissonHomeTeam.name =  teamsArrayTrs[j]
   poissonHomeTeam.played = 0;
   poissonHomeTeam.wins = 0;
   poissonHomeTeam.goalsFor = 0;
   poissonHomeTeam.goalsAgainst = 0;
   poissonHomeTeam.avgGoalsFor = 0;
   poissonHomeTeam.avgGoalsAgainst = 0;
   poissonHomeTeam.played =  0;
   poissonHomeTeam.goalsFor =  0;
   poissonHomeTeam.goalsAgainst = 0 ;
   poissonHomeTeam.goalsForInGames = [] ;
   poissonHomeTeam.goalsAgainstInGames = [] ;
   if(venue == "home") {
      homeTeamFixturesArrayTest =  seasonFixtures4.filter(function(team) { return team.hName == teamsArrayTrs[j]});
   } else {
      homeTeamFixturesArrayTest =  seasonFixtures4.filter(function(team) { return team.aName == teamsArrayTrs[j]});
   }

//console.log("2022",homeTeamFixturesArrayTest)



   homeTeamFixturesArrayTest.reverse();
if(lastN) {
  var arrayLenth = lastN;
} else {
 var arrayLenth = homeTeamFixturesArrayTest.length;
}

for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
      // console.log("lastN",matchResult)  
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
         if(venue == "home") {
             poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
         } else {
           poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
         }
     }
   }

   
   poissonHomeTeam.homeGreaterThan1Goal = 0;
   for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
     if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
   }

   poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
   for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
     if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
   }
   poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
   poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);


   for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
    //   console.log("matchResult.aName2", poissonTable);
     //  console.log("matchResult.aName2", matchResult.aName);
       opponentAttackDefence = poissonTable.find(({ name }) => name === matchResult.aName);
   //    console.log("matchResult.aName2", opponentAttackDefence);
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {
         // italy 4 optimal
         homeTestVariable = 0;
         awayTestVariable = 0;
         if(league == "italy4") {
         homeTestVariable = .875;
         awayTestVariable = .125;
       }
// italy 4 optimal
       if(league == "italy3") {
         homeTestVariable = .05;
         awayTestVariable = .125;
       }           // italy 4 test
       if(league == "italy2") {
         homeTestVariable = .5;
         awayTestVariable = .325;
       }
       if(league == "england3") {
         homeTestVariable = .05;
         awayTestVariable = .425;
       }
     
       if(league == "england4") {
         homeTestVariable = .555;
       awayTestVariable = .18;
       }
// england 5 optimal
if(league == "england5") {
       homeTestVariable = .05;
         awayTestVariable = .225;
}

if(league == "england6") {
         homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england7") {
homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england8") {
 homeTestVariable = .555;
       awayTestVariable = .18;
}
if(league == "england10") {
 homeTestVariable = .2;
         awayTestVariable = .425;
}

if(league == "france2") {
homeTestVariable = .6;
       awayTestVariable = .08;
}

if(league == "france3") {
homeTestVariable = .6;
       awayTestVariable = .08;
}


         matchWeight = .5-(.25 * (i / homeTeamFixturesArrayTest.length + 1));  
        // console.log("matchWeight",matchWeight.toFixed(3));
           if(venue == "home") {
             if(matchResult.hScore >1) {                      
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));    

             } else {    
               homeGoalDampner = parseInt(matchResult.hScore)  + (parseFloat(opponentAttackDefence.AttackAndDefence));      
                  
              }             

             homeGoalDampner =  homeGoalDampner + matchWeight;  
  
             poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
            
             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             }  
             awayGoalDampner =  awayGoalDampner + matchWeight;

             poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
               

             
           } else {

             if(matchResult.hScore >1) {              
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));   
              
             } else {
               homeGoalDampner = parseInt(matchResult.hScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence));          
             }


             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore) + (parseFloat(opponentAttackDefence.AttackAndDefence));   
             }  
           homeGoalDampner =  homeGoalDampner + matchWeight;
           awayGoalDampner =  awayGoalDampner + matchWeight;
           poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
           poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
    
            
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
 
     }
   }
 }





 
   
   // Method 1
   poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
   poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
   // Method 2
  // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
  // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
   
   poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
   poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

   poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
   poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
   poissonTableArray.push(poissonHomeTeam);
 }

 return poissonTableArray;
}




function calcAttackDefenceTableAgain2016(teamsArrayTrs,venue,poissonTable,lastN){

let poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


   poissonHomeTeam = new Object(); 
   poissonHomeTeam.name =  teamsArrayTrs[j]
   poissonHomeTeam.played = 0;
   poissonHomeTeam.wins = 0;
   poissonHomeTeam.goalsFor = 0;
   poissonHomeTeam.goalsAgainst = 0;
   poissonHomeTeam.avgGoalsFor = 0;
   poissonHomeTeam.avgGoalsAgainst = 0;
   poissonHomeTeam.played =  0;
   poissonHomeTeam.goalsFor =  0;
   poissonHomeTeam.goalsAgainst = 0 ;
   poissonHomeTeam.goalsForInGames = [] ;
   poissonHomeTeam.goalsAgainstInGames = [] ;
   if(venue == "home") {
      homeTeamFixturesArrayTest =  seasonFixtures5.filter(function(team) { return team.hName == teamsArrayTrs[j]});
   } else {
      homeTeamFixturesArrayTest =  seasonFixtures5.filter(function(team) { return team.aName == teamsArrayTrs[j]});
   }

//console.log("2022",homeTeamFixturesArrayTest)



   homeTeamFixturesArrayTest.reverse();
if(lastN) {
  var arrayLenth = lastN;
} else {
 var arrayLenth = homeTeamFixturesArrayTest.length;
}

for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
      // console.log("lastN",matchResult)  
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
         if(venue == "home") {
             poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
         } else {
           poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
         }
     }
   }

   
   poissonHomeTeam.homeGreaterThan1Goal = 0;
   for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
     if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
   }

   poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
   for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
     if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
   }
   poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
   poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);


   for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
    //   console.log("matchResult.aName2", poissonTable);
     //  console.log("matchResult.aName2", matchResult.aName);
       opponentAttackDefence = poissonTable.find(({ name }) => name === matchResult.aName);
   //    console.log("matchResult.aName2", opponentAttackDefence);
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {
         // italy 4 optimal
         homeTestVariable = 0;
         awayTestVariable = 0;
         if(league == "italy4") {
         homeTestVariable = .875;
         awayTestVariable = .125;
       }
// italy 4 optimal
       if(league == "italy3") {
         homeTestVariable = .05;
         awayTestVariable = .125;
       }           // italy 4 test
       if(league == "italy2") {
         homeTestVariable = .5;
         awayTestVariable = .325;
       }
       if(league == "england3") {
         homeTestVariable = .05;
         awayTestVariable = .425;
       }
     
       if(league == "england4") {
         homeTestVariable = .555;
       awayTestVariable = .18;
       }
// england 5 optimal
if(league == "england5") {
       homeTestVariable = .05;
         awayTestVariable = .225;
}

if(league == "england6") {
         homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england7") {
homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england8") {
 homeTestVariable = .555;
       awayTestVariable = .18;
}
if(league == "england10") {
 homeTestVariable = .2;
         awayTestVariable = .425;
}

if(league == "france2") {
homeTestVariable = .6;
       awayTestVariable = .08;
}

if(league == "france3") {
homeTestVariable = .6;
       awayTestVariable = .08;
}


         matchWeight = .5-(.25 * (i / homeTeamFixturesArrayTest.length + 1));  
        // console.log("matchWeight",matchWeight.toFixed(3));
           if(venue == "home") {
             if(matchResult.hScore >1) {                      
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));    

             } else {    
               homeGoalDampner = parseInt(matchResult.hScore)  + (parseFloat(opponentAttackDefence.AttackAndDefence));      
                  
              }             

             homeGoalDampner =  homeGoalDampner + matchWeight;  
  
             poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
            
             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             }  
             awayGoalDampner =  awayGoalDampner + matchWeight;

             poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
               

             
           } else {

             if(matchResult.hScore >1) {              
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));   
              
             } else {
               homeGoalDampner = parseInt(matchResult.hScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence));          
             }


             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore) + (parseFloat(opponentAttackDefence.AttackAndDefence));   
             }  
           homeGoalDampner =  homeGoalDampner + matchWeight;
           awayGoalDampner =  awayGoalDampner + matchWeight;
           poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
           poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
    
            
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
 
     }
   }
 }



   

 
   
   // Method 1
   poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
   poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
   // Method 2
  // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
  // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
   
   poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
   poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

   poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
   poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
   poissonTableArray.push(poissonHomeTeam);
 }

 return poissonTableArray;
}


function calcAttackDefenceTableAgain2015(teamsArrayTrs,venue,poissonTable,lastN){

let poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


   poissonHomeTeam = new Object(); 
   poissonHomeTeam.name =  teamsArrayTrs[j]
   poissonHomeTeam.played = 0;
   poissonHomeTeam.wins = 0;
   poissonHomeTeam.goalsFor = 0;
   poissonHomeTeam.goalsAgainst = 0;
   poissonHomeTeam.avgGoalsFor = 0;
   poissonHomeTeam.avgGoalsAgainst = 0;
   poissonHomeTeam.played =  0;
   poissonHomeTeam.goalsFor =  0;
   poissonHomeTeam.goalsAgainst = 0 ;
   poissonHomeTeam.goalsForInGames = [] ;
   poissonHomeTeam.goalsAgainstInGames = [] ;
   if(venue == "home") {
      homeTeamFixturesArrayTest =  seasonFixtures6.filter(function(team) { return team.hName == teamsArrayTrs[j]});
   } else {
      homeTeamFixturesArrayTest =  seasonFixtures6.filter(function(team) { return team.aName == teamsArrayTrs[j]});
   }

//console.log("2022",homeTeamFixturesArrayTest)



   homeTeamFixturesArrayTest.reverse();
if(lastN) {
  var arrayLenth = lastN;
} else {
 var arrayLenth = homeTeamFixturesArrayTest.length;
}

for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
      // console.log("lastN",matchResult)  
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
         if(venue == "home") {
             poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
         } else {
           poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
             poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
         }
     }
   }

   
   poissonHomeTeam.homeGreaterThan1Goal = 0;
   for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
     if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
   }

   poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
   for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
     if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
   }
   poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
   poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
   poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);


   for (var i = 0; i < arrayLenth; i++) {
       matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j], venue); 
    //   console.log("matchResult.aName2", poissonTable);
     //  console.log("matchResult.aName2", matchResult.aName);
       opponentAttackDefence = poissonTable.find(({ name }) => name === matchResult.aName);
   //    console.log("matchResult.aName2", opponentAttackDefence);
       if(matchResult.hScore && matchResult.hScore !== "pp.")  {
         // italy 4 optimal
         homeTestVariable = 0;
         awayTestVariable = 0;
         if(league == "italy4") {
         homeTestVariable = .875;
         awayTestVariable = .125;
       }
// italy 4 optimal
       if(league == "italy3") {
         homeTestVariable = .05;
         awayTestVariable = .125;
       }           // italy 4 test
       if(league == "italy2") {
         homeTestVariable = .5;
         awayTestVariable = .325;
       }
       if(league == "england3") {
         homeTestVariable = .05;
         awayTestVariable = .425;
       }
     
       if(league == "england4") {
         homeTestVariable = .555;
       awayTestVariable = .18;
       }
// england 5 optimal
if(league == "england5") {
       homeTestVariable = .05;
         awayTestVariable = .225;
}

if(league == "england6") {
         homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england7") {
homeTestVariable = .875;
         awayTestVariable = .125;
}
if(league == "england8") {
 homeTestVariable = .555;
       awayTestVariable = .18;
}
if(league == "england10") {
 homeTestVariable = .2;
         awayTestVariable = .425;
}

if(league == "france2") {
homeTestVariable = .6;
       awayTestVariable = .08;
}

if(league == "france3") {
homeTestVariable = .6;
       awayTestVariable = .08;
}


         matchWeight = .5-(.25 * (i / homeTeamFixturesArrayTest.length + 1));  
        // console.log("matchWeight",matchWeight.toFixed(3));
           if(venue == "home") {
             if(matchResult.hScore >1) {                      
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));    

             } else {    
               homeGoalDampner = parseInt(matchResult.hScore)  + (parseFloat(opponentAttackDefence.AttackAndDefence));      
                  
              }             

             homeGoalDampner =  homeGoalDampner + matchWeight;  
  
             poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     
            
             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             }  
             awayGoalDampner =  awayGoalDampner + matchWeight;

             poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
               

             
           } else {

             if(matchResult.hScore >1) {              
               homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);   
             homeGoalDampner = homeGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence));   
              
             } else {
               homeGoalDampner = parseInt(matchResult.hScore)  - (parseFloat(opponentAttackDefence.AttackAndDefence));          
             }


             if(matchResult.aScore >1) {
               awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               awayGoalDampner = awayGoalDampner + (parseFloat(opponentAttackDefence.AttackAndDefence)); 
             } else {   
               awayGoalDampner = parseInt(matchResult.aScore) + (parseFloat(opponentAttackDefence.AttackAndDefence));   
             }  
           homeGoalDampner =  homeGoalDampner + matchWeight;
           awayGoalDampner =  awayGoalDampner + matchWeight;
           poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
           poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
    
            
             poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
 
     }
   }
 }



   

 
   
   // Method 1
   poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
   poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
   // Method 2
  // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
  // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
   
   poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
   poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

   poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
   poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
   poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
   poissonTableArray.push(poissonHomeTeam);
 }

 return poissonTableArray;
}


function calcAttackDefenceTableSingle(teamsArrayTrs,venue,removeFixtureNumber) {
 poissonTableArray = [];

for (var j = 0; j < teamsArrayTrs.length; j++) {


    poissonHomeTeam = new Object(); 
    poissonHomeTeam.name =  teamsArrayTrs[j].firstChild.textContent;
    poissonHomeTeam.played = 0;
    poissonHomeTeam.wins = 0;
    poissonHomeTeam.goalsFor = 0;
    poissonHomeTeam.goalsAgainst = 0;
    poissonHomeTeam.avgGoalsFor = 0;
    poissonHomeTeam.avgGoalsAgainst = 0;
    poissonHomeTeam.played =  0;
    poissonHomeTeam.goalsFor =  0;
    poissonHomeTeam.goalsAgainst = 0 ;
    poissonHomeTeam.goalsForInGames = [] ;
    poissonHomeTeam.goalsAgainstInGames = [] ;
    if(venue == "home") {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.hName == teamsArrayTrs[j].firstChild.textContent});
    } else {
       homeTeamFixturesArrayTest =  seasonFixtures.filter(function(team) { return team.aName == teamsArrayTrs[j].firstChild.textContent});
    }


    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
     
        if(homeTeamFixturesArrayTest[i].hScore == 'pp.')  {   
          homeTeamFixturesArrayTest.splice(i, 1);
          i--;
        }
      }

      homeTeamFixturesArrayTest.reverse();

  
      //fixtureRemoved =  homeTeamFixturesArrayTest[-1 + parseInt(removeFixtureNumber)];
//if(removeFixtureNumber) homeTeamFixturesArrayTest.splice((homeTeamFixturesArrayTest.length - 1) - parseInt(removeFixtureNumber), parseInt(removeFixtureNumber));
if(removeFixtureNumber) homeTeamFixturesArrayTest.splice(0, parseInt(removeFixtureNumber));






for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue);   
        
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {            
          if(venue == "home") {
              poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.hScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.aScore)) 
          } else {
            poissonHomeTeam.goalsForInGames.push(parseInt(matchResult.aScore));      
              poissonHomeTeam.goalsAgainstInGames.push(parseInt(matchResult.hScore)) 
          }
      }
    }

    
    poissonHomeTeam.homeGreaterThan1Goal = 0;
    for (var d = 0; d < poissonHomeTeam.goalsForInGames.length; d++) {
      if( poissonHomeTeam.goalsForInGames[d] > 1) poissonHomeTeam.homeGreaterThan1Goal +=1;      
    }

    poissonHomeTeam.homeGreaterThan1GoalConceded = 0;
    for (var d = 0; d < poissonHomeTeam.goalsAgainstInGames.length; d++) {
      if( poissonHomeTeam.goalsAgainstInGames[d] > 1) poissonHomeTeam.homeGreaterThan1GoalConceded +=1;      
    }
    poissonHomeTeam.homeGreaterThan1GoalRatio =  parseInt(poissonHomeTeam.homeGreaterThan1Goal) /  parseInt(poissonHomeTeam.goalsForInGames.length);
    poissonHomeTeam.homeGreaterThan1GoalRatio =    poissonHomeTeam.homeGreaterThan1GoalRatio.toFixed(4);                                                                    

    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = parseInt(poissonHomeTeam.homeGreaterThan1GoalConceded) /  parseInt(poissonHomeTeam.goalsAgainstInGames.length);
    poissonHomeTeam.homeGreaterThan1ConcededGoalRatio = poissonHomeTeam.homeGreaterThan1ConcededGoalRatio.toFixed(4);
//if(poissonHomeTeam.name == "Brackley Town") console.log("homeTeamFixturesArrayTest",homeTeamFixturesArrayTest);

    for (var i = 0; i < homeTeamFixturesArrayTest.length; i++) {
        matchResult = determineResultHome(homeTeamFixturesArrayTest[i], teamsArrayTrs[j].firstChild.textContent, venue);   
        if(matchResult.hScore && matchResult.hScore !== "pp.")  {

          matchWeight = .5 * (i / homeTeamFixturesArrayTest.length);  
            if(venue == "home") {
              if(matchResult.hScore >1) {                      
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
              }
              homeGoalDampner =  homeGoalDampner + matchWeight;

              poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(homeGoalDampner);     

              if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);
              }  
              awayGoalDampner =  awayGoalDampner + matchWeight;

              poissonHomeTeam.goalsAgainst =  parseFloat(poissonHomeTeam.goalsAgainst) +  parseFloat(awayGoalDampner);
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;     
             

              
            } else {

              if(matchResult.hScore >1) {              
                homeGoalDampner =  1 +  parseFloat(poissonHomeTeam.homeGreaterThan1ConcededGoalRatio);
               
              } else {
                homeGoalDampner = parseInt(matchResult.hScore);
            
              }


                if(matchResult.aScore >1) {
                awayGoalDampner =  1 + parseFloat(poissonHomeTeam.homeGreaterThan1GoalRatio);
              } else {
                awayGoalDampner = parseInt(matchResult.aScore);        
            }
            homeGoalDampner =  homeGoalDampner + matchWeight;
            awayGoalDampner =  awayGoalDampner + matchWeight;
            poissonHomeTeam.goalsFor =  parseFloat(poissonHomeTeam.goalsFor) + parseFloat(awayGoalDampner);
            poissonHomeTeam.goalsAgainst = parseFloat(poissonHomeTeam.goalsAgainst) + parseFloat(homeGoalDampner);
     
             
              poissonHomeTeam.played = parseInt(poissonHomeTeam.played) + 1;
  
      }
    }
  }



  
    
    // Method 1
    poissonHomeTeam.avgGoalsFor = poissonHomeTeam.goalsFor / poissonHomeTeam.played;
    poissonHomeTeam.avgGoalsAgainst = poissonHomeTeam.goalsAgainst / poissonHomeTeam.played;
    // Method 2
   // poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor  / leagueAverageHomeGoalsScored;
   // poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst / leagueAverageAwayGoalsScored;
    
    poissonHomeTeam.AttackStrength = poissonHomeTeam.avgGoalsFor;
    poissonHomeTeam.DefenceStrength = poissonHomeTeam.avgGoalsAgainst;

    poissonHomeTeam.AttackStrength  =  (poissonHomeTeam.AttackStrength).toFixed(2);
    poissonHomeTeam.DefenceStrength =  (poissonHomeTeam.DefenceStrength).toFixed(2)
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackStrength - poissonHomeTeam.DefenceStrength;
    poissonHomeTeam.AttackAndDefence = poissonHomeTeam.AttackAndDefence.toFixed(2);
    poissonTableArray.push(poissonHomeTeam);
  }

  return poissonTableArray;
}





//console.log("poissonTableHome",poissonTableHome);
//console.log("poissonTableAway",poissonTableAway);





leagueTablePoissonTrs = document.getElementById("fixturesTable").getElementsByClassName("show");
//homeTeamPoisson = leagueTablePoissonTrs.childNodes[1].id;
//awayTeamPoisson = leagueTablePoissonTrs.childNodes[3].id;
homeScoreVariations = [0,1,2,3,4,5,6,7,8,9,10];
awayScoreVariations = [0,1,2,3,4,5,6,7,8,9,10];



function scoreData(arrayHome,arrayAway) {
var scoreData = [];
for (var f = 0; f < leagueTablePoissonTrs.length; f++) {

  let homeTeamPoisson = arrayHome.find(el => el.name == leagueTablePoissonTrs[f].childNodes[1].textContent);
  //console.log("homeTeamPoisson",homeTeamPoisson);
  let awayTeamPoisson = arrayAway.find(el => el.name == leagueTablePoissonTrs[f].childNodes[3].textContent);

    for (var j = 0; j < homeScoreVariations.length; j++) {
        for (var k  = 0; k < awayScoreVariations.length; k++) {
            let stats = new Statistics();
            let stats2 = new Statistics();
            //var homeTeamPSingle = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.avgGoalsFor);
            //var awayTeamPSingle = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.avgGoalsFor);
            //console.log("m2",homeTeamPoisson.AttackStrength, awayTeamPoisson.DefenceStrength, leagueAverageHomeGoalsScored);
           // console.log("m2",homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored)
          // console.log("homeTeamPSingle2 variables",homeScoreVariations[j], homeTeamPoisson.AttackStrength, awayTeamPoisson.DefenceStrength, leagueAverageHomeGoalsScored)
         
          //  var homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored);
          //  var awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength * leagueAverageAwayGoalsScored); 
            
            // method 2

          // var homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored);
          //  var awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength * leagueAverageAwayGoalsScored); 
            
            var homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength);
            var awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength); 

            // method 3
           // var homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength);
         //   var awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength); 

            //console.log("homeTeamPSingle2",homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored);
           //console.log("awayTeamPSingle2", awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength * leagueAverageAwayGoalsScored);

            //let sum = (homeTeamPSingle*awayTeamPSingle)*100;
            let sum2 = parseFloat(homeTeamPSingle2).toFixed(3)*parseFloat(awayTeamPSingle2).toFixed(3)*100;
            //console.log("sum",sum2);
           // console.log("homeTeamPoissonb",homeTeamPoisson);
            let score = {
                  homeSide: homeTeamPoisson.name,
                  awaySide: awayTeamPoisson.name,
                  home: homeScoreVariations[j],
                  away: awayScoreVariations[k],                  
                  probability2: sum2
                };
              //  console.log(score);
                scoreData.push(score);         
        }
    };
  }
  return scoreData;
}

scoreDataArray = scoreData(poissonTableHome2,poissonTableAway2);
scoreDataArray6 = scoreData(poissonTableHome6,poissonTableAway6);
//scoreDataArrayLast6 = scoreData(poissonTableHomeLast6,poissonTableAwayLast6);


function scoreDataSingle(arrayHome,arrayAway,singleHomeTeam,singleAwayTeam) {
var scoreData = [];
  let homeTeamPoisson = arrayHome.find(el => el.name == singleHomeTeam);
  let awayTeamPoisson = arrayAway.find(el => el.name == singleAwayTeam);


    for (var j = 0; j < homeScoreVariations.length; j++) {
        for (var k  = 0; k < awayScoreVariations.length; k++) {
            let stats = new Statistics();
            let stats2 = new Statistics();
            //var homeTeamPSingle = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.avgGoalsFor);
            //var awayTeamPSingle = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.avgGoalsFor);
            //console.log("m2",homeTeamPoisson.AttackStrength, awayTeamPoisson.DefenceStrength, leagueAverageHomeGoalsScored);
           // console.log("m2",homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored)
          // console.log("homeTeamPSingle2 variables",homeScoreVariations[j], homeTeamPoisson.AttackStrength, awayTeamPoisson.DefenceStrength, leagueAverageHomeGoalsScored)
         
          //  var homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored);
          //  var awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength * leagueAverageAwayGoalsScored); 
            
            // method 2

          // var homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored);
          //  var awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength * leagueAverageAwayGoalsScored); 
            
            let homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength);
            let awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength); 

            // method 3
           // var homeTeamPSingle2 = stats.poissonProbabilityMass(homeScoreVariations[j], homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength);
         //   var awayTeamPSingle2 = stats2.poissonProbabilityMass(awayScoreVariations[k], awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength); 

            //console.log("homeTeamPSingle2",homeTeamPoisson.AttackStrength * awayTeamPoisson.DefenceStrength * leagueAverageHomeGoalsScored);
           //console.log("awayTeamPSingle2", awayTeamPoisson.AttackStrength * homeTeamPoisson.DefenceStrength * leagueAverageAwayGoalsScored);

            //let sum = (homeTeamPSingle*awayTeamPSingle)*100;
            let sum2 = parseFloat(homeTeamPSingle2).toFixed(3)*parseFloat(awayTeamPSingle2).toFixed(3)*100;
            //console.log("sum",sum2);
           // console.log("homeTeamPoissonb",homeTeamPoisson);
            let score = {
                  homeSide: homeTeamPoisson.name,
                  awaySide: awayTeamPoisson.name,
                  home: homeScoreVariations[j],
                  away: awayScoreVariations[k],                  
                  probability2: sum2
                };
              //  console.log(score);
                scoreData.push(score);         
        }
    };
  
  return scoreData;
}







//console.log("scoreDataArray",scoreDataArray);
//scoreDataArrayLast6 = scoreData(poissonTableHomeLast6,poissonTableAwayLast6)
//console.log("scoreDataArrayLast6",scoreDataArrayLast6);
//scoreDataArrayLast3 = scoreData(poissonTableHomeLast3,poissonTableAwayLast3)
//console.log("scoreDataArrayLast3",scoreDataArrayLast6);

function calculateProbabilites2(array,homeTeam) {
  probabilityFixtureObject = new Object();
  probabilityFixtureObject.winP = 0;
  probabilityFixtureObject.drawP = 0;
  probabilityFixtureObject.lossP = 0;
  let probabilities = array.filter(el => el.homeSide == homeTeam );
  //console.log("probabilities",probabilities);
  probabilities.sort(function(a, b) {
  if (a.probability2 < b.probability2) return 1;
  if (a.probability2 > b.probability2) return -1;
 });
 //console.log("probabilities.slice",probabilities.slice(0, 5));
 //console.log("probabilities.slic",probabilities);
  for (var j = 0; j < probabilities.length; j++) {
        if(probabilities[j].home  > probabilities[j].away) probabilityFixtureObject.winP += probabilities[j].probability2;
        if(probabilities[j].home === probabilities[j].away) probabilityFixtureObject.drawP += probabilities[j].probability2;
        if(probabilities[j].home  < probabilities[j].away) probabilityFixtureObject.lossP += probabilities[j].probability2;    
        probabilityFixtureObject.score1 = probabilities[j].home + " " + probabilities[j].away;
        probabilityFixtureObject.score2 = probabilities[j].home + " " + probabilities[j].away;
        probabilityFixtureObject.score3 = probabilities[j].home + " " + probabilities[j].away;
  }  
  //console.log("calculateProbabilites2",probabilityFixtureObject)
  return probabilityFixtureObject;
}



function displayPoissonScores (array,homeTeam,tableTitle){
  let probabilities = array.filter(el => el.homeSide == homeTeam );
  probabilities.sort(function(a, b) {
  if (a.probability2 < b.probability2) return 1;
  if (a.probability2 > b.probability2) return -1;
 });
 let slicedArray = probabilities.slice(0,9);
 var poissonScoreMarkup = "<table><th colspan='3'>"+ tableTitle;
 for (let j = 0; j < slicedArray.length; j++) {  
  if(slicedArray[j].home >slicedArray[j].away ) {
    resultclass = "homeWin"
  } else if(slicedArray[j].home < slicedArray[j].away ) {
    resultclass = "homeLoss"
  } else {
    resultclass = "homeDraw"
  }
  poissonScoreMarkup +=  "<tr class="+ resultclass + "><td>" + slicedArray[j].home + "</td><td>" + slicedArray[j].away + "</td><td>" + (slicedArray[j].probability2).toFixed(2) + "</td></tr>";
 }
 return poissonScoreMarkup;
}



for (var f = 0; f < leagueTablePoissonTrs.length; f++) {
  let homeTeam =   leagueTablePoissonTrs[f].childNodes[1].textContent;

  let fixturePoisson2 = calculateProbabilites2(scoreDataArray,homeTeam);
  let fixturePoisson3 = calculateProbabilites2(scoreDataArray6,homeTeam);
  //let fixturePoisson4 = calculateProbabilites2(scoreDataArrayLast3,homeTeam);

  //console.log("fixturePoisson4",fixturePoisson4)
console.log("fixturePoisson3.winP",fixturePoisson3.winP)
  leagueTablePoissonTrs[f].childNodes[5].innerHTML = "<span>" + (fixturePoisson2.winP).toFixed(2) + "<br>" + (fixturePoisson3.winP).toFixed(2) + "</span>";
  leagueTablePoissonTrs[f].childNodes[6].innerHTML = "<span>" + (fixturePoisson2.drawP).toFixed(2) + "<br>" + (fixturePoisson3.drawP).toFixed(2) + "</span>";
  leagueTablePoissonTrs[f].childNodes[7].innerHTML = "<span>" + (fixturePoisson2.lossP).toFixed(2) + "<br>" + (fixturePoisson3.lossP).toFixed(2) + "</span>";

  let el = leagueTablePoissonTrs[f].nextSibling.getElementsByClassName("poissonScores");
  //let el2 = leagueTablePoissonTrs[f].nextSibling.getElementsByClassName("poissonScoresLast6");
  //let el3 = leagueTablePoissonTrs[f].nextSibling.getElementsByClassName("poissonScoresLast3");
  //el[0].innerHTML = displayPoissonScores(scoreDataArray,homeTeam, "Season Poisson");
  //el2[0].innerHTML = displayPoissonScores(scoreDataArrayLast6,homeTeam,"Last 6 games Poisson");
  //el3[0].innerHTML = displayPoissonScores(scoreDataArrayLast3,homeTeam,"Last 3 games Poisson");
 
}




var attackMarkup = "";

  poissonTableHome2.sort(function(a, b) {
    return a.AttackAndDefence - b.AttackAndDefence;
 });
 poissonTableHome2.reverse();
for (var f = 0; f < poissonTableHome2.length; f++) {
  attackMarkup += "<tr id=" + poissonTableHome2[f].name.split(' ').join('')+"><td><span class='fixtureNumber'></span>" + poissonTableHome2[f].name  +"</td><td>" + poissonTableHome2[f].AttackStrength  +"</td><td>" + poissonTableHome2[f].DefenceStrength  +"</td><td>" + poissonTableHome2[f].AttackAndDefence  +"</td></tr>";
}


document.getElementById("homeAttackTable").innerHTML = attackMarkup;




var defenceMarkup = "";
poissonTableAway2.sort(function(a, b) {
  return a.AttackAndDefence - b.AttackAndDefence;

 });
 poissonTableAway2.reverse();
 for (var f = 0; f < poissonTableAway2.length; f++) {
  defenceMarkup += "<tr id=" + poissonTableAway2[f].name.split(' ').join('')+"><td><span class='fixtureNumber'></span>" + poissonTableAway2[f].name  +"</td><td>" + poissonTableAway2[f].AttackStrength  +"</td><td>" + poissonTableAway2[f].DefenceStrength  +"</td><td>" + poissonTableAway2[f].AttackAndDefence  +"</td></tr>";
}




var fixTable = document.getElementById('fixturesTable');
var fixTableTRs = fixTable.getElementsByClassName("show");

//for (var z = 0; z < fixTableTRs.length; z++) {
for (var z = 0; z < fixTableTRs.length; z++) {
  let homeTeam = fixTableTRs[z].childNodes[1].textContent;
  let awayTeam = fixTableTRs[z].childNodes[3].textContent;

   let homeTeamStats = poissonTableHome2.find(team => team.name == homeTeam);
   let awayTeamStats = poissonTableAway2.find(team => team.name == awayTeam);
   let b = document.createAttribute("AttackStrength");
   let c = document.createAttribute("DefenceStrength");
  let d = document.createAttribute("AttackAndDefence");
  let e = document.createAttribute("AttackStrength");
   let f = document.createAttribute("DefenceStrength");
  let g = document.createAttribute("AttackAndDefence");
  b.value = homeTeamStats.AttackStrength;
  c.value = homeTeamStats.DefenceStrength;
  d.value = homeTeamStats.AttackAndDefence;
  e.value = awayTeamStats.AttackStrength;
  f.value = awayTeamStats.DefenceStrength;
  g.value = awayTeamStats.AttackAndDefence;
  fixTableTRs[z].childNodes[1].setAttributeNode(b);
  fixTableTRs[z].childNodes[1].setAttributeNode(c);
  fixTableTRs[z].childNodes[1].setAttributeNode(d);
  fixTableTRs[z].childNodes[3].setAttributeNode(e);
  fixTableTRs[z].childNodes[3].setAttributeNode(f);
  fixTableTRs[z].childNodes[3].setAttributeNode(g);


  /*
  attackstrengthHome = parseFloat(fixTableTRs[z].childNodes[1].getAttribute("attackstrength"));
  attackstrengthAway =  parseFloat(fixTableTRs[z].childNodes[3].getAttribute("attackstrength"));
  percentage = 8;
  //console.log("> pp123",(attackstrengthHome - ((attackstrengthHome/100)*percentage)))
  //console.log("< pp123",(attackstrengthHome + ((attackstrengthHome/100)*percentage)))
  let homeTeamTest = poissonTableHome2.filter(team => team.AttackStrength > (attackstrengthHome - ((attackstrengthHome/100)*percentage)) && team.AttackStrength < (attackstrengthHome + ((attackstrengthHome/100)*percentage)));
  let awayTeamTest = poissonTableAway2.filter(team => team.AttackStrength > (attackstrengthAway - ((attackstrengthAway/100)*percentage)) && team.AttackStrength < (attackstrengthAway + ((attackstrengthAway/100)*percentage)));


  
  teams = [];
for (var j = 0; j < homeTeamTest.length; j++) {
  for (var a = 0; a < awayTeamTest.length; a++) {
    fixtureObject =  seasonFixtures.find(function(team) { return team.hName == homeTeamTest[j].name && team.aName == awayTeamTest[a].name && team.hScore !== "pp."});
    if(fixtureObject) teams.push(fixtureObject);
  }
}

testResults = [];
for (var j = 0; j < teams.length; j++) {
testResults.push(determineResultHome(teams[j], teams[j].hName, "home"));
}

testMarkup = `<table><th colspan="4">Attack > ${(attackstrengthHome - ((attackstrengthHome/100)*percentage))} && < ${(attackstrengthHome + ((attackstrengthHome/100)*percentage))} && Away >  ${(attackstrengthAway - ((attackstrengthAway/100)*percentage))} && < ${(attackstrengthAway + ((attackstrengthAway/100)*percentage))} </th>`;
for (var j = 0; j < testResults.length; j++) {
  testMarkup += `<tr class='${testResults[j].class}'><td>${testResults[j].hName}</td><td>${testResults[j].hScore}</td><td>${testResults[j].aScore}</td><td>${testResults[j].aName}</td></tr>`;
}
testMarkup += "</table>";

fixTableTRs[z].nextSibling.querySelector(".attack").innerHTML = testMarkup;
*/

//////////////////////////////////////////////////////////////////////////////////

attackstrengthHome = parseFloat(fixTableTRs[z].childNodes[1].getAttribute("attackstrength"));
  attackstrengthAway =  parseFloat(fixTableTRs[z].childNodes[3].getAttribute("attackstrength"));  

defencestrengthHome = parseFloat(fixTableTRs[z].childNodes[1].getAttribute("defencestrength"));
defencestrengthAway =  parseFloat(fixTableTRs[z].childNodes[3].getAttribute("defencestrength"));


attackDefenceHome = parseFloat(fixTableTRs[z].childNodes[1].getAttribute("attackanddefence"));
attackDefenceAway =  parseFloat(fixTableTRs[z].childNodes[3].getAttribute("attackanddefence")); 


/*
fixTableTRs[z].addEventListener('click', () => {
  
homeAttack = event.target.parentNode.childNodes[1].getAttribute("attackstrength");
homeDefence = event.target.parentNode.childNodes[1].getAttribute("defencestrength");
awayAttack = event.target.parentNode.childNodes[3].getAttribute("attackstrength");
awayDefence  = event.target.parentNode.childNodes[3].getAttribute("defencestrength");

link = "template3.html?league=england4&homeAttack="+homeAttack+"&homeDefence="+homeDefence+"&awayAttack="+awayAttack+"&awayDefence="+awayDefence;
event.target.parentNode.nextSibling.querySelector(".iframe").setAttribute("src",link);
});
*/
for (var q = 5; q < 13; q += .25) {

  percentageHomeAttack = q;
  percentageAwayAttack  = q;
  percentageHomeDefence = q;
  percentageAwayDefence = q;
  //console.log("> pp123",(attackstrengthHome - ((attackstrengthHome/100)*percentage)))
  //console.log("< pp123",(attackstrengthHome + ((attackstrengthHome/100)*percentage)))
  defencestrengthHomeGreaterThan = defencestrengthHome - ((defencestrengthHome/100)*percentageHomeDefence);
  defencestrengthAwayGreaterThan = defencestrengthAway - ((defencestrengthAway/100)*percentageAwayDefence);

  defencestrengthHomeLessThan = defencestrengthHome + ((defencestrengthHome/100)*percentageHomeDefence);
  defencestrengthAwayLessThan = defencestrengthAway + ((defencestrengthAway/100)*percentageAwayDefence);

  attackstrengthHomeGreaterThan =  attackstrengthHome - ((attackstrengthHome/100)*percentageHomeAttack);
  attackstrengthAwayGreaterThan =  attackstrengthAway - ((attackstrengthHome/100)*percentageAwayAttack);

  attackstrengthHomeLessThan =  attackstrengthHome + ((attackstrengthHome/100)*percentageHomeAttack);
  attackstrengthAwayLessThan =  attackstrengthAway + ((attackstrengthHome/100)*percentageAwayAttack);


  homeTeamTest = poissonTableHome2.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest = poissonTableAway2.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  //console.log("homeTeamTest2022 poisson",poissonTableHome2022);

  homeTeamTest21 = poissonTableHome21.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest21 = poissonTableAway21.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest20 = poissonTableHome20.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest20 = poissonTableAway20.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  
  homeTeamTest19 = poissonTableHome19.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest19 = poissonTableAway19.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest18 = poissonTableHome18.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest18 = poissonTableAway18.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest17 = poissonTableHome17.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest17 = poissonTableAway17.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest16 = poissonTableHome16.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest16 = poissonTableAway16.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest15 = poissonTableHome15.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest15 = poissonTableAway15.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest14 = poissonTableHome14.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest14 = poissonTableAway14.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest13 = poissonTableHome13.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest13 = poissonTableAway13.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest12 = poissonTableHome12.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest12 = poissonTableAway12.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  homeTeamTest11 = poissonTableHome11.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  awayTeamTest11 = poissonTableAway11.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  
  htt21 = pth21.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att21 = pta21.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt20 = pth20.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att20 = pta20.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  
  htt19 = pth19.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att19 = pta19.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt18 = pth18.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att18 = pta18.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt17 = pth17.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att17 = pta17.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt16 = pth16.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att16 = pta16.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt15 = pth15.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att15 = pta15.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt14 = pth14.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att14 = pta14.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt13 = pth13.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att13 = pta13.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt12 = pth12.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att12 = pta12.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

  htt11 = pth11.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
  att11 = pta11.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));




httv21 = pthv21.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv21 = ptav21.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv20 = pthv20.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv20 = ptav20.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));


httv19 = pthv19.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv19 = ptav19.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv18 = pthv18.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv18 = ptav18.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv17 = pthv17.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv17 = ptav17.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv16 = pthv16.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv16 = ptav16.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv15 = pthv15.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv15 = ptav15.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv14 = pthv14.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv14 = ptav14.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv13 = pthv13.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv13 = ptav13.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv12 = pthv12.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv12 = ptav12.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));

httv11 = pthv11.filter(team => team.DefenceStrength > defencestrengthHomeGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthHomeLessThan.toFixed(3) && team.AttackStrength > attackstrengthHomeGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthHomeLessThan.toFixed(3));
attv11 = ptav11.filter(team => team.DefenceStrength > defencestrengthAwayGreaterThan.toFixed(3) && team.DefenceStrength < defencestrengthAwayLessThan.toFixed(3) && team.AttackStrength > attackstrengthAwayGreaterThan.toFixed(3) && team.AttackStrength < attackstrengthAwayLessThan.toFixed(3));



  teams = [];
for (var j = 0; j < homeTeamTest.length; j++) {
  for (var a = 0; a < awayTeamTest.length; a++) {
    fixtureObject =  seasonFixtures.find(function(team) { return team.hName == homeTeamTest[j].name && team.aName == awayTeamTest[a].name && team.hScore !== "pp."});
    if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
  //  console.log("fixtureObject22",fixtureObject)
  }
}


for (var j = 0; j < homeTeamTest21.length; j++) {
    for (var a = 0; a < awayTeamTest21.length; a++) {
      fixtureObject =  seasonFixtures21.find(function(team) { return team.hName == homeTeamTest21[j].name && team.aName == awayTeamTest21[a].name && team.hScore !== "pp."});
     // console.log("fixtureObject21",fixtureObject)
    if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest21[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest21[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest21[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest21[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest21[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest21[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }


  
  for (var j = 0; j < homeTeamTest20.length; j++) {
    for (var a = 0; a < awayTeamTest20.length; a++) {
      fixtureObject =  seasonFixtures20.find(function(team) { return team.hName == homeTeamTest20[j].name && team.aName == awayTeamTest20[a].name && team.hScore !== "pp."});
    // console.log("fixtureObject20",fixtureObject)
    if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest20[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest20[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest20[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest20[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest20[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest20[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < homeTeamTest19.length; j++) {
    for (var a = 0; a < awayTeamTest19.length; a++) {
      fixtureObject =  seasonFixtures19.find(function(team) { return team.hName == homeTeamTest19[j].name && team.aName == awayTeamTest19[a].name && team.hScore !== "pp."});
 //    console.log("fixtureObject19",fixtureObject)
    if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest19[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest19[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest19[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest19[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest19[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest19[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }
  

  for (var j = 0; j < homeTeamTest18.length; j++) {
    for (var a = 0; a < awayTeamTest18.length; a++) {
      fixtureObject =  seasonFixtures18.find(function(team) { return team.hName == homeTeamTest18[j].name && team.aName == awayTeamTest18[a].name && team.hScore !== "pp."});
   // console.log("fixtureObject18",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest18[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest18[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest18[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest18[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest18[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest18[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }


  for (var j = 0; j < homeTeamTest17.length; j++) {
    for (var a = 0; a < awayTeamTest17.length; a++) {
      fixtureObject =  seasonFixtures17.find(function(team) { return team.hName == homeTeamTest17[j].name && team.aName == awayTeamTest17[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject17",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest17[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest17[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest17[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest17[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest17[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest17[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }


  for (var j = 0; j < homeTeamTest16.length; j++) {
    for (var a = 0; a < awayTeamTest16.length; a++) {
      fixtureObject =  seasonFixtures16.find(function(team) { return team.hName == homeTeamTest16[j].name && team.aName == awayTeamTest16[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject16",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest16[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest16[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest16[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest16[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest16[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest16[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < homeTeamTest15.length; j++) {
    for (var a = 0; a < awayTeamTest15.length; a++) {
      fixtureObject =  seasonFixtures15.find(function(team) { return team.hName == homeTeamTest15[j].name && team.aName == awayTeamTest15[a].name && team.hScore !== "pp."});
     // console.log("fixtureObject15",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest15[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest15[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest15[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest15[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest15[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest15[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < homeTeamTest14.length; j++) {
    for (var a = 0; a < awayTeamTest14.length; a++) {
      fixtureObject =  seasonFixtures14.find(function(team) { return team.hName == homeTeamTest14[j].name && team.aName == awayTeamTest14[a].name && team.hScore !== "pp."});
     // console.log("fixtureObject14",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest14[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest14[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest14[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest14[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest14[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest14[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }


  for (var j = 0; j < homeTeamTest13.length; j++) {
    for (var a = 0; a < awayTeamTest13.length; a++) {
      fixtureObject =  seasonFixtures13.find(function(team) { return team.hName == homeTeamTest13[j].name && team.aName == awayTeamTest13[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject13",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest13[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest13[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest13[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest13[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest13[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest13[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }
  for (var j = 0; j < homeTeamTest12.length; j++) {
    for (var a = 0; a < awayTeamTest12.length; a++) {
      fixtureObject =  seasonFixtures12.find(function(team) { return team.hName == homeTeamTest12[j].name && team.aName == awayTeamTest12[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject12",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest12[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest12[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest12[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest12[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest12[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest12[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < homeTeamTest11.length; j++) {
    for (var a = 0; a < awayTeamTest11.length; a++) {
      fixtureObject =  seasonFixtures11.find(function(team) { return team.hName == homeTeamTest11[j].name && team.aName == awayTeamTest11[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject11",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = homeTeamTest11[j].AttackStrength;
      fixtureObject.awayAttack = awayTeamTest11[a].AttackStrength;
      fixtureObject.homeDefence= homeTeamTest11[j].DefenceStrength;
      fixtureObject.awayDefence = awayTeamTest11[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = homeTeamTest11[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = awayTeamTest11[a].AttackAndDefence;
      teams.push(fixtureObject);
    }
    }
  }

t = [];

  for (var j = 0; j < htt21.length; j++) {
    for (var a = 0; a < att21.length; a++) {
      fixtureObject =  fix21.find(function(team) { return team.hName == htt21[j].name && team.aName == att21[a].name && team.hScore !== "pp."});
     // console.log("fixtureObject21",fixtureObject)
    if(fixtureObject) {
      fixtureObject.homeAttack = htt21[j].AttackStrength;
      fixtureObject.awayAttack = att21[a].AttackStrength;
      fixtureObject.homeDefence= htt21[j].DefenceStrength;
      fixtureObject.awayDefence = att21[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt21[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att21[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }


  
  for (var j = 0; j < htt20.length; j++) {
    for (var a = 0; a < att20.length; a++) {
      fixtureObject =  fix20.find(function(team) { return team.hName == htt20[j].name && team.aName == att20[a].name && team.hScore !== "pp."});
    // console.log("fixtureObject20",fixtureObject)
    if(fixtureObject) {
      fixtureObject.homeAttack = htt20[j].AttackStrength;
      fixtureObject.awayAttack = att20[a].AttackStrength;
      fixtureObject.homeDefence= htt20[j].DefenceStrength;
      fixtureObject.awayDefence = att20[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt20[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att20[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < htt19.length; j++) {
    for (var a = 0; a < att19.length; a++) {
      fixtureObject =  fix19.find(function(team) { return team.hName == htt19[j].name && team.aName == att19[a].name && team.hScore !== "pp."});
 //    console.log("fixtureObject19",fixtureObject)
    if(fixtureObject) {
      fixtureObject.homeAttack = htt19[j].AttackStrength;
      fixtureObject.awayAttack = att19[a].AttackStrength;
      fixtureObject.homeDefence= htt19[j].DefenceStrength;
      fixtureObject.awayDefence = att19[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt19[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att19[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }
  

  for (var j = 0; j < htt18.length; j++) {
    for (var a = 0; a < att18.length; a++) {
      fixtureObject =  fix18.find(function(team) { return team.hName == htt18[j].name && team.aName == att18[a].name && team.hScore !== "pp."});
   // console.log("fixtureObject18",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt18[j].AttackStrength;
      fixtureObject.awayAttack = att18[a].AttackStrength;
      fixtureObject.homeDefence= htt18[j].DefenceStrength;
      fixtureObject.awayDefence = att18[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt18[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att18[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }


  for (var j = 0; j < htt17.length; j++) {
    for (var a = 0; a < att17.length; a++) {
      fixtureObject =  fix17.find(function(team) { return team.hName == htt17[j].name && team.aName == att17[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject17",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt17[j].AttackStrength;
      fixtureObject.awayAttack = att17[a].AttackStrength;
      fixtureObject.homeDefence= htt17[j].DefenceStrength;
      fixtureObject.awayDefence = att17[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt17[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att17[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }


  for (var j = 0; j < htt16.length; j++) {
    for (var a = 0; a < att16.length; a++) {
      fixtureObject =  fix16.find(function(team) { return team.hName == htt16[j].name && team.aName == att16[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject16",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt16[j].AttackStrength;
      fixtureObject.awayAttack = att16[a].AttackStrength;
      fixtureObject.homeDefence= htt16[j].DefenceStrength;
      fixtureObject.awayDefence = att16[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt16[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att16[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < htt15.length; j++) {
    for (var a = 0; a < att15.length; a++) {
      fixtureObject =  fix15.find(function(team) { return team.hName == htt15[j].name && team.aName == att15[a].name && team.hScore !== "pp."});
     // console.log("fixtureObject15",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt15[j].AttackStrength;
      fixtureObject.awayAttack = att15[a].AttackStrength;
      fixtureObject.homeDefence= htt15[j].DefenceStrength;
      fixtureObject.awayDefence = att15[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt15[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att15[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < htt14.length; j++) {
    for (var a = 0; a < att14.length; a++) {
      fixtureObject =  fix14.find(function(team) { return team.hName == htt14[j].name && team.aName == att14[a].name && team.hScore !== "pp."});
     // console.log("fixtureObject14",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt14[j].AttackStrength;
      fixtureObject.awayAttack = att14[a].AttackStrength;
      fixtureObject.homeDefence= htt14[j].DefenceStrength;
      fixtureObject.awayDefence = att14[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt14[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att14[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }


  for (var j = 0; j < htt13.length; j++) {
    for (var a = 0; a < att13.length; a++) {
      fixtureObject =  fix13.find(function(team) { return team.hName == htt13[j].name && team.aName == att13[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject13",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt13[j].AttackStrength;
      fixtureObject.awayAttack = att13[a].AttackStrength;
      fixtureObject.homeDefence= htt13[j].DefenceStrength;
      fixtureObject.awayDefence = att13[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt13[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att13[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }
  for (var j = 0; j < htt12.length; j++) {
    for (var a = 0; a < att12.length; a++) {
      fixtureObject =  fix12.find(function(team) { return team.hName == htt12[j].name && team.aName == att12[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject12",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt12[j].AttackStrength;
      fixtureObject.awayAttack = att12[a].AttackStrength;
      fixtureObject.homeDefence= htt12[j].DefenceStrength;
      fixtureObject.awayDefence = att12[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt12[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att12[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }

  for (var j = 0; j < htt11.length; j++) {
    for (var a = 0; a < att11.length; a++) {
      fixtureObject =  fix11.find(function(team) { return team.hName == htt11[j].name && team.aName == att11[a].name && team.hScore !== "pp."});
    //  console.log("fixtureObject11",fixtureObject)
      if(fixtureObject) {
      fixtureObject.homeAttack = htt11[j].AttackStrength;
      fixtureObject.awayAttack = att11[a].AttackStrength;
      fixtureObject.homeDefence= htt11[j].DefenceStrength;
      fixtureObject.awayDefence = att11[a].DefenceStrength;
      fixtureObject.homeAttackAndDefence = htt11[j].AttackAndDefence;
      fixtureObject.awayAttackAndDefence = att11[a].AttackAndDefence;
      t.push(fixtureObject);
    }
    }
  }


 v = [];

for (var j = 0; j < httv21.length; j++) {
  for (var a = 0; a < attv21.length; a++) {
    fixtureObject =  f21.find(function(team) { return team.hName == httv21[j].name && team.aName == attv21[a].name && team.hScore !== "pp."});
   // console.log("fixtureObject21",fixtureObject)
  if(fixtureObject) {
    fixtureObject.homeAttack = httv21[j].AttackStrength;
    fixtureObject.awayAttack = attv21[a].AttackStrength;
    fixtureObject.homeDefence= httv21[j].DefenceStrength;
    fixtureObject.awayDefence = attv21[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv21[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv21[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}



for (var j = 0; j < httv20.length; j++) {
  for (var a = 0; a < attv20.length; a++) {
    fixtureObject =  f20.find(function(team) { return team.hName == httv20[j].name && team.aName == attv20[a].name && team.hScore !== "pp."});
  // console.log("fixtureObject20",fixtureObject)
  if(fixtureObject) {
    fixtureObject.homeAttack = httv20[j].AttackStrength;
    fixtureObject.awayAttack = attv20[a].AttackStrength;
    fixtureObject.homeDefence= httv20[j].DefenceStrength;
    fixtureObject.awayDefence = attv20[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv20[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv20[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}

for (var j = 0; j < httv19.length; j++) {
  for (var a = 0; a < attv19.length; a++) {
    fixtureObject =  f19.find(function(team) { return team.hName == httv19[j].name && team.aName == attv19[a].name && team.hScore !== "pp."});
//    console.log("fixtureObject19",fixtureObject)
  if(fixtureObject) {
    fixtureObject.homeAttack = httv19[j].AttackStrength;
    fixtureObject.awayAttack = attv19[a].AttackStrength;
    fixtureObject.homeDefence= httv19[j].DefenceStrength;
    fixtureObject.awayDefence = attv19[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv19[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv19[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}


for (var j = 0; j < httv18.length; j++) {
  for (var a = 0; a < attv18.length; a++) {
    fixtureObject =  f18.find(function(team) { return team.hName == httv18[j].name && team.aName == attv18[a].name && team.hScore !== "pp."});
 // console.log("fixtureObject18",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv18[j].AttackStrength;
    fixtureObject.awayAttack = attv18[a].AttackStrength;
    fixtureObject.homeDefence= httv18[j].DefenceStrength;
    fixtureObject.awayDefence = attv18[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv18[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv18[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}


for (var j = 0; j < httv17.length; j++) {
  for (var a = 0; a < attv17.length; a++) {
    fixtureObject =  f17.find(function(team) { return team.hName == httv17[j].name && team.aName == attv17[a].name && team.hScore !== "pp."});
  //  console.log("fixtureObject17",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv17[j].AttackStrength;
    fixtureObject.awayAttack = attv17[a].AttackStrength;
    fixtureObject.homeDefence= httv17[j].DefenceStrength;
    fixtureObject.awayDefence = attv17[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv17[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv17[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}


for (var j = 0; j < httv16.length; j++) {
  for (var a = 0; a < attv16.length; a++) {
    fixtureObject =  f16.find(function(team) { return team.hName == httv16[j].name && team.aName == attv16[a].name && team.hScore !== "pp."});
  //  console.log("fixtureObject16",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv16[j].AttackStrength;
    fixtureObject.awayAttack = attv16[a].AttackStrength;
    fixtureObject.homeDefence= httv16[j].DefenceStrength;
    fixtureObject.awayDefence = attv16[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv16[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv16[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}

for (var j = 0; j < httv15.length; j++) {
  for (var a = 0; a < attv15.length; a++) {
    fixtureObject =  f15.find(function(team) { return team.hName == httv15[j].name && team.aName == attv15[a].name && team.hScore !== "pp."});
   // console.log("fixtureObject15",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv15[j].AttackStrength;
    fixtureObject.awayAttack = attv15[a].AttackStrength;
    fixtureObject.homeDefence= httv15[j].DefenceStrength;
    fixtureObject.awayDefence = attv15[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv15[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv15[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}

for (var j = 0; j < httv14.length; j++) {
  for (var a = 0; a < attv14.length; a++) {
    fixtureObject =  f14.find(function(team) { return team.hName == httv14[j].name && team.aName == attv14[a].name && team.hScore !== "pp."});
   // console.log("fixtureObject14",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv14[j].AttackStrength;
    fixtureObject.awayAttack = attv14[a].AttackStrength;
    fixtureObject.homeDefence= httv14[j].DefenceStrength;
    fixtureObject.awayDefence = attv14[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv14[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv14[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}


for (var j = 0; j < httv13.length; j++) {
  for (var a = 0; a < attv13.length; a++) {
    fixtureObject =  f13.find(function(team) { return team.hName == httv13[j].name && team.aName == attv13[a].name && team.hScore !== "pp."});
  //  console.log("fixtureObject13",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv13[j].AttackStrength;
    fixtureObject.awayAttack = attv13[a].AttackStrength;
    fixtureObject.homeDefence= httv13[j].DefenceStrength;
    fixtureObject.awayDefence = attv13[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv13[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv13[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}
for (var j = 0; j < httv12.length; j++) {
  for (var a = 0; a < attv12.length; a++) {
    fixtureObject =  f12.find(function(team) { return team.hName == httv12[j].name && team.aName == attv12[a].name && team.hScore !== "pp."});
  //  console.log("fixtureObject12",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv12[j].AttackStrength;
    fixtureObject.awayAttack = attv12[a].AttackStrength;
    fixtureObject.homeDefence= httv12[j].DefenceStrength;
    fixtureObject.awayDefence = attv12[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv12[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv12[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}

for (var j = 0; j < httv11.length; j++) {
  for (var a = 0; a < attv11.length; a++) {
    fixtureObject =  f11.find(function(team) { return team.hName == httv11[j].name && team.aName == attv11[a].name && team.hScore !== "pp."});
  //  console.log("fixtureObject11",fixtureObject)
    if(fixtureObject) {
    fixtureObject.homeAttack = httv11[j].AttackStrength;
    fixtureObject.awayAttack = attv11[a].AttackStrength;
    fixtureObject.homeDefence= httv11[j].DefenceStrength;
    fixtureObject.awayDefence = attv11[a].DefenceStrength;
    fixtureObject.homeAttackAndDefence = httv11[j].AttackAndDefence;
    fixtureObject.awayAttackAndDefence = attv11[a].AttackAndDefence;
    v.push(fixtureObject);
  }
  }
}


testResults = [];
for (var j = 0; j < teams.length; j++) {
  resultObject = determineResultHome(teams[j], teams[j].hName, "home")
  resultObject.homeAttack = teams[j].homeAttack;
  resultObject.awayAttack = teams[j].awayAttack;
  resultObject.homeDefence = teams[j].homeDefence;
  resultObject.awayDefence = teams[j].awayDefence;  
  resultObject.homeAttackAndDefence = teams[j].homeAttackAndDefence;
  resultObject.awayAttackAndDefence = teams[j].awayAttackAndDefence;
  testResults.push(resultObject);
}

tr = [];
for (var j = 0; j < t.length; j++) {
    resultObject = determineResultHome(t[j], t[j].hName, "home")
    resultObject.homeAttack = t[j].homeAttack;
    resultObject.awayAttack = t[j].awayAttack;
    resultObject.homeDefence = t[j].homeDefence;
    resultObject.awayDefence = t[j].awayDefence;  
    resultObject.homeAttackAndDefence = t[j].homeAttackAndDefence;
    resultObject.awayAttackAndDefence = t[j].awayAttackAndDefence;
    tr.push(resultObject);
  }

  trv = [];
for (var j = 0; j < v.length; j++) {
    resultObject = determineResultHome(v[j], v[j].hName, "home")
    resultObject.homeAttack = v[j].homeAttack;
    resultObject.awayAttack = v[j].awayAttack;
    resultObject.homeDefence = v[j].homeDefence;
    resultObject.awayDefence = v[j].awayDefence;  
    resultObject.homeAttackAndDefence = v[j].homeAttackAndDefence;
    resultObject.awayAttackAndDefence = v[j].awayAttackAndDefence;
    trv.push(resultObject);
  }


testResults.sort(function(a, b) {
    return b.homeAttack - a.homeAttack;
      });

tr.sort(function(a, b) {
    return b.homeAttack - a.homeAttack;
      }); 

      trv.sort(function(a, b) {
    return b.homeAttack - a.homeAttack;
      }); 
var homeWins = 0;
var awayWins = 0;
var draws = 0;


testMarkup = `<table style="width: 100%;" class="pastFixtures"><tr style="background-color:#eee;"><td>${attackstrengthHome}</td><td>${defencestrengthHome}</td><td>${attackDefenceHome}</td><td colspan="4"></td><td>${attackstrengthAway}</td><td>${defencestrengthAway}</td><td>${attackDefenceAway}</td></tr>`;
for (var j = 0; j < testResults.length; j++) {
  testMarkup += `<tr class='${testResults[j].class}'><td>${testResults[j].homeAttack}</td><td>${testResults[j].homeDefence}</td><td>${testResults[j].homeAttackAndDefence}</td><td>${testResults[j].hName}</td><td>${testResults[j].hScore}</td><td>${testResults[j].aScore}</td><td>${testResults[j].aName}</td><td>${testResults[j].awayAttack}</td><td>${testResults[j].awayDefence}</td><td>${testResults[j].awayAttackAndDefence}</td></tr>`;
    if(testResults[j].class == "homeWin" || testResults[j].class == "homeWinDiff2") homeWins++;
    if(testResults[j].class == "homeLoss") awayWins++;
    if(testResults[j].class == "homeDraw") draws++;     
}
totalGames = homeWins +awayWins + draws;
homeWinP = (homeWins/totalGames*100).toFixed(2);
drawP = (draws/totalGames*100).toFixed(2);
awayWinP = (awayWins/totalGames*100).toFixed(2);

homeWinP=parseFloat(homeWinP);
drawP=parseFloat(drawP);
awayWinP=parseFloat(awayWinP);



testMarkup += "</table>";
bgColor = "#fff"

 if(homeWinP > drawP && drawP > awayWinP  ) bgColor = "#9bee8c";
 if(homeWinP < drawP && homeWinP > awayWinP  ) bgColor = "#9bee8c";
 if(awayWinP > drawP && drawP > homeWinP  ) bgColor = "#fac0cb";
 if(awayWinP < drawP && awayWinP > homeWinP  ) bgColor = "#fac0cb";
 if(homeWinP > drawP && drawP < awayWinP  ) bgColor = "#fbd600";

 function homeWinDrawOpacity(opacity) {
          if(opacity < 2.5) opacity = 0.25;
          if(opacity > 2.5 &&  opacity <5 ) opacity = 0.45;
          if(opacity > 5 &&  opacity <7.5 ) opacity = 0.77;
          if(opacity > 7.5) opacity = 1;
          return `rgba(155,238,140, ${opacity})`;
      }
  function homeLossDrawOpacity(opacity) {
          if(opacity < 2.5) opacity = 0.15;
          if(opacity > 2.5 &&  opacity <5 ) opacity = 0.4;
          if(opacity > 5 &&  opacity <7.5 ) opacity = 0.75;
          if(opacity > 7.5) opacity = 1;

     
          return `rgba(250,192,203, ${opacity})`;
      }
      function homeWinAwayWinOpacity(opacity) {
          if(opacity < 2.5) opacity = 0.15;
          if(opacity > 2.5 &&  opacity <5 ) opacity = 0.4;
          if(opacity > 5 &&  opacity <7.5 ) opacity = 0.75;
          if(opacity > 7.5) opacity = 1;
          return `rgba(140,212,238, ${opacity})`;
      }
      function drawOpacity(opacity) {
          return `rgba(254, 255, 191, 1)`;
      }

      function equal() {
          return `rgba(253,255,188,1)`;
      }



      

 if(awayWinP < drawP || awayWinP > drawP && awayWinP > homeWinP)  {
  opacity = drawP- homeWinP

  if( ((drawP - awayWinP) < 4) && ((drawP - homeWinP) < 4 )) {
    opacity = 0.1;
  }
    bgColor = homeLossDrawOpacity(opacity);
 
}





 if(homeWinP >= drawP && drawP > awayWinP  ) {
      opacity = homeWinP- awayWinP
      bgColor = homeWinDrawOpacity(opacity);
 }
 if(homeWinP < drawP && drawP > awayWinP  ) {
      opacity = homeWinP- awayWinP
      bgColor = homeWinDrawOpacity(opacity);
 }
 if(homeWinP > drawP && drawP == awayWinP ) {   
  opacity = drawP - awayWinP;
      bgColor = homeWinDrawOpacity(opacity);
 }
 if(awayWinP > drawP && homeWinP == awayWinP ) {   
  opacity = drawP- homeWinP;
      bgColor = homeLossDrawOpacity(opacity);
 }
 if(homeWinP < drawP && drawP > awayWinP &&  homeWinP == awayWinP ) {   
   bgColor = equal();
 }

 if(homeWinP < drawP && awayWinP > homeWinP  ) {
      opacity = awayWinP- homeWinP
      bgColor = homeLossDrawOpacity(opacity);
 }

 if(homeWinP > drawP && awayWinP === drawP  ) {
      opacity = awayWinP- drawP
      bgColor = homeWinDrawOpacity(opacity);
 }

 if(totalGames === 0) {     
     bgColor = "rgba(255,255,255,1)";
 }
 if(homeWinP > drawP && drawP < awayWinP  )  {
    opacity = homeWinP- drawP
  bgColor = homeWinAwayWinOpacity(opacity);
 }

totalsMarkup = `<table style="width: 100%; background-color: ${bgColor}"><th colspan="7">${league}</th><tr><td>Home wins</td><td>Draws</td><td>Away wins</td></tr><tr><td style="font-size: 28px;">${homeWins}</td><td style="font-size: 28px;">${draws}</td><td style="font-size: 28px;">${awayWins}</td></tr><tr style="background-color: lightgreen;"><td  class="homeWinP" style="font-size: 28px;">${homeWinP}</td><td  class="values" style="background-color: #feffbf;font-size: 28px;">${drawP}</td><td class="values" style="background-color: pink;font-size: 28px;">${awayWinP}</td></tr></table>`;
//fixTableTRs[z].nextSibling.querySelector(".defence1").innerHTML += testMarkup;
fixTableTRs[z].nextSibling.querySelector(".results1").innerHTML += totalsMarkup;





var homeWins = 0;
var awayWins = 0;
var draws = 0;


tm = `<table style="width: 100%;" class="pastFixtures"><tr style="background-color:#eee;"><td>${attackstrengthHome}</td><td>${defencestrengthHome}</td><td>${attackDefenceHome}</td><td colspan="4"></td><td>${attackstrengthAway}</td><td>${defencestrengthAway}</td><td>${attackDefenceAway}</td></tr>`;
  for (var j = 0; j < tr.length; j++) {
    tm += `<tr class='${tr[j].class}'><td>${tr[j].homeAttack}</td><td>${tr[j].homeDefence}</td><td>${tr[j].homeAttackAndDefence}</td><td>${tr[j].hName}</td><td>${tr[j].hScore}</td><td>${tr[j].aScore}</td><td>${tr[j].aName}</td><td>${tr[j].awayAttack}</td><td>${tr[j].awayDefence}</td><td>${tr[j].awayAttackAndDefence}</td></tr>`;
      if(tr[j].class == "homeWin" || tr[j].class == "homeWinDiff2") homeWins++;
      if(tr[j].class == "homeLoss") awayWins++;
      if(tr[j].class == "homeDraw") draws++;     
  }
  totalGames = homeWins +awayWins + draws;
homeWinP = (homeWins/totalGames*100).toFixed(2);
drawP = (draws/totalGames*100).toFixed(2);
awayWinP = (awayWins/totalGames*100).toFixed(2);

homeWinP=parseFloat(homeWinP);
drawP=parseFloat(drawP);
awayWinP=parseFloat(awayWinP);
testMarkup += "</table>";
if(homeWinP > drawP && drawP > awayWinP  ) bgColor = "#9bee8c";
 if(homeWinP < drawP && homeWinP > awayWinP  ) bgColor = "#9bee8c";
 if(awayWinP > drawP && drawP > homeWinP  ) bgColor = "#fac0cb";
 if(awayWinP < drawP && awayWinP > homeWinP  ) bgColor = "#fac0cb";
 if(homeWinP > drawP && drawP < awayWinP  ) bgColor = "#fbd600";

 if(homeWinP > drawP && drawP > awayWinP  ) {
      opacity = drawP- awayWinP
      bgColor = homeWinDrawOpacity(opacity);
 }
 if(awayWinP > homeWinP && awayWinP < drawP || awayWinP > drawP )  {
  opacity = drawP- homeWinP

  if( ((drawP - awayWinP) < 4) && ((drawP - homeWinP) < 4 )) {
    opacity = 0.1;
  }
    bgColor = homeLossDrawOpacity(opacity);
 
}

if(homeWinP > drawP && awayWinP > drawP  )  {
    opacity = homeWinP- drawP
  bgColor = homeWinAwayWinOpacity(opacity);
 }

 if(homeWinP >= drawP && drawP > awayWinP  ) {
      opacity = homeWinP- awayWinP
      bgColor = homeWinDrawOpacity(opacity);
 }
 
 if(homeWinP < drawP && drawP > awayWinP &&  homeWinP == awayWinP ) {   
      bgColor = equal();
 }

 if(homeWinP < drawP && awayWinP > homeWinP  ) {
      opacity = awayWinP- homeWinP
      bgColor = homeLossDrawOpacity(opacity);
 }
 if(totalGames === 0) {     
  bgColor = "rgba(255,255,255,1)";
 }


tsm = `<table style="width: 100%; background-color: ${bgColor}"><th colspan="7">${league2}</th><tr><td>Home wins</td><td>Draws</td><td>Away wins</td></tr><tr><td style="font-size: 28px;">${homeWins}</td><td style="font-size: 28px;">${draws}</td><td style="font-size: 28px;">${awayWins}</td></tr><tr style="background-color: lightgreen;"><td class="homeWinP" style="font-size: 28px;">${homeWinP}</td><td  class="values" style="background-color: #feffbf;font-size: 28px;">${drawP}</td><td  class="values" style="background-color: pink;font-size: 28px;">${awayWinP}</td></tr></table>`;
//fixTableTRs[z].nextSibling.querySelector(".defence2").innerHTML += tm;
fixTableTRs[z].nextSibling.querySelector(".results2").innerHTML += tsm;


var homeWins = 0;
var awayWins = 0;
var draws = 0;


tmv = `<table style="width: 100%;" class="pastFixtures"><tr style="background-color:#eee;"><td>${attackstrengthHome}</td><td>${defencestrengthHome}</td><td>${attackDefenceHome}</td><td colspan="4"></td><td>${attackstrengthAway}</td><td>${defencestrengthAway}</td><td>${attackDefenceAway}</td></tr>`;
  for (var j = 0; j < trv.length; j++) {
    tmv += `<tr class='${trv[j].class}'><td>${trv[j].homeAttack}</td><td>${trv[j].homeDefence}</td><td>${trv[j].homeAttackAndDefence}</td><td>${trv[j].hName}</td><td>${trv[j].hScore}</td><td>${trv[j].aScore}</td><td>${trv[j].aName}</td><td>${trv[j].awayAttack}</td><td>${trv[j].awayDefence}</td><td>${trv[j].awayAttackAndDefence}</td></tr>`;
      if(trv[j].class == "homeWin" || trv[j].class == "homeWinDiff2") homeWins++;
      if(trv[j].class == "homeLoss") awayWins++;
      if(trv[j].class == "homeDraw") draws++;     
  }
  totalGames = homeWins +awayWins + draws;
homeWinP = (homeWins/totalGames*100).toFixed(2);
drawP = (draws/totalGames*100).toFixed(2);
awayWinP = (awayWins/totalGames*100).toFixed(2);

homeWinP=parseFloat(homeWinP);
drawP=parseFloat(drawP);
awayWinP=parseFloat(awayWinP);

testMarkup += "</table>";
/*
if(homeWinP > drawP && drawP > awayWinP  ) bgColor = "#9bee8c";
 if(homeWinP < drawP && homeWinP > awayWinP  ) bgColor = "#9bee8c";
 if(awayWinP > drawP && drawP > homeWinP  ) bgColor = "#fac0cb";
 if(awayWinP < drawP && awayWinP > homeWinP  ) bgColor = "#fac0cb";
 if(homeWinP > drawP && drawP < awayWinP  ) bgColor = "#fbd600";
*/


if(awayWinP < drawP || awayWinP > drawP && awayWinP > homeWinP)  {
  opacity = drawP- homeWinP

  if( ((drawP - awayWinP) < 4) && ((drawP - homeWinP) < 4 )) {
    opacity = 0.1;
  }
    bgColor = homeLossDrawOpacity(opacity);
 
}

 if(homeWinP > drawP && drawP < awayWinP  )  {
    opacity = homeWinP- drawP
  bgColor = homeWinAwayWinOpacity(opacity);
 }

 if(homeWinP >= drawP && drawP > awayWinP  ) {
      opacity = homeWinP- awayWinP
      bgColor = homeWinDrawOpacity(opacity);
 }
 if(homeWinP < drawP && drawP > awayWinP  ) {
      opacity = homeWinP- awayWinP
      bgColor = homeWinDrawOpacity(opacity);
 }
 if(homeWinP < drawP && drawP > awayWinP &&  homeWinP == awayWinP ) {   
   bgColor = equal();
 }

 if(homeWinP < drawP && awayWinP > homeWinP  ) {
      opacity = awayWinP- homeWinP
      bgColor = homeLossDrawOpacity(opacity);
 }


 if(totalGames === 0) {     
     bgColor = "rgba(255,255,255,1)";
 }


tsmv = `<table style="width: 100%; background-color: ${bgColor}"><th colspan="7">${league3}</th><tr><td>Home wins</td><td>Draws</td><td>Away wins</td></tr><tr><td style="font-size: 28px;">${homeWins}</td><td style="font-size: 28px;">${draws}</td><td style="font-size: 28px;">${awayWins}</td></tr><tr style="background-color: lightgreen;"><td class="homeWinP" style="font-size: 28px;">${homeWinP}</td><td class="values" style="background-color: #feffbf;font-size: 28px;">${drawP}</td><td  class="values" style="background-color: pink;font-size: 28px;">${awayWinP}</td></tr></table>`;
//fixTableTRs[z].nextSibling.querySelector(".defence3").innerHTML += tmv;
fixTableTRs[z].nextSibling.querySelector(".results3").innerHTML += tsmv;



pastResults = fixTableTRs[z].nextSibling.querySelector(".pastResults");

container1 = pastResults.childNodes[0];
container2 = pastResults.childNodes[1];
container3 = pastResults.childNodes[2];

container1Tables = container1.querySelectorAll("table");
container2Tables = container2.querySelectorAll("table");
container3Tables = container3.querySelectorAll("table");




for(let i = 0; i < container1Tables.length; i++) {
//  console.log("container1Tables",container1Tables[i].childNodes[0].lastChild.childNodes[0])
  let homeWin1 =  container1Tables[i].childNodes[0].lastChild.childNodes[0].textContent;
  let draw1 =  container1Tables[i].childNodes[0].lastChild.childNodes[1].textContent;
  let awayWin1 =  container1Tables[i].lastChild.childNodes[2].textContent;

  let homeWin2 =  container2Tables[i].childNodes[0].lastChild.childNodes[0].textContent;
  let draw2 =  container2Tables[i].childNodes[0].lastChild.childNodes[1].textContent;
  let awayWin2 =  container2Tables[i].childNodes[0].lastChild.childNodes[2].textContent;

  let homeWin3 =  container3Tables[i].childNodes[0].lastChild.childNodes[0].textContent;
  let draw3 =  container3Tables[i].childNodes[0].lastChild.childNodes[1].textContent;
  let awayWin3 =  container3Tables[i].childNodes[0].lastChild.childNodes[2].textContent;

  let homeWin1V =  container1Tables[i].childNodes[0].childNodes[2].childNodes[0].textContent;
  let draw1V =  container1Tables[i].childNodes[0].childNodes[2].childNodes[1].textContent;
  let awayWin1V =  container1Tables[i].childNodes[0].childNodes[2].childNodes[2].textContent;

  let homeWin2V =  container2Tables[i].childNodes[0].childNodes[2].childNodes[0].textContent;
  let draw2V =  container2Tables[i].childNodes[0].childNodes[2].childNodes[1].textContent;
  let awayWin2V =  container2Tables[i].childNodes[0].childNodes[2].childNodes[2].textContent;

  let homeWin3V =  container3Tables[i].childNodes[0].childNodes[2].childNodes[0].textContent;
  let draw3V =  container3Tables[i].childNodes[0].childNodes[2].childNodes[1].textContent;
  let awayWin3V =  container3Tables[i].childNodes[0].childNodes[2].childNodes[2].textContent;
 
  var homeWinTotal = parseFloat(homeWin1V) + parseFloat(homeWin2V) + parseFloat(homeWin3V);
  var drawTotal =  parseFloat(draw1V) + parseFloat(draw2V) + parseFloat(draw3V);
  var awayWintotal = parseFloat(awayWin1V) + parseFloat(awayWin2V) + parseFloat(awayWin3V);
 /*
  var homeWinTotal = parseFloat(homeWin1V)/3 + parseFloat(homeWin2V) + parseFloat(homeWin3V)/3;
  var drawTotal =  parseFloat(draw1V)/3 + parseFloat(draw2V) + parseFloat(draw3V)/3;
  var awayWintotal = parseFloat(awayWin1V)/3 + parseFloat(awayWin2V) + parseFloat(awayWin3V)/3;

  var homeWinTotal = parseFloat(homeWin2V);
  var drawTotal =  parseFloat(draw2V);
  var awayWintotal = parseFloat(awayWin2V);
*/
 let total = homeWinTotal + drawTotal +awayWintotal;

  var homeWinPerc = (homeWinTotal/total*100).toFixed(2);
  var drawPerc = (drawTotal/total*100).toFixed(2);
  var awayWinPerc = (awayWintotal/total*100).toFixed(2);

  
  var homeWinPerc = parseFloat(homeWinPerc);
  var drawPerc =  parseFloat(drawPerc);
  var awayWinPerc = parseFloat(awayWinPerc);
  


  
   if(homeWinPerc > drawPerc && drawPerc < awayWinPerc  )  {
    if(drawPerc >awayWinPerc) {
      opacity = drawPerc- awayWinPerc;
    } else {
      opacity = awayWinPerc- drawPerc;
    }
    bgColor = homeWinAwayWinOpacity(opacity);
   }
  
   if(homeWinPerc >= drawPerc && drawPerc > awayWinPerc  ) {
        opacity = homeWinPerc- awayWinPerc
        bgColor = homeWinDrawOpacity(opacity);
   }
   if(homeWinPerc < drawPerc && drawPerc > awayWinPerc  ) {
        opacity = homeWinPerc- awayWinPerc
        bgColor = homeWinDrawOpacity(opacity);
   }
   if(homeWinPerc > drawPerc && drawPerc == awayWinPerc  ) {
        opacity = homeWinPerc- awayWinPerc
        bgColor = homeWinDrawOpacity(opacity);
   }
   /*if(awayWinPerc < drawPerc || awayWinPerc > drawPerc && awayWinPerc > homeWinPerc)  {
    opacity = drawPerc- homeWinPerc
  
    if( ((drawPerc - awayWinPerc) < 4) && ((drawPerc - homeWinPerc) < 4 )) {
      opacity = 0.1;
    }
      bgColor = homeLossDrawOpacity(opacity);
   
  }
   if(homeWinPerc < drawPerc && drawPerc > awayWinPerc &&  homeWinPerc == awayWinPerc ) {   
     bgColor = equal();
   }  
   if(totalGames === 0) {     
       bgColor = "rgba(255,255,255,1)";
   }
  
  */
   if(homeWinPerc < drawPerc && awayWinPerc > homeWinPerc  ) {
        opacity = awayWinPerc- homeWinPerc
        bgColor = homeLossDrawOpacity(opacity);
   }
  
   if(awayWinPerc > drawPerc && drawPerc == homeWinPerc  ) {
        opacity = drawPerc- homeWinPerc
        bgColor = homeLossDrawOpacity(opacity);
   }

}


fixTableTRs[z].nextSibling.querySelector(".average").innerHTML +=  `<table style="width: 100%; background-color: ${bgColor}"><th colspan="7">${league3}</th><tr><td>Home wins</td><td>Draws</td><td>Away wins</td></tr><tr><td style="font-size: 28px;">${homeWinTotal}</td><td style="font-size: 28px;">${drawTotal}</td><td style="font-size: 28px;">${awayWintotal}</td></tr><tr style="background-color: lightgreen;">       <td  class="homeWinP" style="font-size: 28px;">${homeWinPerc}</td><td class="values" style="background-color: #feffbf;font-size: 28px;">${drawPerc}</td><td  class="values" style="background-color: pink;font-size: 28px;">${awayWinPerc}</td></tr></table>`   




//let chartWinP = Array.from(fixTableTRs[z].nextSibling.querySelector(".average").querySelectorAll('.homeWinP')).map(element => element.textContent);
//console.log("chartWinP",chartWinP)

}


}


var fixTable = document.getElementById('fixturesTable');
var fixTableTRs = fixTable.getElementsByClassName("show");

for (let table of fixTableTRs) {
  table.addEventListener("click", function (event) { 

    var averageTrs = table.nextSibling.querySelectorAll(".container1 .homeWinP")
    averageArray = [];
    difference = 5
    for (var j = 0; j < averageTrs.length; j++) {  
        averageObject = new Object();
        averageObject.wins = averageTrs[j].textContent;
        averageObject.draws = averageTrs[j].nextSibling.textContent;
        averageObject.losses = averageTrs[j].nextSibling.nextSibling.textContent;
        averageObject.totalGames = parseFloat(averageTrs[j].parentNode.previousElementSibling.firstChild.textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.childNodes[1].textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.lastChild.textContent);
        averageObject.difference = 5 + (.25 * j);
        if(averageObject.totalGames > 20) {
          averageObject.bgColor = "#8cd4ee87";
        } else {
          averageObject.bgColor = "#ccc";
        }
        averageArray.push(averageObject)
    }


    //// 2


    var averageTrs = table.nextSibling.querySelectorAll(".container2 .homeWinP")
    averageArray2 = [];
    difference = 5
    for (var j = 0; j < averageTrs.length; j++) {  
        averageObject = new Object();
        averageObject.wins = averageTrs[j].textContent;
        averageObject.draws = averageTrs[j].nextSibling.textContent;
        averageObject.losses = averageTrs[j].nextSibling.nextSibling.textContent;
        averageObject.totalGames = parseFloat(averageTrs[j].parentNode.previousElementSibling.firstChild.textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.childNodes[1].textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.lastChild.textContent);
        averageObject.difference = 5 + (.25 * j);
        if(averageObject.totalGames > 20) {
          averageObject.bgColor = "#8cd4ee87";
        } else {
          averageObject.bgColor = "#ccc";
        }
        averageArray2.push(averageObject)
    }


    var averageTrs = table.nextSibling.querySelectorAll(".container3 .homeWinP")
    averageArray3 = [];
    difference = 5
    for (var j = 0; j < averageTrs.length; j++) {  
        averageObject = new Object();
        averageObject.wins = averageTrs[j].textContent;
        averageObject.draws = averageTrs[j].nextSibling.textContent;
        averageObject.losses = averageTrs[j].nextSibling.nextSibling.textContent;
        averageObject.totalGames = parseFloat(averageTrs[j].parentNode.previousElementSibling.firstChild.textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.childNodes[1].textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.lastChild.textContent);
        averageObject.difference = 5 + (.25 * j);
        if(averageObject.totalGames > 20) {
          averageObject.bgColor = "#8cd4ee87";
        } else {
          averageObject.bgColor = "#ccc";
        }
        averageArray3.push(averageObject)
    }

    var averageTrs = table.nextSibling.querySelectorAll(".average .homeWinP")
    averageArray4 = [];
    difference = 5
    for (var j = 0; j < averageTrs.length; j++) {  
        averageObject = new Object();
        averageObject.wins = averageTrs[j].textContent;
        averageObject.draws = averageTrs[j].nextSibling.textContent;
        averageObject.losses = averageTrs[j].nextSibling.nextSibling.textContent;
        averageObject.totalGames = parseFloat(averageTrs[j].parentNode.previousElementSibling.firstChild.textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.childNodes[1].textContent) + parseFloat(averageTrs[j].parentNode.previousElementSibling.lastChild.textContent);
        averageObject.difference = 5 + (.25 * j);
        if(averageObject.totalGames > 20) {
          averageObject.bgColor = "#8cd4ee87";
        } else {
          averageObject.bgColor = "#ccc";
        }
        averageArray4.push(averageObject)
    }
     
      (async function() {


        new Chart(
          table.nextSibling.querySelector('.myChart2'),
          {
            type: 'line',
            data: {              
              labels: averageArray.map(row => row.difference),
              datasets: [
                {
                  label: 'Win percentage',
                  data: averageArray.map(row => row.wins),
                  borderColor: "green",
                  borderWidth: 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Draw percentage',
                  data: averageArray.map(row => row.draws),
                  borderColor: "gold",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Loss percentage',
                  data: averageArray.map(row => row.losses),
                  borderColor: "red",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  type: 'bar',
                  label: 'No. of games',
                  data: averageArray.map(row => row.totalGames),
                  yAxisID: 'B',
                  backgroundColor :  averageArray.map(row => row.bgColor)
              },
                
              ]
            },
            options: {
                  responsive: true,
                  scales: {
                    A: {
                      type: 'linear',
                      position: 'left',
                      min: 0,
                      max: 100,
                      ticks: {
                         beginAtZero: true,
                         stepSize: 10,
                         font: {
                                size: 18
                            }
                         }
                    },
                    B: {
                      type: 'linear',
                      position: 'right',
                      ticks: { 
                        beginAtZero: true,
                        font: {
                                size: 18
                            }
                      
                      },
                      grid: { display: false }
                    }
                  }
                }
          }
        );

        new Chart(
          table.nextSibling.querySelector('.myChart'),
          {
            type: 'line',
            data: {              
              labels: averageArray2.map(row => row.difference),
              datasets: [
                {
                  label: 'Win percentage',
                  data: averageArray2.map(row => row.wins),
                  borderColor: "green",
                  borderWidth: 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Draw percentage',
                  data: averageArray2.map(row => row.draws),
                  borderColor: "gold",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Loss percentage',
                  data: averageArray2.map(row => row.losses),
                  borderColor: "red",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  type: 'bar',
                  label: 'No. of games',
                  data: averageArray2.map(row => row.totalGames),
                  yAxisID: 'B',
                  backgroundColor :  averageArray2.map(row => row.bgColor)
              },
                
              ]
            },
            options: {
                  responsive: true,
                  scales: {
                    A: {
                      type: 'linear',
                      position: 'left',
                      min: 0,
                      max: 100,
                      ticks: {
                         beginAtZero: true,
                         stepSize: 10,
                         font: {
                                size: 18
                            }
                         }
                    },
                    B: {
                      type: 'linear',
                      position: 'right',
                      ticks: { 
                        beginAtZero: true,
                        font: {
                                size: 18
                            }
                      
                      },
                      grid: { display: false }
                    }
                  }
                }
          }
        );
        new Chart(
          table.nextSibling.querySelector('.myChart3'),
          {
            type: 'line',
            data: {              
              labels: averageArray3.map(row => row.difference),
              datasets: [
                {
                  label: 'Win percentage',
                  data: averageArray3.map(row => row.wins),
                  borderColor: "green",
                  borderWidth: 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Draw percentage',
                  data: averageArray3.map(row => row.draws),
                  borderColor: "gold",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Loss percentage',
                  data: averageArray3.map(row => row.losses),
                  borderColor: "red",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  type: 'bar',
                  label: 'No. of games',
                  data: averageArray3.map(row => row.totalGames),
                  yAxisID: 'B',
                  backgroundColor :  averageArray3.map(row => row.bgColor)
              },
                
              ]
            },
            options: {
                  responsive: true,
                  scales: {
                    A: {
                      type: 'linear',
                      position: 'left',
                      min: 0,
                      max: 100,
                      ticks: {
                         beginAtZero: true,
                         stepSize: 10,
                         font: {
                                size: 18
                            }
                         }
                    },
                    B: {
                      type: 'linear',
                      position: 'right',
                      ticks: { 
                        beginAtZero: true,
                        font: {
                                size: 18
                            }
                      
                      },
                      grid: { display: false }
                    }
                  }
                }
          }
        );
        new Chart(
          table.nextSibling.querySelector('.myChart4'),
          {
            type: 'line',
            data: {              
              labels: averageArray4.map(row => row.difference),
              datasets: [
                {
                  label: 'Win percentage',
                  data: averageArray4.map(row => row.wins),
                  borderColor: "green",
                  borderWidth: 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Draw percentage',
                  data: averageArray4.map(row => row.draws),
                  borderColor: "gold",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  label: 'Loss percentage',
                  data: averageArray4.map(row => row.losses),
                  borderColor: "red",
                  borderWidth : 3,
                  yAxisID: 'A'
                },
                {
                  type: 'bar',
                  label: 'No. of games',
                  data: averageArray4.map(row => row.totalGames),
                  yAxisID: 'B',
                  backgroundColor :  averageArray4.map(row => row.bgColor)
              },
                
              ]
            },
            options: {
                  responsive: true,
                  scales: {
                    A: {
                      type: 'linear',
                      position: 'left',
                      min: 0,
                      max: 100,
                      ticks: {
                         beginAtZero: true,
                         stepSize: 10,
                         font: {
                                size: 18
                            }
                         }
                    },
                    B: {
                      type: 'linear',
                      position: 'right',
                      ticks: { 
                        beginAtZero: true,
                        font: {
                                size: 18
                            }
                      
                      },
                      grid: { display: false }
                    }
                  }
                }
          }
        );
      })();

      fixtueRow = table.nextSibling.querySelector('.myChart').closest("#grid").previousElementSibling;
      table.nextSibling.querySelector('.myChart').id = fixtueRow.childNodes[1].id + "" + fixtueRow.childNodes[3].id;

   });

}


function saveCharts() {
  var charts = document.querySelectorAll('.myChart');
  for (var i = 0; i < charts.length; i++) {
    var chart = charts[i];
    // Get the canvas element from the chart element
    var canvas = chart.getContext('2d').canvas;
    // Get the data URI of the image
    var dataURI = canvas.toDataURL();
    // Create an image element with the data URI
    var img = document.createElement('img');
    img.src = dataURI;
    // Append the image to the document
    document.body.appendChild(img);
    var link = document.createElement('a');
    // Set the href attribute to the data URI of the image
    link.href = dataURI;
    // Set the download attribute to the id attribute of the chart element
    link.download = chart.id;
    // Append the link to the document
    document.body.appendChild(link);
    // Click the link to download the image
    link.click();
  }
}
document.querySelector('#save-charts').addEventListener('click', function (event) { 
  saveCharts();
});

function getPastResults(element) {


      let tables = element.querySelectorAll('.pastResults .results1 table');
      tablesArray = [];
      for (let table of tables) {
        let title = table.querySelector('th').textContent;
        let percentageCells = table.querySelectorAll('.values');
       // console.log("percentageCells",percentageCells)
        let percentages = Array.from(percentageCells).map(cell => cell.textContent);
        let [homeWinPercentage, drawPercentage, awayWinPercentage] = percentages;
        tablesArray.push(percentages);
   //     console.log(`For league ${title}, the highest percentage is:`);
  
      }
    //  console.log("tablesArray",tablesArray)
   // console.log(tablesArray);
      tablesArray2 = [];
      let tables2 = element.querySelectorAll('.pastResults .results2 table');
      for (let table of tables2) {
        let title = table.querySelector('th').textContent;
        let percentageCells = table.querySelectorAll('.values');
        let percentages = Array.from(percentageCells).map(cell => cell.textContent);
        let [homeWinPercentage, drawPercentage, awayWinPercentage] = percentages;
        tablesArray2.push(percentages);
   //     console.log(`For league ${title}, the highest percentage is:`);
      
      } // console.log(tablesArray2);
  //    console.log("tablesArray2",tablesArray2)
      tablesArray3= [];
      let tables3 = element.querySelectorAll('.pastResults .results3 table');
      for (let table of tables3) {
        let title = table.querySelector('th').textContent;
        let percentageCells = table.querySelectorAll('.values');
        let percentages = Array.from(percentageCells).map(cell => cell.textContent);
        let [homeWinPercentage, drawPercentage, awayWinPercentage] = percentages;
        tablesArray3.push(percentages);
    //    console.log(`For league ${title}, the highest percentage is:`);
      
      }
    //  console.log("tablesArray3",tablesArray3);
 //console.log(tablesArray3);



}
      





var fixTable = document.getElementById('fixturesTable');
var fixTableTRs = fixTable.getElementsByClassName("show");

for (let table of fixTableTRs) {

  table.addEventListener("click", function (event) { 
    console.log("clicked");
    getPastResults(event.target.parentNode.nextElementSibling) 
   });

}

document.getElementById("awayDefenceTable").innerHTML = defenceMarkup;

var fixTable = document.getElementById('fixturesTable');
var fixTableTRs = fixTable.querySelectorAll("#grid");
//console.log("fixTableTRs",fixTableTRs)

for (var j = 0; j < fixTableTRs.length; j++) {  
  let last6GamesHometeamTableTrs = fixTableTRs[j].querySelector("#last6Home").getElementsByTagName("tr");
  adjustmentsArray = [];
  adjustmentsObject = new Object();
  adjustmentsObject.winAdjusment = 0;
  adjustmentsObject.drawAdjusment = 0;
  adjustmentsObject.LossAdjusment = 0

  let expectedPoints = 0;
  let realisedPoints = 0;

  for (var t = 1; t < last6GamesHometeamTableTrs.length; t++) {  
      var poissonPredictionHomeTeam = last6GamesHometeamTableTrs[t].childNodes[0].textContent;
      var poissonPredictionAwayTeam = last6GamesHometeamTableTrs[t].childNodes[3].textContent;
      
      let poissonTableHomeSingle = calcAttackDefenceTableSingle(homeDrawTableTrs, "home",t)
      let poissonTableAwaySingle = calcAttackDefenceTableSingle(homeDrawTableTrs, "away",t)

      poissonTableHomeSingle2 = calcAttackDefenceTableAgain(homeDrawTableTrs, "home",poissonTableAwaySingle);
      poissonTableAwaySingle2 = calcAttackDefenceTableAgain(homeDrawTableTrs, "away",poissonTableHomeSingle);
      
     let scoreDataArraySingle =  scoreDataSingle(poissonTableHomeSingle2,poissonTableAwaySingle2,poissonPredictionHomeTeam ,poissonPredictionAwayTeam);
     let testPastGames =  calculateProbabilites2(scoreDataArraySingle,poissonPredictionHomeTeam);
   //  console.log("testPastGames",testPastGames);
     last6GamesHometeamTableTrs[t].childNodes[4].textContent = (testPastGames.winP).toFixed(2) + " " + (testPastGames.drawP).toFixed(2)  + " " + (testPastGames.lossP).toFixed(2);//+ " " + testPastGames.score1 + " " + testPastGames.score2 + " " + testPastGames.score3;
      let result = last6GamesHometeamTableTrs[t].className;

    expectedResults = [
      { result: "homeWin", value: (testPastGames.winP).toFixed(2) },
      { result: "homeDraw", value: (testPastGames.drawP).toFixed(2) },
      { result: "homeLoss", value: (testPastGames.lossP).toFixed(2) }
  ]
  expectedResults.sort(function(a, b) {
    return b.value - a.value;
      });



      if( expectedResults[0].result  === "homeWin" ) expectedPoints += 3;
 if( expectedResults[0].result  === "homeDraw" ) expectedPoints += 1;
if( expectedResults[0].result  === "homeLoss" ) expectedPoints += 0;


      oldTextContent =  last6GamesHometeamTableTrs[t].childNodes[0].textContent




if (result === "homeWin"  && expectedResults[0].result === "homeWin" || result === "homeDraw"  && expectedResults[1].result === "homeDraw") {

    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺🡺🡺 " + oldTextContent;

  let a = document.createAttribute("correct");
  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);



    realisedPoints+=3;
  } 
  else if (result === "homeWinDiff2" && expectedResults[0].result == "homeWin") {

    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺 " + oldTextContent;
  let a = document.createAttribute("correct");  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);
    realisedPoints+=3;
   
  }     
  else if (result === "homeWinDiff2" && expectedResults[0].result == "homeDraw" || result === "homeWinDiff2" && expectedResults[1].result == "homeWinDiff2") {
    realisedPoints+=3;
last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺🡺🡺 " + oldTextContent;

}   
  
  else if (result === "homeWin" && expectedResults[0].result == "homeLoss") {
    realisedPoints+=3;
last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡹 " + oldTextContent;

} 
  else if (result === "homeWinDiff2" && expectedResults[0].result === "homeLoss") {
    realisedPoints+=3;
    let adjustmentHomeWin =  expectedResults.find(({ result }) => result == "homeWin");
    let adjustmentHomeDraw =  expectedResults.find(({ result }) => result == "homeDraw");
    let adjustmentHomeLoss = expectedResults.find(({ result }) => result == "homeLoss");
    //poisssonAdjustment = (adjustmentHomeLoss.value - adjustmentHomeWin.value) / 2;
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡹 " + oldTextContent;
   
  } 
  else if (result === "homeDraw"  && expectedResults[0].result === "homeLoss") {
    realisedPoints+=1;
    let adjustmentHomeDraw =  expectedResults.find(({ result }) => result == "homeDraw");
    let adjustmentHomeLoss = expectedResults.find(({ result }) => result == "homeLoss");
    //poisssonAdjustment = (adjustmentHomeLoss.value - adjustmentHomeDraw.value) / 2;
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡽 "+ oldTextContent;

  } 
  else if (result === "homeLoss"  && expectedResults[0].result === "homeLoss" || result === "homeLoss"  && expectedResults[1].result === "homeLoss") {
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺🡺🡺 " + oldTextContent;
  let a = document.createAttribute("correct");  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);
  } 
  else if (result === "homeWin"  && expectedResults[0].result === "homeDraw") {
    realisedPoints+=3;
    let adjustmentHomeWin =  expectedResults.find(({ result }) => result == "homeDraw");
    let adjustmentHomeLoss = expectedResults.find(({ result }) => result == "homeWin");

    //poisssonAdjustment = adjustmentHomeWin.value - adjustmentHomeLoss.value
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡽 " + oldTextContent;


  }  
   else if (result === "homeLoss"  && expectedResults[0].result === "homeWin") {
     let adjustmentHomeWin =  expectedResults.find(({ result }) => result == "homeWin");
    let adjustmentHomeLoss = expectedResults.find(({ result }) => result == "homeLoss");
    //poisssonAdjustment = adjustmentHomeWin.value - adjustmentHomeLoss.value
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡻 " + oldTextContent;


   
  }  
   else if (result === "homeDraw"  && expectedResults[0].result === "homeWin") {
    realisedPoints+=1;
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡾 " + oldTextContent;
    let adjustmentHomeWin =  expectedResults.find(({ result }) => result == "homeWin");
    let adjustmentHomeDraw=  expectedResults.find(({ result }) => result == "homeDraw");
    let adjustmentHomeLoss = expectedResults.find(({ result }) => result == "homeLoss");
    //poisssonAdjustment = (adjustmentHomeWin.value - adjustmentHomeDraw.value)/2;
    //console.log("poisssonAdjustment",poisssonAdjustment);
    //adjustmentsObject.drawAdjusment = parseFloat(adjustmentsObject.drawAdjusment) +  parseFloat(poisssonAdjustment);
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡾 " + oldTextContent;

  } 
  else if (result === "homeDraw"  && expectedResults[0].result === "homeDraw") {
    realisedPoints+=1;
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺 " + oldTextContent;
  let a = document.createAttribute("correct");  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);
  }   else if (result === "homeLoss"  && expectedResults[0].result === "homeDraw") {
    let adjustmentHomeWin =  expectedResults.find(({ result }) => result == "homeWin");
    let adjustmentHomeDraw =  expectedResults.find(({ result }) => result == "homeDraw");
    let adjustmentHomeLoss = expectedResults.find(({ result }) => result == "homeLoss");
   // poisssonAdjustment = (adjustmentHomeDraw.value - adjustmentHomeLoss.value) / 2;
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡾 " + oldTextContent;

  } 
  }
/*
  let sp1 = document.createElement("tr");
  let sp2 = document.createElement("td");
  sp2.setAttribute("colspan",5)
  let sp3 = document.createTextNode(`${realisedPoints}` + " / " + `${expectedPoints}`);

  sp1.appendChild(sp2);
  sp2.appendChild(sp3);
where =  fixTableTRs[j].querySelector("#last6Home").childNodes[0];
where.insertBefore(sp1,where.nextSibling)
//expectedPoints 
  //realisedPoints+=3;
*/
  /*
  let homeTeam = poissonPredictionHomeTeam.replace(/\s/g, '');

  oldPoissonWinValue =   document.getElementById("fixturesTable").querySelector(`#${homeTeam}`).querySelector(".poissonHomeWin").firstChild.textContent;
  oldPoissonDrawValue =  document.getElementById("fixturesTable").querySelector(`#${homeTeam}`).querySelector(".poissonDraw").firstChild.textContent;
  oldPoissonLossValue =   document.getElementById("fixturesTable").querySelector(`#${homeTeam}`).querySelector(".poissonAwayWin").firstChild.textContent;
  console.log("adjustmentsObject.drawAdjusment",adjustmentsObject.drawAdjusment)
  if(adjustmentsObject.drawAdjusment > 0) {
    newPoissonWinValue = parseFloat(oldPoissonWinValue) - ((parseFloat(adjustmentsObject.drawAdjusment)/6) /2) ;
    newPoissonDrawValue = parseFloat(oldPoissonDrawValue) + ((parseFloat(adjustmentsObject.drawAdjusment) /6)/2) ;
    //nwqPoissonWinValue  = oldPoissonWinValue + adjustmentsObject.drawAdjusment;;
    document.getElementById("fixturesTable").querySelector(`#${homeTeam}`).querySelector(".poissonDraw").firstChild.textContent = oldPoissonDrawValue + " / " + parseFloat(newPoissonDrawValue).toFixed(2);
    document.getElementById("fixturesTable").querySelector(`#${homeTeam}`).querySelector(".poissonHomeWin").firstChild.textContent = oldPoissonWinValue + " / " + parseFloat(newPoissonWinValue).toFixed(2);
  }
  */
}




for (var j = 0; j < fixTableTRs.length; j++) {  
  let last6GamesHometeamTableTrs = fixTableTRs[j].querySelector("#last6AwayTable").getElementsByTagName("tr");

  for (var t = 1; t < last6GamesHometeamTableTrs.length; t++) {  
      let poissonPredictionHomeTeam = last6GamesHometeamTableTrs[t].childNodes[0].textContent;
      let poissonPredictionAwayTeam = last6GamesHometeamTableTrs[t].childNodes[3].textContent;

      let poissonTableHomeSingle = calcAttackDefenceTableSingle(homeDrawTableTrs, "home",t)
      let poissonTableAwaySingle = calcAttackDefenceTableSingle(homeDrawTableTrs, "away",t)
      
      poissonTableHomeSingle2 = calcAttackDefenceTableAgain(homeDrawTableTrs, "home",poissonTableAwaySingle);
      poissonTableAwaySingle2 = calcAttackDefenceTableAgain(homeDrawTableTrs, "away",poissonTableHomeSingle);
      
     let scoreDataArraySingle =  scoreDataSingle(poissonTableHomeSingle2,poissonTableAwaySingle2,poissonPredictionHomeTeam ,poissonPredictionAwayTeam);
     let testPastGames =  calculateProbabilites2(scoreDataArraySingle,poissonPredictionHomeTeam);
    // console.log("testPastGames",testPastGames);
     last6GamesHometeamTableTrs[t].childNodes[4].textContent = (testPastGames.winP).toFixed(2) + " " + (testPastGames.drawP).toFixed(2)  + " " +(testPastGames.lossP).toFixed(2);

     let result = last6GamesHometeamTableTrs[t].className;

expectedResults = [
  { result: "homeWin", value: (testPastGames.winP).toFixed(2) },
  { result: "homeDraw", value: (testPastGames.drawP).toFixed(2) },
  { result: "homeLoss", value: (testPastGames.lossP).toFixed(2) }
]
expectedResults.sort(function(a, b) {
return b.value - a.value;
  });
 // console.log("expectedResults",poissonPredictionHomeTeam, expectedResults)


  oldTextContent =  last6GamesHometeamTableTrs[t].childNodes[0].textContent

  if(result === "awayWin"  && expectedResults[0].result  === "homeLoss" ) {
   // if(poissonPredictionHomeTeam == "Hereford Utd") console.log("expectedResults Hereford 1",expectedResults)
 //   if(poissonPredictionHomeTeam == "Bradford PA") console.log("expectedResults Bradford PA 1",expectedResults)    
  last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺 " + oldTextContent;
  let a = document.createAttribute("correct");  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);

  }  

  if (result === "awayWin" && expectedResults[0].result === "homeWin") {
   // if(poissonPredictionHomeTeam == "Hereford Utd") console.log("expected Hereford 2",expectedResults)
   // if(poissonPredictionHomeTeam == "Bradford PA") console.log("expectedResults Bradford PA 2",expectedResults)
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡹 " + oldTextContent;

  } 

  
  if(result === "awayWinDiff2"  && expectedResults[0].result  === "homeLoss" ) {
   // if(poissonPredictionHomeTeam == "Hereford Utd") console.log("expectedResults Hereford 1",expectedResults)
  //  if(poissonPredictionHomeTeam == "Bradford PA") console.log("expectedResults Bradford PA 1",expectedResults)    
  last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺  " + oldTextContent;
  let a = document.createAttribute("correct");  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);
  }  

  if (result === "awayWinDiff2" && expectedResults[0].result === "homeWin") {
   //if(poissonPredictionHomeTeam == "Hereford Utd") console.log("expected Hereford 2",expectedResults)
  //  if(poissonPredictionHomeTeam == "Bradford PA") console.log("expectedResults Bradford PA 2",expectedResults)
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡹 " + oldTextContent;
  } 
  if (result === "awayWin" && expectedResults[0].result === "homeDraw") {
  //  if(poissonPredictionHomeTeam == "Hereford Utd") console.log("expected Hereford 2",expectedResults)
  //  if(poissonPredictionHomeTeam == "Bradford PA") console.log("expectedResults Bradford PA 2",expectedResults)
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡽 " + oldTextContent;
  } 

  if (result === "awayWinDiff2" && expectedResults[0].result === "homeDraw") {
  //  if(poissonPredictionHomeTeam == "Hereford Utd") console.log("expected Hereford 2",expectedResults)
   // if(poissonPredictionHomeTeam == "Bradford PA") console.log("expectedResults Bradford PA 2",expectedResults)
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡽 " + oldTextContent;
  } 

   if(result == "awayLoss" && expectedResults[0].result  == "homeWin" ) {
  last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺 " + oldTextContent;
  let a = document.createAttribute("correct");  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);
  }  
   if(result == "awayDraw" && expectedResults[0].result  == "homeWin" ) {
  last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡽 " + oldTextContent;
  } 
   if(result == "awayDraw" && expectedResults[0].result  == "homeLoss" ) {
  last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡻 " + oldTextContent;
  }  
   if(result == "awayLoss" && expectedResults[0].result  == "homeLoss" ) {
  last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡻 " + oldTextContent;
  }     



   if (result == "awayDraw"  && expectedResults[0].result == "homeDraw") {
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡺 " + oldTextContent;
  let a = document.createAttribute("correct");  a.value = "true";
  last6GamesHometeamTableTrs[t].setAttributeNode(a);
  } 
   if (result == "awayLoss"  && expectedResults[0].result == "homeDraw") {
    last6GamesHometeamTableTrs[t].childNodes[0].textContent = "🡾 " + oldTextContent;
  } 
  

  
  }
}

/*
var fixTableTRs = document.getElementById('fixturesTable').querySelectorAll("#grid");
var correctTeamArray = [];
//console.log("fixTableTRs",fixTableTRs)
for (var j = 0; j < fixTableTRs.length; j++) {  
  let last6GamesHometeamTableTrs = fixTableTRs[j].querySelector("#last6Home").getElementsByTagName("tr");
  //console.log("last6GamesHometeamTableTrs",last6GamesHometeamTableTrs)

  correctTeam = new Object();

  correctTeam.counter = 0;
  for (var t = 1; t < last6GamesHometeamTableTrs.length; t++) {  
    correctTeam.name = last6GamesHometeamTableTrs[t].childNodes[0].textContent;
    correctTeam.name = correctTeam.name.replace(/🡹|🡺|🡾|🡻/g, '')
    correctTeam.name = correctTeam.name.replace(/\s/g, '');
        if(last6GamesHometeamTableTrs[t].getAttribute("correct") == "true") {
          correctTeam.counter++;
        }
  }
  correctTeamArray.push(correctTeam);
}

correctTeamArray.sort(function(a, b) {
  return b.counter - a.counter;
 });


//console.log("correctTeamArray",correctTeamArray)

var  predictionMarkup = "";
 for (var j = 0; j < correctTeamArray.length; j++) {  
  predictionMarkup += `<tr id="${correctTeamArray[j].name}"><td>${correctTeamArray[j].name}</td><td>${correctTeamArray[j].counter}</td></tr>`;
 }


 document.getElementById("predictionsHome").innerHTML = predictionMarkup;






 var fixTableTRs = document.getElementById('fixturesTable').querySelectorAll("#grid");
var correctTeamArrayAway = [];
//console.log("fixTableTRs",fixTableTRs)
for (var j = 0; j < fixTableTRs.length; j++) {  
  let last6GamesHometeamTableTrs = fixTableTRs[j].querySelector("#last6AwayTable").getElementsByTagName("tr");
  //console.log("last6GamesHometeamTableTrs",last6GamesHometeamTableTrs)

  correctTeam = new Object();

  correctTeam.counter = 0;
  for (var t = 1; t < last6GamesHometeamTableTrs.length; t++) {  
    correctTeam.name = last6GamesHometeamTableTrs[t].childNodes[3].textContent;
    correctTeam.name = correctTeam.name.replace(/[^\ -~]+/g, '');
        if(last6GamesHometeamTableTrs[t].getAttribute("correct") == "true") {
          correctTeam.counter++;
        }
  }
  correctTeamArrayAway.push(correctTeam);
}

correctTeamArrayAway.sort(function(a, b) {
  return b.counter - a.counter;
 });



var  predictionMarkup = "";
 for (var j = 0; j < correctTeamArray.length; j++) {  
  predictionMarkup += `<tr><td>${correctTeamArrayAway[j].name}</td><td>${correctTeamArrayAway[j].counter}</td></tr>`;
 }


 document.getElementById("predictionsAway").innerHTML = predictionMarkup;
*/
 var fixTable = document.getElementById('fixturesTable');
var fixTableTRs = fixTable.getElementsByClassName("show");

 predictionsHomeTRs = document.getElementById("predictionsHome").getElementsByTagName("tr");
 predictionsAwayTRs = document.getElementById("predictionsAway").getElementsByTagName("tr");
       

 for (var j = 0; j < fixTableTRs.length; j++) {
        fixTableTRs[j].addEventListener("mouseover", function(e) {   
     //     console.log("Yes", e.currentTarget.id);
            for (var p = 0; p < predictionsHomeTRs.length; p++) {

            if (predictionsHomeTRs[p].id == e.currentTarget.id) {
            
              predictionsHomeTRs[p].style.backgroundColor = "red";
            } 
            }
        })
            };
            for (var j = 0; j < fixTableTRs.length; j++) {
        fixTableTRs[j].addEventListener("mouseout", function(e) {   
      //    console.log("Yes", e.currentTarget.id);
            for (var p = 0; p < predictionsHomeTRs.length; p++) {

            if (predictionsHomeTRs[p].id == e.currentTarget.id) {
            
              predictionsHomeTRs[p].style.backgroundColor = "white";
            } 
            }
        })
            };


            for (var j = 0; j < fixTableTRs.length; j++) {
        fixTableTRs[j].addEventListener("mouseover", function(e) {   
     //     console.log("Yes", e.currentTarget.id);
            for (var p = 0; p < predictionsAwayTRs.length; p++) {

            if (predictionsAwayTRs[p].id == e.currentTarget.id) {
            
              predictionsAwayTRs[p].style.backgroundColor = "red";
            } 
            }
        })
            };
            for (var j = 0; j < fixTableTRs.length; j++) {
        fixTableTRs[j].addEventListener("mouseout", function(e) {   
       //   console.log("Yes", e.currentTarget.id);
            for (var p = 0; p < predictionsAwayTRs.length; p++) {

            if (predictionsAwayTRs[p].id == e.currentTarget.id) {
            
              predictionsAwayTRs[p].style.backgroundColor = "white";
            } 
            }
        })
            };



//console.log("variance", math.std( poissonTableHome.map(row => parseFloat(row.AttackAndDefence))));


//const ctx = document.getElementById('myChart');

/*
(async function() {
  const data = [
    { x: poissonTableAwayLast6.map(row => row.AttackStrength),
      y: poissonTableAwayLast6.map(row => row.DefenceStrength) }
  ];

  new Chart(
    document.getElementById('myChart'),
    {
      type: 'scatter',
      data: {
        labels: data.map(row => row.AttackStrength),
        datasets: [
          {
            label: 'Acquisitions by year',
            data: data.map(row => row.AttackStrength)
          }
        ]
      }
    }
  );
})();

*/



//testArray  = poissonTableAway2Last6.map(row => row.AttackStrength);
//console.log("testArray",testArray)

//const canvas = document.getElementById('myChart')
//const chart = new Chart(canvas, config)


/*
const data = {
  labels: [
    'Red',
    'Green',
    'Yellow',
    'Grey',
    'Blue'
  ],
  datasets: [{
    label: 'My First Dataset',
    data: [11, 16, 7, 3, 14],
    backgroundColor: [
      'rgb(255, 99, 132)',
      'rgb(75, 192, 192)',
      'rgb(255, 205, 86)',
      'rgb(201, 203, 207)',
      'rgb(54, 162, 235)'
    ]
  }]
};


const canvas = document.getElementById('myChart')
const chart = new Chart(canvas, config)



*/








 let buttons = document.querySelectorAll(".save");
for(let i = 0; i < buttons.length; i++) {
    buttons[i].addEventListener("click", saveGame);
}
checkSavedGames();
displaySavedGames();

var queryString = window.location.search;
var urlParams = new URLSearchParams(queryString);
var savedGameParam = urlParams.get('savedgame')

let savedGameInterval = setInterval(function() {
    if (savedGameParam) {
        rows = document.getElementById("fixturesTable").getElementsByTagName("tr");
        if (rows) {
            for (let i = 0; i < rows.length; i++) {
                if (rows[i].id == savedGameParam) rows[i].click();
            }
            clearInterval(savedGameInterval);
        }
    } else {
        clearInterval(savedGameInterval);
    }
}, 100)
}






document.addEventListener('DOMContentLoaded', function(event) {
   var intervalID = window.setInterval(myCallback, 50);

   function myCallback() {
      homeMatches = document.querySelectorAll(".hm");
  for (i = 0; i < homeMatches.length; i++) {
    homeMatches[i].classList.toggle("hideAway");
  }
  homeMatches = document.querySelectorAll(".am");
  for (i = 0; i < homeMatches.length; i++) {
    homeMatches[i].classList.toggle("hideHome");
  }


var fixTable = document.getElementById('fixturesTable');
var fixTableTRs = fixTable.getElementsByClassName("show");
//console.log("fixTableTRs.length",fixTableTRs.length);

if(fixTableTRs.length>0) clearInterval(intervalID);

 for (var j = 0; j < fixTableTRs.length; j++) {  
//console.log(fixTableTRs.length)
fixTableTRs[j].addEventListener("click", function(e) {
  this.nextSibling.classList.toggle('show');
  var gridTable =  this.nextSibling


last6HomeTable = gridTable.childNodes[1].childNodes[0].childNodes[0];
last6AwayTable = gridTable.childNodes[1].childNodes[0].childNodes[1];
last6GamesHometeamTable = gridTable.childNodes[1].childNodes[1].firstElementChild; 
last6GamesAwayteamTable = gridTable.childNodes[1].childNodes[1].lastElementChild; 

last6HomeTRs = last6HomeTable.getElementsByTagName("tr");
var leagueTable = document.getElementById('leagueTable');
var leagueTableTRs = leagueTable.getElementsByTagName("tr");
var last6HomeOpp = last6HomeTable.getElementsByClassName("oppo");
th = last6HomeTable.getElementsByTagName("th");
//console.log(th);
last6AwayTRs = last6AwayTable.getElementsByTagName("tr");
var leagueTable = document.getElementById('leagueTable');
var leagueTableTRs = leagueTable.getElementsByTagName("tr");
var last6AwayOpp = last6AwayTable.getElementsByClassName("oppo");
thAway = last6AwayTable.getElementsByTagName("th");

last6GamesHometeamTableTRs = last6GamesHometeamTable.getElementsByTagName("tr");
var leagueTable = document.getElementById('leagueTable');
var leagueTableTRs = leagueTable.getElementsByTagName("tr");
var last6HometeamOpp = last6GamesHometeamTableTRs;
thLast6home = last6GamesHometeamTable.getElementsByTagName("th");

last6GamesAwayteamTableTRs = last6GamesAwayteamTable.getElementsByTagName("tr");
var last6AwayteamOpp = last6GamesAwayteamTableTRs;

yes(th,last6HomeOpp,leagueTableTRs);




var homeAttackTable = document.getElementById('homeAttackTable');
var homeAttackTrs  = homeAttackTable.getElementsByTagName("tr");



var last6HomeOpp = last6HomeTable.getElementsByClassName("oppo");
th = last6HomeTable.getElementsByTagName("th");





yesAway(thAway,last6AwayOpp,leagueTableTRs);
yesAway2(th,last6AwayOpp,document.getElementById('leagueTable2').getElementsByTagName("tr"));
yesAwayTable(th,last6HomeOpp,document.getElementById('awayDrawTable').getElementsByTagName("tr"));
yesHomeTable(th,last6AwayOpp,document.getElementById('homeDrawTable').getElementsByTagName("tr"));
yesLast6(thLast6home,last6HometeamOpp,leagueTableTRs);
yesLast6Away(thLast6home,last6AwayteamOpp,document.getElementById('leagueTable2').getElementsByTagName("tr"));
yesAwayTable(th,last6HomeOpp,document.getElementById('awayDefenceTable').getElementsByTagName("tr"));
yesHomeTable(th,last6AwayOpp,document.getElementById('homeAttackTable').getElementsByTagName("tr"));
//yesLast6(th,last6HometeamOpp,document.getElementById('leagueTable3').getElementsByTagName("tr"));
tdsArray = [];



for (var j = 0; j < last6HomeTRs.length; j++) {
    last6HomeTRs[j].addEventListener("mouseover", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "lightgreen";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "pink";
        } 
      }
    })
        last6HomeTRs[j].addEventListener("mouseout", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
      }
    })
};


last6AwayTable = gridTable.childNodes[1].childNodes[0].childNodes[1];
last6AwayTRs = last6AwayTable.getElementsByTagName("tr");

for (var j = 0; j < last6AwayTRs.length; j++) {
    last6AwayTRs[j].addEventListener("mouseover", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "lightgreen";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "pink";
        } 
      }
    })
        last6AwayTRs[j].addEventListener("mouseout", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
      }
    })
};




last6HomeAnyTable = gridTable.childNodes[1].childNodes[1].childNodes[0];
last6HomeAnyTRs = last6HomeAnyTable.getElementsByTagName("tr");

for (var j = 0; j < last6HomeAnyTRs.length; j++) {
    last6HomeAnyTRs[j].addEventListener("mouseover", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "lightgreen";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "pink";
        } 
      }
    })
        last6HomeAnyTRs[j].addEventListener("mouseout", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
      }
    })
};

last6HAwayAnyTable = gridTable.childNodes[1].childNodes[1].childNodes[1];
last6AwayAnyTRs = last6HAwayAnyTable.getElementsByTagName("tr");

for (var j = 0; j < last6AwayAnyTRs.length; j++) {
    last6AwayAnyTRs[j].addEventListener("mouseover", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "lightgreen";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "pink";
        } 
      }
    })
        last6AwayAnyTRs[j].addEventListener("mouseout", function(e) {  
      for (var p = 0; p < leagueTableTRs.length; p++) {
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[0].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
        if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {            
        leagueTableTRs[p].style.backgroundColor = "white";
        } 
      }
    })
};




 })
}
}
});


function yesHomeTable(th,last6HomeOpp,leagueTableTRs){
th[0].addEventListener("mouseover", function(e) {
  //console.log("In");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
           if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.className) 
            {
            //  leagueTableTRs[y].style.backgroundColor = "black";
            //  leagueTableTRs[y].style.color = "white";
            }

            if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.previousElementSibling.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "black";
              leagueTableTRs[y].style.color = "white";
            }
        if (leagueTableTRs[y].id == last6HomeOpp[p].id) { 
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].parentNode.id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
        if(last6HomeOpp[p].parentNode.className == "awayDraw") leagueTableTRs[y].style.backgroundColor = "#feffbf";
        if(last6HomeOpp[p].parentNode.className == "awayLoss") leagueTableTRs[y].style.backgroundColor = "pink";
        if(last6HomeOpp[p].parentNode.className == "awayWin") leagueTableTRs[y].style.backgroundColor = "lightgreen";
        if(last6HomeOpp[p].parentNode.className == "awayWinDiff2") leagueTableTRs[y].style.backgroundColor = "springgreen";

        } 
}
}
})
th[0].addEventListener("mouseout", function(e) {
  //console.log("Out");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
       
            leagueTableTRs[y].style.backgroundColor = "white";
 leagueTableTRs[y].style.color = "black";
 leagueTableTRs[y].firstChild.firstChild.style.display = "none";
 leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#fff"

}
}
})
}


function yesAwayTable(th,last6HomeOpp,leagueTableTRs){
th[0].addEventListener("mouseover", function(e) {
  //console.log("In");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
           if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.className) 
            {
           //   leagueTableTRs[y].style.backgroundColor = "black";
            //  leagueTableTRs[y].style.color = "white";
            }
            if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.nextElementSibling.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "blueviolet";
              leagueTableTRs[y].style.color = "white";
            }
            leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";
        if (leagueTableTRs[y].id == last6HomeOpp[p].id) { 
         // console.log("fixtureNumber", leagueTableTRs[y].getElementsByClassName("fixtureNumber"))
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].parentNode.id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
          //leagueTableTRs[y].getElementsByClassName("fixtureNumber").textContent = last6HomeOpp[p].parentNode.id + 1;
        if(last6HomeOpp[p].parentNode.className == "homeDraw") leagueTableTRs[y].style.backgroundColor = "#feffbf";
        if(last6HomeOpp[p].parentNode.className == "homeLoss") leagueTableTRs[y].style.backgroundColor = "pink";
        if(last6HomeOpp[p].parentNode.className == "homeWin") leagueTableTRs[y].style.backgroundColor = "lightgreen";
        if(last6HomeOpp[p].parentNode.className == "homeWinDiff2") leagueTableTRs[y].style.backgroundColor = "springgreen";

        } 
}
}

})
th[0].addEventListener("mouseout", function(e) {
 // console.log("Out");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
          
            leagueTableTRs[y].style.backgroundColor = "white";
 leagueTableTRs[y].style.color = "black";
 leagueTableTRs[y].firstChild.firstChild.textContent = "";
 leagueTableTRs[y].firstChild.firstChild.style.display = "none";
 leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#fff"


}
}
})
}

function determineColour(result) {
    switch(result) {
      case "homeWin":
            return colour = "green"; 
     case "homeWinDiff2":
            return colour = "green"; 
      case "homeLoss":
            return colour = "red";               
      case "homeDraw":
          return colour = "yellow";
      }
}

function yes(th,last6HomeOpp,leagueTableTRs){
   //document.getElementById('leagueTable3').innerHTML = pointsMarkup;
 var leagueTRsTest =  document.getElementById('leagueTable').getElementsByTagName("tr");
 /*
var topPoints = leagueTRsTest[0].lastChild.textContent;
 var bottomPoints = leagueTRsTest[leagueTRsTest.length - 1].lastChild.textContent;
console.log("topPoints",topPoints,"bottomPoints",bottomPoints);

var pointsDifference = 100/topPoints;
console.log("pointsDifference",pointsDifference)
  var strengthIndex = 0;
  */
th[0].addEventListener("mouseover", function(e) {
  //console.log("In");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
           if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "black";
              leagueTableTRs[y].style.color = "white";
            }
            if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.nextElementSibling.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "blueviolet";
              leagueTableTRs[y].style.color = "white";
            }
            leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";
        if (leagueTableTRs[y].id == last6HomeOpp[p].id) { 
          console.log("fixtureNumber", leagueTableTRs[y].getElementsByClassName("fixtureNumber"))
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].parentNode.id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") {
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";
          } 
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2") { 
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";
          }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  {
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";
          }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  {
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";
          }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  {
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";
          }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  {
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";
          }
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
          //leagueTableTRs[y].getElementsByClassName("fixtureNumber").textContent = last6HomeOpp[p].parentNode.id + 1;
        if(last6HomeOpp[p].parentNode.className == "homeDraw") {
            leagueTableTRs[y].style.backgroundColor = "#feffbf";
           // strengthIndex += 1* (pointsDifference * parseInt(leagueTableTRs[y].lastChild.textContent));     
          }
        if(last6HomeOpp[p].parentNode.className == "homeLoss") {
            leagueTableTRs[y].style.backgroundColor = "pink";
        }
        if(last6HomeOpp[p].parentNode.className == "homeWin") {
          leagueTableTRs[y].style.backgroundColor = "lightgreen";    
         // strengthIndex += 1* (pointsDifference * parseInt(leagueTableTRs[y].lastChild.textContent));     
     } 
        if(last6HomeOpp[p].parentNode.className == "homeWinDiff2"){
            leagueTableTRs[y].style.backgroundColor = "springgreen";
          //  strengthIndex += 3* (pointsDifference * parseInt(leagueTableTRs[y].lastChild.textContent));   
          } 

        } 
}
}
//console.log("strengthIndex",strengthIndex);
/*
chartDataArray =[];

for (var p = 0; p < poissonTableAway2.length; p++) {
  for (var k = 0; k < last6HomeOpp.length; k++) {
    if(last6HomeOpp[k].textContent == poissonTableAway2[p].name) {
      chartObject = new Object();
      chartObject.name = last6HomeOpp[k].textContent;
      chartObject.attackAndDefence = poissonTableAway2[p].AttackAndDefence;
      chartObject.colour = determineColour(last6HomeOpp[k].parentNode.className);

      chartDataArray.push(chartObject);
    }
    }
  }


    new Chart(
      document.getElementById('myChart'),
      {
        type: 'bar',
        data: {
          labels: chartDataArray.map(row => row.name),
          datasets: [
            {      
              data: chartDataArray.map(e =>  e.attackAndDefence),
              backgroundColor: chartDataArray.map(e =>  e.colour)
            }
          ]
        }
      }
    );
*/
})


th[0].addEventListener("mouseout", function(e) {
 // strengthIndex = 0;
  console.log("Out");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
          
            leagueTableTRs[y].style.backgroundColor = "white";
 leagueTableTRs[y].style.color = "black";
 leagueTableTRs[y].firstChild.firstChild.textContent = "";
 leagueTableTRs[y].firstChild.firstChild.style.display = "none";
 leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#fff"


}
}
})
}

function yesAway(th,last6HomeOpp,leagueTableTRs){
th[0].addEventListener("mouseover", function(e) {
  console.log("In");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
           if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "black";
              leagueTableTRs[y].style.color = "white";
            }

            if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.previousElementSibling.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "blueviolet";
              leagueTableTRs[y].style.color = "white";
            }
        if (leagueTableTRs[y].id == last6HomeOpp[p].id) { 

        if(last6HomeOpp[p].parentNode.className == "awayDraw") leagueTableTRs[y].style.backgroundColor = "#feffbf";
        if(last6HomeOpp[p].parentNode.className == "awayLoss") leagueTableTRs[y].style.backgroundColor = "pink";
        if(last6HomeOpp[p].parentNode.className == "awayWin") leagueTableTRs[y].style.backgroundColor = "lightgreen";
        if(last6HomeOpp[p].parentNode.className == "awayWinDiff2") leagueTableTRs[y].style.backgroundColor = "springgreen";

        } 
}
}
})
th[0].addEventListener("mouseout", function(e) {
  console.log("Out");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
       
            leagueTableTRs[y].style.backgroundColor = "white";
 leagueTableTRs[y].style.color = "black";
   

}
}
})
}



function yesAway2(th,last6HomeOpp,leagueTableTRs){
th[0].addEventListener("mouseover", function(e) {
  console.log("In");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
           if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "black";
              leagueTableTRs[y].style.color = "white";
            }

            if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.parentNode.previousElementSibling.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "blueviolet";
              leagueTableTRs[y].style.color = "white";
            }
        if (leagueTableTRs[y].id == last6HomeOpp[p].id) { 
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].parentNode.id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
        if(last6HomeOpp[p].parentNode.className == "awayDraw") leagueTableTRs[y].style.backgroundColor = "#feffbf";
        if(last6HomeOpp[p].parentNode.className == "awayLoss") leagueTableTRs[y].style.backgroundColor = "pink";
        if(last6HomeOpp[p].parentNode.className == "awayWin") leagueTableTRs[y].style.backgroundColor = "lightgreen";
        if(last6HomeOpp[p].parentNode.className == "awayWinDiff2") leagueTableTRs[y].style.backgroundColor = "springgreen";

        } 
}
}
})
th[0].addEventListener("mouseout", function(e) {
  console.log("Out");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
       
            leagueTableTRs[y].style.backgroundColor = "white";
 leagueTableTRs[y].style.color = "black";
 leagueTableTRs[y].firstChild.firstChild.style.display = "none";
 leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#fff"

}
}
})
}


function yesLast6(th,last6HomeOpp,leagueTableTRs){
th[0].addEventListener("mouseover", function(e) {
  console.log("In");
  console.log("tr rows",last6HomeOpp);
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
 

           if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "black";
              leagueTableTRs[y].style.color = "white";
            }

            if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.nextElementSibling.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "blueviolet";
              leagueTableTRs[y].style.color = "white";
            }
            if(last6HomeOpp[p].className == "homeLoss") {

            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "pink";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "homeDraw") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "#feffbf";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
 
          if(last6HomeOpp[p].className == "homeWin") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "lightgreen";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "homeWinDiff2") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "springgreen";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "red"
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }

          
          if(last6HomeOpp[p].className == "awayDraw") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "#feffbf";
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "red";
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "awayLoss") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "pink";
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "red";
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "awayWin") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "lightgreen";
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "red";
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "awayWinDiff2") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "springgreen";
            leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "red";
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
          leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "1")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";  }
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }

        }
}
})
th[0].addEventListener("mouseout", function(e) {
  console.log("Out");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
    leagueTableTRs[y].style.backgroundColor = "white";
    leagueTableTRs[y].style.color = "black";
    leagueTableTRs[y].firstChild.firstChild.style.display = "none";
    leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";
}
}
})

}

function yesLast6Away(th,last6HomeOpp,leagueTableTRs){
th[0].addEventListener("mouseover", function(e) {
  console.log("In");
  console.log("tr rows",last6HomeOpp);
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
           if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "black";
              leagueTableTRs[y].style.color = "white";
            }

            if (leagueTableTRs[y].id == last6HomeOpp[p].parentNode.parentNode.previousElementSibling.className) 
            {
              leagueTableTRs[y].style.backgroundColor = "blueviolet";
              leagueTableTRs[y].style.color = "white";
            }
            if(last6HomeOpp[p].className == "homeLoss") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "pink";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "homeDraw") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
              leagueTableTRs[y].style.backgroundColor = "#feffbf";
              leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";

            } 
          }
 
          if(last6HomeOpp[p].className == "homeWin") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "lightgreen";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "homeWinDiff2") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].lastElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "springgreen";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "50%";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }

          
          if(last6HomeOpp[p].className == "awayDraw") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "#feffbf";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "awayLoss") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "pink";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "awayWin") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "lightgreen";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }
          if(last6HomeOpp[p].className == "awayWinDiff2") {
            if (leagueTableTRs[y].id == last6HomeOpp[p].firstElementChild.id) { 
            leagueTableTRs[y].style.backgroundColor = "springgreen";
            leagueTableTRs[y].firstChild.firstChild.textContent  = parseInt(last6HomeOpp[p].id) + 1;
            if(leagueTableTRs[y].firstChild.firstChild.textContent== "1") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#000";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "2")  {leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#222";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "3") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#444";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "4") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#666";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "5") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#888";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          if(leagueTableTRs[y].firstChild.firstChild.textContent== "6") { leagueTableTRs[y].firstChild.firstChild.style.backgroundColor = "#aaa";leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";}
          leagueTableTRs[y].firstChild.firstChild.style.display = "block";
            } 
          }

        }
}
})
th[0].addEventListener("mouseout", function(e) {
  console.log("Out");
 for (var p = 0; p < last6HomeOpp.length; p++) {
   for (var y = 0; y < leagueTableTRs.length;y++) {
    leagueTableTRs[y].style.backgroundColor = "white";
    leagueTableTRs[y].style.color = "black";
    leagueTableTRs[y].firstChild.firstChild.style.display = "none";
    leagueTableTRs[y].firstChild.firstChild.style.borderRadius = "0";

    
}
}
})

}




document.addEventListener('DOMContentLoaded', function(event) {
  homeMatches = document.querySelectorAll(".hm");
  for (i = 0; i < homeMatches.length; i++) {
    homeMatches[i].classList.toggle("hideAway");
  }
  homeMatches = document.querySelectorAll(".am");
  for (i = 0; i < homeMatches.length; i++) {
    homeMatches[i].classList.toggle("hideHome");
  }

 })





 function saveGame(event) {
  //alert("Game saved");
  localStorage.setItem( league + "&" +event.target.parentNode.parentNode.id + "&" + event.target.parentNode.parentNode.childNodes[3].id, league + "&" +event.target.parentNode.parentNode.id + "&" + event.target.parentNode.parentNode.childNodes[3].id);
  displaySavedGames();
}

function checkSavedGames() {
  for (var i = 0; i < localStorage.length; i++){
    let match = localStorage.getItem(localStorage.key(i));
    let game = match.split("&");
    let savedLeague = game[0];
    let savedHomeTeam = game[1];
   // console.log(savedLeague,savedHomeTeam);
    leagueTRs =  document.getElementById("fixturesTable").getElementsByTagName("tr");

   for (var y = 0; y < leagueTRs.length;y++) {
    if(leagueTRs[y].id==savedHomeTeam) leagueTRs[y].querySelector(".save").style.display = "none"
}
}
}

function displaySavedGames() {
  savedGamesMarkUp = "<h3>Saved Games</h3><table>"
  for (var i = 0; i < localStorage.length; i++){
    let match = localStorage.getItem(localStorage.key(i));
    let game = match.split("&");
    let savedLeague = game[0];
    let savedHomeTeam = game[1];
    let savedAwayTeam = game[2];
    savedGamesMarkUp += `<tr><td id=${match}>${savedLeague}</td><td>${savedHomeTeam}</td><td>${savedAwayTeam}</td><td><a href='https://serkanesque.github.io/hello-world/src/template.html?league=${savedLeague}&savedgame=${savedHomeTeam}'>View game</a><button onclick="deleteSavedGames('${match}')">Delete match</button></tr>`; 

    //savedGamesMarkUp += "<tr><td>"+savedLeague+"</td><td>"+savedHomeTeam+"</td><td>"+savedAwayTeam+"</td><td><a href='https://serkanesque.github.io/hello-world/src/template.html?"+savedLeague+'&savedgame?'+savedHomeTeam+">View game</a></tr>"; 
  }
  savedGamesMarkUp += "</table>";
  document.getElementById("savedGames").innerHTML = savedGamesMarkUp;
}


function deleteSavedGames(match) {
  for (var i = 0; i < localStorage.length; i++){
    if(match == localStorage.getItem(localStorage.key(i))) 
    {
      localStorage.removeItem(localStorage.key(i));
      displaySavedGames();
   // alert("Match deleted");
    }
  }
}






</script>

</body>


</html>