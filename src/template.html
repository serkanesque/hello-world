
<body onload="getParameterByName()">
<style>

    #tables { display: flex; }
    #tables div { margin-right: 20px; }

section { display: none; }
.nav a { display: inline-block; margin-right: 20px; }
.hw {background-color: lightgreen;}
.aw {background-color: pink;}
.d {background-color: lightgray;}
.d {background-color: lightgray;}
          tr div  {
              position: relative;
              
            }
            tr div span {
              position: absolute;
              display: none;
    background-color: #ffeb3b;
    padding: 20px;
    z-index: 100;
    width: 140px;
    top: 40px;
            }

            tr div:hover span {      
              display: block;
            }

           #tables #fixturesTable div {

        display: inline-block;
    padding: 2px;
    margin-right: 0px;
        border: 1px solid;

}
 .homeLoss {
  background-color: pink;
 }
.awayWin, .awayLoss{
border-radius: 50%;
background-color: pink;
}
.homeWin, .awayWin{
background-color: lightgreen;
}
.awayDraw {
  border-radius: 50%;
}
.homeDraw,.awayDraw {
 background-color: white;
}
/*
#homeDrawTable tr.team:nth-child(even) {background: #eee} 
#awayDrawTable tr.team:nth-child(even) {background: #eee} 
#tables tr:nth-child(even) {background: #eee} 
*/
#tables td {border-right: 1px solid #ccc;border-bottom: 1px solid #ccc; text-align: center;};
</style>  
<div id="nav" class="nav"></div> 

<section id="homeRows"><div id="tables_div" class="table_div"></section>
<section id="awayRows"><div id="tables_div" class="table_div"></section>
<section><table id="halfTime" cellspacing="0" cellpadding="2" width="99%"></table>
<table id="halfTimeAway" cellspacing="0" cellpadding="2" width="99%"></table>
<table id="halfTimeTrailing" cellspacing="0" cellpadding="2" width="99%"></table>
<table id="halfTimeAwayTrailing" cellspacing="0" cellpadding="2" width="99%"></table>
<table id="homeGoals" cellspacing="0" cellpadding="2" width="99%"></table>
<table id="seasonFixtures" cellspacing="0" cellpadding="2" width="99%"></table>
<table id="seasonFixtures2018" cellspacing="0" cellpadding="2" width="99%"></table>


</section>
<section>
<div>
    <table id="fixtures" cellspacing="0" cellpadding="3" class="statnowidth" width="95%">  
</table>

</div>
</section>




<Div id="tables">
    <Div>       
    <h1> League <h3 id="draw%"></h3> </h1>
    <table id="leagueTable">
    </table>
</Div>

<Div>       
    <h1> Home </h1>
    <table id="homeDrawTable">
    </table>
</Div>

<div>
<h1> Away </h1>
<table id="awayDrawTable">
</table>
</Div>
<Div>
<h1> Fixtures </h1>
<table id="fixturesTable">
</table>
</Div>
</Div>




<script type="text/javascript">function getParameterByName(name, url) {
 if (!url) url = window.location.href;
 name = name.replace(/[\[\]]/g, "\\$&");
 var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
  results = regex.exec(url);
 if (!results) return null;
 if (!results[2]) return '';
 return decodeURIComponent(results[2].replace(/\+/g, " "));
}
// Give the parameter a variable name
var league = getParameterByName('league');

console.log(league)



function get(url) {
 // Return a new promise.
 return new Promise(function(resolve, reject) {
  // Do the usual XHR stuff
  var req = new XMLHttpRequest();
  req.open('GET', url);

  req.onload = function() {
   // This is called even on 404 etc
   // so check the status
   if (req.status == 200) {
    // Resolve the promise with the response text
    resolve(req.response);
   } else {
    // Otherwise reject with the status text
    // which will hopefully be a meaningful error
    reject(Error(req.statusText));
   }
  };

  // Handle network errors
  req.onerror = function() {
   reject(Error("Network Error"));
  };

  // Make the request
  req.send();
 });
}





get('https://serkanesque.github.io/hello-world/src/' + league + '/homeRows.txt').then(function(response) {

 document.getElementById("homeRows").innerHTML = response;
}).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/awayRows.txt').then(function(response) {

 document.getElementById("awayRows").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeHomeLeading.txt').then(function(response) {

 document.getElementById("halfTime").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeAwayLeading.txt').then(function(response) {

 document.getElementById("halfTimeAway").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeHomeTrailing.txt').then(function(response) {

 document.getElementById("halfTimeTrailing").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/halfTimeAwayTrailing.txt').then(function(response) {


 document.getElementById("halfTimeAwayTrailing").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/fixtures.txt').then(function(response) {

 document.getElementById("fixtures").innerHTML = response;
})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/names.xml').then(function(response) {
 parser = new DOMParser();
 xmlTeamNames = parser.parseFromString(response, "text/xml");

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/homeGoals.txt').then(function(response) {

 document.getElementById("homeGoals").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/seasonFixtures.txt').then(function(response) {

 document.getElementById("seasonFixtures").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/' + league + '/seasonFixtures2018.txt').then(function(response) {

 document.getElementById("seasonFixtures2018").innerHTML = response;

})).then(get('https://serkanesque.github.io/hello-world/src/nav.txt').then(function(response) {
 document.getElementById("nav").innerHTML = response;
interval = setInterval(allDone, 50)
}))



function allDone() {


 console.log("ALL DONE");
 var xmlTeamsFrom = xmlTeamNames.getElementsByTagName("from");
 var xmlTeamsTo = xmlTeamNames.getElementsByTagName("to");

 var halfTimeContainerDiv = document.getElementById("halfTime");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeLeading = [];

 for (var i = 0; i < halfTimeInnerDivs.length; i++) {

  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();

  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (team.name == xmlTeamsFrom[t].childNodes[0].nodeValue) team.name = xmlTeamsTo[t].childNodes[0].nodeValue
  }

  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeLeading.push(team);
 }
 //

 var halfTimeContainerDiv = document.getElementById("halfTimeAway");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeLeadingAway = [];

 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();


  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (team.name == xmlTeamsFrom[t].childNodes[0].nodeValue) team.name = xmlTeamsTo[t].childNodes[0].nodeValue
  }
  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeLeadingAway.push(team);

 }
  //

 var halfTimeContainerDiv = document.getElementById("halfTimeTrailing");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeTrailing = [];
 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  //change team names

  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (team.name == xmlTeamsFrom[t].childNodes[0].nodeValue) team.name = xmlTeamsTo[t].childNodes[0].nodeValue
  }

  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeTrailing.push(team);
 }
  //


 var halfTimeContainerDiv = document.getElementById("halfTimeAwayTrailing");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");

 halfTimeAwayTrailing = [];

 for (var i = 0; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  //change team names
  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (team.name == xmlTeamsFrom[t].childNodes[0].nodeValue) team.name = xmlTeamsTo[t].childNodes[0].nodeValue
  }

  team.htPercentage = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  halfTimeAwayTrailing.push(team);
 }
  //



 var halfTimeContainerDiv = document.getElementById("homeGoals");
 var halfTimeInnerDivs = halfTimeContainerDiv.getElementsByTagName("tr");
 halfTimeHomeGoals = [];


 for (var i = 1; i < halfTimeInnerDivs.length; i++) {
  var team = new Object();
  var scored = 0;
  var conceded = 0;
  var last20scored = 0;
  var last20conceded = 0;
  team.name = halfTimeInnerDivs[i].firstElementChild.textContent.trim();
  team.fistHalfGoals = halfTimeInnerDivs[i].childNodes[17].textContent.trim();

  zero10 = halfTimeInnerDivs[i].childNodes[3].textContent.trim();
  zero10 = zero10.split('-');
  scored += parseInt(zero10[0])
  conceded += parseInt(zero10[1])

  ten20 = halfTimeInnerDivs[i].childNodes[5].textContent.trim();
  ten20 = ten20.split('-');
  scored += parseInt(ten20[0])
  conceded += parseInt(ten20[1])

  twenty30 = halfTimeInnerDivs[i].childNodes[7].textContent.trim();
  twenty30 = twenty30.split('-');
  scored += parseInt(twenty30[0])
  conceded += parseInt(twenty30[1])

  thrity40 = halfTimeInnerDivs[i].childNodes[9].textContent.trim();
  thrity40 = thrity40.split('-');
  scored += parseInt(thrity40[0])
  conceded += parseInt(thrity40[1])

  forty50 = halfTimeInnerDivs[i].childNodes[11].textContent.trim();
  forty50 = forty50.split('-');
  scored += parseInt(forty50[0])
  conceded += parseInt(forty50[1])

  fifty60 = halfTimeInnerDivs[i].childNodes[13].textContent.trim();
  fifty60 = fifty60.split('-');
  scored += parseInt(fifty60[0])
  conceded += parseInt(fifty60[1])

  sixty70 = halfTimeInnerDivs[i].childNodes[15].textContent.trim();
  sixty70 = sixty70.split('-');
  scored += parseInt(sixty70[0])
  conceded += parseInt(sixty70[1])

  seventy80 = halfTimeInnerDivs[i].childNodes[17].textContent.trim();
  seventy80 = seventy80.split('-');
  last20scored += parseInt(seventy80[0])
  last20conceded += parseInt(seventy80[1])



  eighty90 = halfTimeInnerDivs[i].childNodes[19].textContent.trim();
  eighty90 = eighty90.split('-');
  last20scored += parseInt(eighty90[0])
  last20conceded += parseInt(eighty90[1])






  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (team.name == xmlTeamsFrom[t].childNodes[0].nodeValue) team.name = xmlTeamsTo[t].childNodes[0].nodeValue
  }

  team.scored = scored;
  team.conceded = conceded;
  team.last20scored = last20scored;
  team.last20conceded = last20conceded;
  totalGoals = team.scored + team.last20scored;
  team.seventyScoredPercent = (team.scored / totalGoals) * 100;
  halfTimeHomeGoals.push(team)
 }



 var seasonFixturesContainerDiv = document.getElementById("seasonFixtures");
 var seasonFixturesInnerDivs = seasonFixturesContainerDiv.getElementsByClassName("trow3");
 var seasonFixtures = [];
 var allSeasonFixtures = [];

 for (var i = 0; i < seasonFixturesInnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixture = seasonFixturesInnerDivs[i].childNodes[5].textContent;
  score = seasonFixturesInnerDivs[i].childNodes[7].textContent;

  fixture = fixture.trim();
  fixture = fixture.split(' - ');
  score = score.trim();
  score = score.split(' - ');

  fixtureTeam.hName = fixture[0];
  fixtureTeam.aName = fixture[1];

  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (fixtureTeam.hName == xmlTeamsFrom[t].childNodes[0].nodeValue) fixtureTeam.hName = xmlTeamsTo[t].childNodes[0].nodeValue;
   if (fixtureTeam.aName == xmlTeamsFrom[t].childNodes[0].nodeValue) fixtureTeam.aName = xmlTeamsTo[t].childNodes[0].nodeValue
  }

  fixtureTeam.hScore = score[0];
  fixtureTeam.aScore = score[1];


  seasonFixtures.push(fixtureTeam);
 }




 var seasonFixtures2018ContainerDiv = document.getElementById("seasonFixtures2018");
 var seasonFixtures2018InnerDivs = seasonFixtures2018ContainerDiv.getElementsByClassName("odd");
 var seasonFixtures2018 = [];
 var allSeasonFixtures = [];

 for (var i = 0; i < seasonFixtures2018InnerDivs.length; i++) {
  var fixtureTeam = new Object();
  fixture = seasonFixtures2018InnerDivs[i].childNodes[5].textContent;
  score = seasonFixtures2018InnerDivs[i].childNodes[7].textContent;

  fixture = fixture.trim();
  fixture = fixture.split(' - ');
  score = score.trim();
  score = score.split(' - ');

  fixtureTeam.hName = fixture[0];
  fixtureTeam.aName = fixture[1];

  for (var t = 0; t < xmlTeamsFrom.length; t++) {
   if (fixtureTeam.hName == xmlTeamsFrom[t].childNodes[0].nodeValue) fixtureTeam.hName = xmlTeamsTo[t].childNodes[0].nodeValue;
   if (fixtureTeam.aName == xmlTeamsFrom[t].childNodes[0].nodeValue) fixtureTeam.aName = xmlTeamsTo[t].childNodes[0].nodeValue
  }

  fixtureTeam.hScore = score[0];
  fixtureTeam.aScore = score[1];

  seasonFixtures2018.push(fixtureTeam);
 }


if(seasonFixtures2018.length > 200) clearInterval(interval);

















 var totalPlayed;

 var flag = false;
 markup = "";
 var awayContainerDiv = document.getElementById("homeRows");
 var awayInnerDivs = awayContainerDiv.getElementsByClassName("table_row");
 homeTable = [];
 var totalDrawn = 0;
 var totalPlayed = 0;

 for (var i = 1; i < awayInnerDivs.length; i++) {
  var team = new Object();
  team.name = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[5].textContent;
  team.played = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[7].textContent;
  team.wins = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[9].textContent;
  team.draws = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[11].textContent;
  totalDrawn = totalDrawn + parseInt(team.draws);
  totalPlayed = totalPlayed + parseInt(team.played);
  team.lost = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[13].textContent;

  var drawPercentCalc = parseInt(team.draws) / (parseInt(team.wins) + parseInt(team.lost) + parseInt(team.draws)) * 100;
  team.drawPercent = drawPercentCalc.toFixed(1);
  var goals = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[15].textContent;
  goalsSplit = goals.split('-');
  team.goalsF = goalsSplit[0];
  team.goalsA = goalsSplit[1]
  team.points = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[19].textContent;

  homeTable.push(team);
  document.getElementById("draw%").innerHTML = " Draw % " + ((totalDrawn / totalPlayed) * 100).toFixed(2);


  /*


      if(awayInnerDivs[i].id == "team") {
       var team = new Object();
      team.name = awayInnerDivs[i].textContent;   
  }
      if(awayInnerDivs[i].id == "draws") {
      team.draws = awayInnerDivs[i].textContent;
  }
      if(awayInnerDivs[i].id == "wins") {
      team.wins = awayInnerDivs[i].textContent;
  }
      if(awayInnerDivs[i].id == "points") {
      team.points = awayInnerDivs[i].textContent;
  }
      if(awayInnerDivs[i].id == "goals") {
      goals = awayInnerDivs[i].textContent;
      goalsSplit = goals.split('-');
      team.goalsF = goalsSplit[0];
      team.goalsA = goalsSplit[1]
     // console.log(team.goalsF + " " + team.goalsA)
  }
      if(awayInnerDivs[i].id == "lost") {
      team.lost = awayInnerDivs[i].textContent;
      var drawPercentCalc = parseInt(team.draws)/(parseInt(team.wins) + parseInt(team.lost) + parseInt(team.draws)) *100;
      team.drawPercent = drawPercentCalc.toFixed(1);
      homeTable.push(team);
  }
  */
 }
 //


 homeTable.sort(function(a, b) {
  if (a.drawPercent < b.drawPercent) return -1;
  if (a.drawPercent > b.drawPercent) return 1;
  if (a.wins < b.wins) return 1;
  if (a.wins > b.wins) return -1;
 });


 markup = markup + '<tr class="team"><td>team</td><td>pl </td><td>win</td><td>draw</td><td>lost</td><td>pts</td><td>draw%</td><td>ht lead %</td><td>ht trail %</td><td>ht draw %</td><td>0 - 70m goals</td><td>0 - 70m conceded</td></tr>';



 for (var i = 0; i < homeTable.length; i++) {

        for (var j = 0; j < halfTimeLeading.length; j++) {
        if (halfTimeLeading[j].name == homeTable[i].name) {
        var halfTimeLeadingPercent = halfTimeLeading[j].htPercentage;
        }
        }
        for (var j = 0; j < halfTimeTrailing.length; j++) {
        if (halfTimeTrailing[j].name == homeTable[i].name) {

        var halfTimeTrailingPercent = halfTimeTrailing[j].htPercentage;
        }
        }

        for (var j = 0; j < halfTimeHomeGoals.length; j++) {
        if (halfTimeHomeGoals[j].name == homeTable[i].name) {
        var scored070 = halfTimeHomeGoals[j].scored;
        var conceded070 = halfTimeHomeGoals[j].conceded;
        var seventyScoredPercent = halfTimeHomeGoals[j].seventyScoredPercent;
        }
        }


        if (homeTable[i].drawPercent > 25 && flag == false) {
        markup = markup + '<tr id="empty"><td>&nbsp; </td></tr><tr id="empty"><td>&nbsp; </td></tr>';
        flag = true;
        }

        var halftimeDrawPercentage = 100 - (parseInt(halfTimeLeadingPercent) + parseInt(halfTimeTrailingPercent));

        markup = markup + '<tr class="team" id=' + homeTable[i].name.split(' ').join('') + '><td>' + homeTable[i].name + '</td><td>' + homeTable[i].played + '</td><td>' + homeTable[i].wins + '</td><td>' + homeTable[i].draws + '</td><td>' + homeTable[i].lost + '</td><td>' + homeTable[i].points + '</td><td>' + homeTable[i].drawPercent + '</td><td>' + halfTimeLeadingPercent + '</td><td>' + halfTimeTrailingPercent + '</td><td>' + halftimeDrawPercentage + '</td><td>' + scored070 + " - " + seventyScoredPercent.toFixed(1) + '%</td><td>' + conceded070 + '</td></tr>'
 }
 //


 document.getElementById('homeDrawTable').innerHTML = markup;


 var flag = false;


 function sortNumber(a, b) {
  return a.draws - b.draw;
 }

 function sortWin(a, b) {
  return a.wins - b.wins;
 }

 markup = '<tr class="team"><td>team</td><td>pl </td><td>wins</td><td>draw</td><td>lost</td><td>pts</td><td>draw %</td><td>ht lead %</td><td>ht trail %</td><td>ht draw %</td></tr>';

 var awayContainerDiv = document.getElementById("awayRows");
 var awayInnerDivs = awayContainerDiv.getElementsByClassName("table_row");
 awayTable = [];

 for (var i = 1; i < awayInnerDivs.length; i++) {
  var team = new Object();
  team.name = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[5].textContent;
  team.played = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[7].textContent;
  team.wins = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[9].textContent;
  team.draws = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[11].textContent;
  team.lost = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[13].textContent;
  var drawPercentCalc = parseInt(team.draws) / (parseInt(team.wins) + parseInt(team.lost) + parseInt(team.draws)) * 100;
  team.drawPercent = drawPercentCalc.toFixed(1);
  var goals = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[15].textContent;
  goalsSplit = goals.split('-');
  team.goalsF = goalsSplit[0];
  team.goalsA = goalsSplit[1]
  team.points = awayInnerDivs[i].childNodes[1].childNodes[1].childNodes[19].textContent;

  awayTable.push(team);
 }
  //

 awayTable.sort(function(a, b) {
  if (a.drawPercent < b.drawPercent) return -1;
  if (a.drawPercent > b.drawPercent) return 1;
  if (a.wins < b.wins) return 1;
  if (a.wins > b.wins) return -1;
 });



 for (var i = 0; i < awayTable.length; i++) {
  for (var j = 0; j < halfTimeLeading.length; j++) {
   if (halfTimeLeadingAway[j].name == awayTable[i].name) {
    var halfTimeLeadingPercent = halfTimeLeadingAway[j].htPercentage;
   }
   if (halfTimeAwayTrailing[j].name == awayTable[i].name) {
    var halfTimeAwayTrailingPercent = halfTimeAwayTrailing[j].htPercentage;
   }
  }

  if (awayTable[i].drawPercent > 25 && flag == false) {
   markup = markup + '<tr id="empty"><td>&nbsp; </td></tr><tr id="empty"><td>&nbsp; </td></tr>';
   flag = true;
  }

  var halftimeDrawPercentage = 100 - (parseInt(halfTimeLeadingPercent) + parseInt(halfTimeAwayTrailingPercent));

  markup = markup + '<tr class="team" id=' + awayTable[i].name.split(' ').join('') + '><td>' + awayTable[i].name + '</td><td>' + awayTable[i].played + '</td><td>' + awayTable[i].wins + '</td><td>' + awayTable[i].draws + '</td><td>' + awayTable[i].lost + '</td><td>' + awayTable[i].points + '</td><td>' + awayTable[i].drawPercent + '</td><td>' + halfTimeLeadingPercent + '</td><td>' + halfTimeAwayTrailingPercent + '</td><td>' + halftimeDrawPercentage + '</td></tr>'
 }
  //



 document.getElementById('awayDrawTable').innerHTML = markup;

 var fixturesContainerDiv = document.getElementById("fixtures");
 var fixturesInnerDivs = fixturesContainerDiv.getElementsByTagName("TR");


 markup = '<tr><td>Kickoff</td><td>home team</td><td>Last 3 games</td><td>Away team</td><td>Last 3 games</td><<td>pts delta</td><td>goals f delta</td><td>goals a delta</td><td>this season</td><td>last season h</td><td>last season a</td></tr>';

 for (var i = 1; i < fixturesInnerDivs.length; i++) {


            date = fixturesInnerDivs[i].childNodes[1].firstElementChild.textContent;

            time = fixturesInnerDivs[i].childNodes[1].lastElementChild.textContent;
            fixture = fixturesInnerDivs[i].childNodes[3].textContent;            
            fixture = fixture.trim();
            fixture = fixture.split(' - ');
            homeTeam = fixture[0];
            awayTeam = fixture[1];



            for (var t = 0; t < xmlTeamsFrom.length; t++) {
            if (homeTeam == xmlTeamsFrom[t].childNodes[0].nodeValue) homeTeam = xmlTeamsTo[t].childNodes[0].nodeValue
            } 

            for (var t = 0; t < xmlTeamsFrom.length; t++) {
            if (awayTeam == xmlTeamsFrom[t].childNodes[0].nodeValue) awayTeam = xmlTeamsTo[t].childNodes[0].nodeValue
            } 
          
       
            const homeTeamFixturesArray =  seasonFixtures.filter(function(team) { return team.hName == homeTeam || team.aName == homeTeam});
           // console.log(homeTeamFixturesArray)

            const awayTeamFixturesArray =  seasonFixtures.filter(function(team) { return team.hName == awayTeam || team.aName == awayTeam});

            const pastHomeFixture =  seasonFixtures.filter(function(team) { return team.aName == homeTeam && team.hName == awayTeam });

          const homeTeamFixturesArray2018 =  seasonFixtures2018.filter(function(team) { return team.hName == homeTeam || team.aName == homeTeam});
          const pastHomeFixture2018 =  seasonFixtures2018.filter(function(team) { return team.aName == homeTeam && team.hName == awayTeam });
          const pastHomeFixture2018Home =  seasonFixtures2018.filter(function(team) { return team.hName == homeTeam && team.aName == awayTeam });



        /*
var pastFixtureObject = {
 hScore: pastHomeFixture2018[0].hScore,
 aScore: pastHomeFixture2018[0].aScore,
};
pastFixtureObject.result = function() {
   if(hScore > aScore) return "aw";
   if(hScore < aScore) return "hw";
   if(hScore == aScore) return "d";      
  }


console.log(pastFixtureObject.result)

  const pastFixture18 = {
 hScore: pastHomeFixture2018[0].hScore,
 aScore: pastHomeFixture2018[0].aScore,
result () {
   if(this.hScore > this.aScore) {
      hScore = pastHomeFixture2018[0].hScore;
      aScore = pastHomeFixture2018[0].aScore;
    return "aw";
  }
   if(this.hScore < this.aScore) return "hw";
   if(this.hScore == this.aScore) return "d";      
  }
};

const thisFixture = Object.create(pastFixture18);

console.log(thisFixture.result())
*/

if(typeof pastHomeFixture[0] === 'undefined') {
 result = "n/a";

   }else{       
 console.log("defined");
    if(pastHomeFixture[0].hScore > pastHomeFixture[0].aScore) result = "aw"
            if(pastHomeFixture[0].hScore < pastHomeFixture[0].aScore) result = "hw"
            if(pastHomeFixture[0].hScore == pastHomeFixture[0].aScore) result = "d"

}


if (pastHomeFixture2018.length < 1 ){
              result18 = "promoted";
             var hScore = "-";
              var aScore = "-";
}else {
      
            if(pastHomeFixture2018[0].hScore > pastHomeFixture2018[0].aScore) {
              var hScore = pastHomeFixture2018[0].hScore;
              var aScore = pastHomeFixture2018[0].aScore;

             result18 = "aw";
           }
            if(pastHomeFixture2018[0].hScore < pastHomeFixture2018[0].aScore) {
              result18 = "hw";
               var hScore = pastHomeFixture2018[0].hScore;
              var aScore = pastHomeFixture2018[0].aScore;


            }
            if(pastHomeFixture2018[0].hScore == pastHomeFixture2018[0].aScore){ 
       
               var hScore = pastHomeFixture2018[0].hScore;
              var aScore = pastHomeFixture2018[0].aScore;
              result18 = "d"                  
          }
}

if (pastHomeFixture2018Home.length < 1 ){
              result18h = "promoted";
             var hScoreHome = "-";
              var aScoreHome = "-";
}else {


          
            if(pastHomeFixture2018Home[0].hScore < pastHomeFixture2018Home[0].aScore) {
              var hScoreHome = pastHomeFixture2018Home[0].hScore;
              var aScoreHome = pastHomeFixture2018Home[0].aScore;
   
             result18h = "aw";
           }
            if(pastHomeFixture2018Home[0].hScore > pastHomeFixture2018Home[0].aScore) {
              result18h = "hw";
               var hScoreHome = pastHomeFixture2018Home[0].hScore;
              var aScoreHome = pastHomeFixture2018Home[0].aScore;

            }
            if(pastHomeFixture2018Home[0].hScore == pastHomeFixture2018Home[0].aScore){ 

               var hScoreHome = pastHomeFixture2018Home[0].hScore;
              var aScoreHome = pastHomeFixture2018Home[0].aScore;
                    
              result18h = "d"
          }
}


function getValue () {
  console.log(this.hScore)
  return this.hScore
}




            for (var j = 0; j < homeTable.length; j++) {





var matchStats = new Object;


function determineResultHome (fixture, team, venue){
var resultObject = new Object;

resultObject.hName = fixture.hName
resultObject.aName = fixture.aName
//console.log(team)

if (team == fixture.hName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " home win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeWin";
}

if (team == fixture.hName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " home loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeLoss";
}


if (team == fixture.aName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " Away Loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayLoss";
}

if (team == fixture.aName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " Away Win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayWin";
}

if (team == fixture.aName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + " away draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayDraw";
}

if (team == fixture.hName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + "home draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeDraw";
}

return resultObject
}


function determineResultAway (fixture, team, venue){
var resultObject = new Object;

resultObject.hName = fixture.hName
resultObject.aName = fixture.aName
//console.log(team)

if (team == fixture.hName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " home win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeWin";
}

if (team == fixture.hName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " home loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeLoss";
}


if (team == fixture.aName && parseInt(fixture.hScore) > parseInt(fixture.aScore)) {
//console.log(team + " Away Loss")
resultObject.lastGame = "L";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayLoss";
}

if (team == fixture.aName && parseInt(fixture.hScore) < parseInt(fixture.aScore)) {
//console.log(team + " Away Win")
resultObject.lastGame = "W";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayWin";
}

if (team == fixture.aName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + " away draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.hName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "awayDraw";
}

if (team == fixture.hName && parseInt(fixture.hScore) == parseInt(fixture.aScore)) {
//console.log(team + "home draw")
resultObject.lastGame = "D";
resultObject.opponent =  resultObject.aName.split(' ').join('');
resultObject.score = resultObject.hName + " " + fixture.hScore + "<br /> " + resultObject.aName + " " + fixture.aScore;
resultObject.class = "homeDraw";
}

return resultObject
}







if (homeTeamFixturesArray[0].hName == homeTeam || homeTeamFixturesArray[0].aName == homeTeam)
{ 
   
    matchResult = determineResultHome(homeTeamFixturesArray[0], homeTeam, "home");
    matchResult2 = determineResultHome(homeTeamFixturesArray[1], homeTeam, "home");
     matchResult3= determineResultHome(homeTeamFixturesArray[2], homeTeam, "home");
}


if (awayTeamFixturesArray[0].hName == awayTeam || awayTeamFixturesArray[0].aName == awayTeam)
{ 

    matchResultAwayTeam = determineResultAway(awayTeamFixturesArray[0], awayTeam, "away");
    matchResultAwayTeam2 = determineResultAway(awayTeamFixturesArray[1], awayTeam, "away");
     matchResultAwayTeam3 = determineResultAway(awayTeamFixturesArray[2], awayTeam, "away");
}





 




if (homeTable[j].name == homeTeam) {
markup = markup + '<tr><td>' + date + time + '</td><td id=' + homeTable[j].name.split(' ').join('') + '>' + homeTable[j].name + '</td><td><div class='+matchResult.class + ' id='+ matchResult.opponent +'>'+ matchResult.lastGame + '<span class=toolTip>' + matchResult.score +'</span></div><div class='+matchResult2.class + ' id='+ matchResult2.opponent +'>'+ matchResult2.lastGame + '<span class=toolTip>' + matchResult2.score +'</span></div><div class='+matchResult3.class + ' id='+ matchResult3.opponent +'>'+ matchResult3.lastGame + '<span class=toolTip>' + matchResult3.score +'</span></div></td>';
// console.log(homeTable[j].name)
homePoints = homeTable[j].points;
homeGoalsFor = homeTable[j].goalsF;
homeGoalsAgainst = homeTable[j].goalsA;
}
} //




            for (var j = 0; j < awayTable.length; j++) {
            if (awayTable[j].name == awayTeam) {
            //console.log(awayTable[j].name)
            awayPoints = awayTable[j].points;
            ptsDiff = homePoints - awayPoints;
            awayGoalsFor = awayTable[j].goalsF;
            awayGoalsAgainst = awayTable[j].goalsA;
            goalsForDelta = homeGoalsFor - awayGoalsFor;
            goalsAgainstDelta = awayGoalsAgainst - homeGoalsAgainst;
            // console.log(awayGoalsFor);

//<div class='+awayMatchResult.class + ' id='+ awayMatchResult.opponent +'>'+ awayMatchResult.lastGame + '<span class=toolTip>' + awayMatchResult.score +'</span>' + '</div><div class='+awayMatchResult2.class +' id='+ awayMatchResult2.opponent +'>'+ awayMatchResult2.lastGame + '<span class=toolTip>' + awayMatchResult2.score +'</span>' + '</div>' + '<div class='+awayMatchResult3.class +' id='+ awayMatchResult3.opponent +'>'+ awayMatchResult3.lastGame + '<span class=toolTip>' + awayMatchResult3.score +'</span>' + '</div><td>' + ptsDiff + '</td><td>' + goalsForDelta + '</td>


if(typeof pastHomeFixture[0] === 'undefined') {
       markup = markup + '<td id=' + awayTable[j].name.split(' ').join('') + '>' + awayTable[j].name + '</td><td><div class='+matchResultAwayTeam.class + ' id='+ matchResultAwayTeam.opponent +'>'+ matchResultAwayTeam.lastGame + '<span class=toolTip>' + matchResultAwayTeam.score +'</span>' + '</div><div class='+matchResultAwayTeam2.class +' id='+ matchResultAwayTeam2.opponent +'>'+ matchResultAwayTeam2.lastGame + '<span class=toolTip>' + matchResultAwayTeam2.score +'</span>' + '</div>' + '<div class='+matchResultAwayTeam3.class +' id='+ matchResultAwayTeam3.opponent +'>'+ matchResultAwayTeam3.lastGame + '<span class=toolTip>' + matchResultAwayTeam3.score +'</span>' + '</div><td>' + ptsDiff + '</td><td>' + goalsForDelta + '</td><td>' + goalsAgainstDelta + '</td><td class=' + result + '>n/a</td><td class=' + result18h + '>'+ hScoreHome + " " + aScoreHome +'</td><td class=' + result18 + '>'+ aScore + " " + hScore +'</td></tr>';

  }else{
     markup = markup + '<td id=' + awayTable[j].name.split(' ').join('') + '>' + awayTable[j].name + '</td><td><div class='+matchResultAwayTeam.class + ' id='+ matchResultAwayTeam.opponent +'>'+ matchResultAwayTeam.lastGame + '<span class=toolTip>' + matchResultAwayTeam.score +'</span>' + '</div><div class='+matchResultAwayTeam2.class +' id='+ matchResultAwayTeam2.opponent +'>'+ matchResultAwayTeam2.lastGame + '<span class=toolTip>' + matchResultAwayTeam2.score +'</span>' + '</div>' + '<div class='+matchResultAwayTeam3.class +' id='+ matchResultAwayTeam3.opponent +'>'+ matchResultAwayTeam3.lastGame + '<span class=toolTip>' + matchResultAwayTeam3.score +'</span>' + '</div><td>' + ptsDiff + '</td><td>' + goalsForDelta + '</td><td>' + goalsAgainstDelta + '</td><td class=' + result + '>'+ pastHomeFixture[0].aScore + " " + pastHomeFixture[0].hScore +'</td><td class=' + result18h + '>'+ hScoreHome + " " + aScoreHome +'</td><td class=' + result18 + '>'+ aScore + " " + hScore +'</td></tr>';


  }

       




            }
            } //


            document.getElementById('fixturesTable').innerHTML = markup;
            }




            var fixTable = document.getElementById('fixturesTable');
            var fixTableTRs = fixTable.getElementsByTagName("tr");

            var fixTableDiv = fixTable.getElementsByTagName("div");
    
            var leagueTable = document.getElementById('leagueTable');
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");

          

        for (var j = 0; j < fixTableDiv.length; j++) {
              fixTableDiv[j].addEventListener("mouseover", function(e) {   
            for (var p = 0; p < leagueTableTRs.length; p++) {

            if (leagueTableTRs[p].id == e.currentTarget.id) {
            leagueTableTRs[p].style.backgroundColor = "red";
            } 
            }
        })
            };


        for (var j = 0; j < fixTableDiv.length; j++) {
              fixTableDiv[j].addEventListener("mouseout", function(e) {              

            var leagueTable = document.getElementById('leagueTable');
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");

            //console.log(e.currentTarget.childNodes[1].id + " " + e.currentTarget.childNodes[3].id)
            for (var p = 0; p < leagueTableTRs.length; p++) {

            if (leagueTableTRs[p].id == e.currentTarget.id) {
            leagueTableTRs[p].style.backgroundColor = "white";
            } 
            }
        })
            };




            for (var j = 0; j < fixTableTRs.length; j++) {  
            fixTableTRs[j].addEventListener("mouseover", function(e) {
            console.log(e.currentTarget.childNodes[1]);

            var homeDrawTable = document.getElementById('homeDrawTable');
            var awayDrawTable = document.getElementById('awayDrawTable');
            var leagueTable = document.getElementById('leagueTable');

            e.currentTarget.childNodes[1].style.backgroundColor = "lightgreen"
            e.currentTarget.childNodes[2].style.backgroundColor = "lightgreen"
            e.currentTarget.childNodes[3].style.backgroundColor = "pink"
            e.currentTarget.childNodes[4].style.backgroundColor = "pink"

            var homeDrawTableTRs = homeDrawTable.getElementsByClassName("team");
            var awayDrawTableTRs = awayDrawTable.getElementsByClassName("team");
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");

            //console.log(e.currentTarget.childNodes[1].id + " " + e.currentTarget.childNodes[3].id)
            for (var p = 0; p < homeDrawTableTRs.length; p++) {


            if (homeDrawTableTRs[p].id == e.currentTarget.childNodes[1].id) {
            homeDrawTableTRs[p].style.backgroundColor = "lightgreen";
            }
            if (awayDrawTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            awayDrawTableTRs[p].style.backgroundColor = "pink";
            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[1].id) {
            leagueTableTRs[p].style.backgroundColor = "lightgreen";
            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            leagueTableTRs[p].style.backgroundColor = "pink";
            }


            }
            })




            fixTableTRs[j].addEventListener("mouseout", function(e) {
            var homeDrawTable = document.getElementById('homeDrawTable');
            var awayDrawTable = document.getElementById('awayDrawTable');
            var leagueTable = document.getElementById('leagueTable');

            var homeDrawTableTRs = homeDrawTable.getElementsByClassName("team");
            var awayDrawTableTRs = awayDrawTable.getElementsByClassName("team");
            var leagueTableTRs = leagueTable.getElementsByTagName("tr");

            e.currentTarget.childNodes[1].style.backgroundColor = "white"
            e.currentTarget.childNodes[2].style.backgroundColor = "white"
            e.currentTarget.childNodes[3].style.backgroundColor = "white"
            e.currentTarget.childNodes[4].style.backgroundColor = "white"

            for (var p = 0; p < homeDrawTableTRs.length; p++) {
            if (homeDrawTableTRs[p].id == e.currentTarget.childNodes[1].id) {
            homeDrawTableTRs[p].style.backgroundColor = "white";
            }
            if (awayDrawTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            awayDrawTableTRs[p].style.backgroundColor = "white";
            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[1].id) {
            leagueTableTRs[p].style.backgroundColor = "white";
            }
            if (leagueTableTRs[p].id == e.currentTarget.childNodes[3].id) {
            leagueTableTRs[p].style.backgroundColor = "white";
            }
            }
            })
 }
 //

 var leagueTable = [];
 homeTable.sort(function(a, b) {
  if (a.name < b.name) return -1;
  if (a.name > b.name) return 1;

 });
 awayTable.sort(function(a, b) {
  if (a.name < b.name) return -1;
  if (a.name > b.name) return 1;

 });
 for (var i = 0; i < awayTable.length; i++) {
  var team = new Object();
  var winPoints = (parseInt(homeTable[i].wins) + parseInt(awayTable[i].wins)) * 3;
  //console.log(homeTable[i].wins + " " + homeTable[i].name + " " + awayTable[i].name + awayTable[i].wins);
  var drawPoints = parseInt(homeTable[i].draws) + parseInt(awayTable[i].draws);
  team.name = awayTable[i].name;
  team.points = winPoints + drawPoints;
  leagueTable.push(team);
 }

 leagueTable.sort(function(a, b) {
  if (a.points > b.points) return -1;
  if (a.points < b.points) return 1;
 });

 for (var i = 0; i < leagueTable.length; i++) {
  var pointsMarkup = pointsMarkup + '<tr id=' + leagueTable[i].name.split(' ').join('') + '><td>' + leagueTable[i].name + '<td>' + leagueTable[i].points + '</td></tr>';
 }

 document.getElementById('leagueTable').innerHTML = pointsMarkup;




 /*
             document.addEventListener("mouseover", function(){
   document.getElementById("demo").innerHTML = "Hello World";

 }   
 */

}



</script>